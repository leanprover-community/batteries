{"declarations":[{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.countAliveTokens\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">countAliveTokens</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">x</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a></span></div></div>","info":{"doc":"Counts the number of alive (non-cancelled) tokens in the context tree, including\nthis context and all its descendants.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.countAliveTokens","kind":"def","line":138,"name":"Std.CancellationContext.countAliveTokens","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L138-L145"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.doneSelector\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">doneSelector</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">x</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Std/Internal/Async/Select.html#Std.Internal.IO.Async.Selector\">Internal.IO.Async.Selector</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>","info":{"doc":"Creates a selector that waits for cancellation.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.doneSelector","kind":"def","line":126,"name":"Std.CancellationContext.doneSelector","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L126-L131"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.done\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">done</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">x</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <span class=\"fn\">(<a href=\"./Std/Internal/Async/Basic.html#Std.Internal.IO.Async.AsyncTask\">Internal.IO.Async.AsyncTask</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a>)</span></span></div></div>","info":{"doc":"Waits for cancellation. Returns a task that completes when the context is cancelled.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.done","kind":"def","line":119,"name":"Std.CancellationContext.done","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L119-L124"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.getCancellationReason\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">getCancellationReason</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">x</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Std/Sync/CancellationToken.html#Std.CancellationReason\">CancellationReason</a>)</span></span></div></div>","info":{"doc":"Returns the cancellation reason if the context is cancelled.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.getCancellationReason","kind":"def","line":112,"name":"Std.CancellationContext.getCancellationReason","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L112-L117"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.isCancelled\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">isCancelled</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">x</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>","info":{"doc":"Checks if the context is cancelled.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.isCancelled","kind":"def","line":105,"name":"Std.CancellationContext.isCancelled","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L105-L110"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.cancel\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">cancel</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">x</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">reason</span> : <a href=\"./Std/Sync/CancellationToken.html#Std.CancellationReason\">CancellationReason</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>","info":{"doc":"Cancels this context and all child contexts with the given reason.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.cancel","kind":"def","line":93,"name":"Std.CancellationContext.cancel","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L93-L103"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.fork\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">fork</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">root</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a></span></div></div>","info":{"doc":"Forks a child context from a parent. If the parent is already cancelled, returns the parent context.\nOtherwise, creates a new child that will be cancelled when the parent is cancelled.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.fork","kind":"def","line":55,"name":"Std.CancellationContext.fork","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L55-L75"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.new\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">new</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a></span></div></div>","info":{"doc":"Creates a new root cancellation context.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.new","kind":"def","line":44,"name":"Std.CancellationContext.new","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L44-L53"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.id\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">id</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#UInt64\">UInt64</a></div></div>","info":{"doc":"","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.id","kind":"def","line":40,"name":"Std.CancellationContext.id","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L40-L40"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.token\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">token</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Std/Sync/CancellationToken.html#Std.CancellationToken\">CancellationToken</a></div></div>","info":{"doc":"","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.token","kind":"def","line":39,"name":"Std.CancellationContext.token","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L39-L39"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.state\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">state</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Std/Sync/Mutex.html#Std.Mutex\">Mutex</a> <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State\">State</a></span></div></div>","info":{"doc":"","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.state","kind":"def","line":38,"name":"Std.CancellationContext.state","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L38-L38"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.mk\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">state</span> : <span class=\"fn\"><a href=\"./Std/Sync/Mutex.html#Std.Mutex\">Mutex</a> <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State\">State</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">token</span> : <a href=\"./Std/Sync/CancellationToken.html#Std.CancellationToken\">CancellationToken</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Init/Prelude.html#UInt64\">UInt64</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\">CancellationContext</a></div></div>","info":{"doc":"","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.mk","kind":"ctor","line":37,"name":"Std.CancellationContext.mk","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L37-L37"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>","info":{"doc":"A cancellation context that allows multiple consumers to wait until cancellation is requested. Forms\na tree structure where cancelling a parent cancels all children.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext","kind":"structure","line":33,"name":"Std.CancellationContext","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L33-L40"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State.id\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">State</span>.<span class=\"name\">id</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State\">State</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#UInt64\">UInt64</a></div></div>","info":{"doc":"Next available ID\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.State.id","kind":"def","line":31,"name":"Std.CancellationContext.State.id","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L31-L31"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State.tokens\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">State</span>.<span class=\"name\">tokens</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State\">State</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Std/Data/TreeMap/Basic.html#Std.TreeMap\">TreeMap</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a> (<a href=\"./Std/Sync/CancellationToken.html#Std.CancellationToken\">CancellationToken</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a></span>) <a href=\"./Init/Data/Ord/Basic.html#Ord.compare\">compare</a></span></div></div>","info":{"doc":"Map of token IDs to optional tokens and their children.\n","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.State.tokens","kind":"def","line":26,"name":"Std.CancellationContext.State.tokens","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L26-L26"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State.mk\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">State</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">tokens</span> : <span class=\"fn\"><a href=\"./Std/Data/TreeMap/Basic.html#Std.TreeMap\">TreeMap</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a> (<a href=\"./Std/Sync/CancellationToken.html#Std.CancellationToken\">CancellationToken</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a></span>) <a href=\"./Init/Data/Ord/Basic.html#Ord.compare\">compare</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Init/Prelude.html#UInt64\">UInt64</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State\">State</a></div></div>","info":{"doc":"","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.State.mk","kind":"ctor","line":22,"name":"Std.CancellationContext.State.mk","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L22-L22"}},{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Std/Sync/CancellationContext.html#Std.CancellationContext.State\"><span class=\"name\">Std</span>.<span class=\"name\">CancellationContext</span>.<span class=\"name\">State</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>","info":{"doc":"","docLink":"./Std/Sync/CancellationContext.html#Std.CancellationContext.State","kind":"structure","line":22,"name":"Std.CancellationContext.State","sourceLink":"https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Std/Sync/CancellationContext.lean#L22-L31"}}],"imports":["Std.Sync.CancellationToken","Init.Data.Ord.UInt"],"instances":[],"name":"Std.Sync.CancellationContext"}