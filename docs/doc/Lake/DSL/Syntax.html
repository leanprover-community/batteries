<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lake.DSL.Syntax</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lake.DSL.Syntax";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">Syntax</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Lake/DSL/DeclUtil.html">Lake.DSL.DeclUtil</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lake.DSL.Syntax" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.nameConst"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">nameConst</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.dirConst"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">dirConst</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.getConfig"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">getConfig</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.packageCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.PackageCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">PackageCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.instCoePackageCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoePackageCommandCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.postUpdateDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">postUpdateDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.fromPath"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromPath</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.fromGit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromGit</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.fromSource"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromSource</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.fromClause"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromClause</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.withClause"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">withClause</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.verSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">verSpec</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.verClause"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">verClause</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.depName"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">depName</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.depSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">depSpec</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.requireDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">requireDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.RequireDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">RequireDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.instCoeRequireDeclCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeRequireDeclCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.buildDeclSig"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">buildDeclSig</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.moduleFacetDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">moduleFacetDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.packageFacetDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageFacetDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.libraryFacetDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">libraryFacetDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.targetCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">targetCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.leanLibCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">leanLibCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.LeanLibCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">LeanLibCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.instCoeLeanLibCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeLeanLibCommandCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.leanExeCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">leanExeCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.LeanExeCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">LeanExeCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.instCoeLeanExeCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeLeanExeCommandCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.inputFileCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">inputFileCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.InputFileCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">InputFileCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.instCoeInputFileCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeInputFileCommandCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.inputDirCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">inputDirCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.InputDirCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">InputDirCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.instCoeInputDirCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeInputDirCommandCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.externLibDeclSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">externLibDeclSpec</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.externLibCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">externLibCommand</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.scriptDeclSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">scriptDeclSpec</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.scriptDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">scriptDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.verLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">verLit</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.facetSuffix"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">facetSuffix</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.packageTargetLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageTargetLit</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.moduleTargetKeyLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">moduleTargetKeyLit</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.packageTargetKeyLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageTargetKeyLit</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.cmdDo"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">cmdDo</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.metaIf"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">metaIf</span></a></div><div class="nav_link"><a class="break_within" href="#Lake.DSL.runIO"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">runIO</span></a></div></nav><main>
<div class="mod_doc"><p>This module defines the syntax of the Lake DSL. The syntax is defined separately from the elaborator
and/or macro definitions to allow clients to import it without crashing Lean. In particular, this
allows the reference manual to document the DSL syntax.</p></div><div class="decl" id="Lake.DSL.nameConst"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L21-L25">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.nameConst"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">nameConst</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A macro that expands to the assigned name of package
during the Lakefile's elaboration.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.nameConst">Lake.DSL.nameConst</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.node">Lean.ParserDescr.node</a> <span class="fn">`Lake.DSL.nameConst</span> <span class="fn">1024</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot;__name__&quot;</span>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.nameConst" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.dirConst"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L27-L31">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.dirConst"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">dirConst</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A macro that expands to the path of package's directory
during the Lakefile's elaboration.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.dirConst">Lake.DSL.dirConst</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.node">Lean.ParserDescr.node</a> <span class="fn">`Lake.DSL.dirConst</span> <span class="fn">1024</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot;__dir__&quot;</span>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.dirConst" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.getConfig"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L33-L40">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.getConfig"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">getConfig</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A macro that expands to the specified configuration option (or <code>none</code>,
if the option has not been set) during the Lakefile's elaboration.</p><p>Configuration arguments are set either via the Lake CLI (by the <code>-K</code> option)
or via the <code>with</code> clause in a <code>require</code> statement.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.getConfig">Lake.DSL.getConfig</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.node">Lean.ParserDescr.node</a> <span class="fn">`Lake.DSL.getConfig</span> <span class="fn">1022</span>
    <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot;get_config? &quot;</span>)</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.const">Lean.ParserDescr.const</a> <span class="fn">`ident</span>)</span>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.getConfig" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h1 id="Package-Declarations" class="markdown-heading">Package Declarations <a class="hover-link" href="#Package-Declarations">#</a></h1><p>DSL syntax definitions for packages and hooks.</p></div><div class="decl" id="Lake.DSL.packageCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L47-L61">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.packageCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Defines the configuration of a Lake package.  Has many forms:</p><pre><code class="language-lean">package «pkg-name»
package «pkg-name» { /- config opts -/ }
package «pkg-name» where /- config opts -/
</code></pre><p>There can only be one <code>package</code> declaration per Lake configuration file.
The defined package configuration will be available for reference as <code>_package</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.packageCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.PackageCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L63-L64">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.PackageCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">PackageCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Defines the configuration of a Lake package.  Has many forms:</p><pre><code class="language-lean">package «pkg-name»
package «pkg-name» { /- config opts -/ }
package «pkg-name» where /- config opts -/
</code></pre><p>There can only be one <code>package</code> declaration per Lake configuration file.
The defined package configuration will be available for reference as <code>_package</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.PackageCommand">Lake.DSL.PackageCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lake.DSL.packageCommand</span></li></ul></details><details id="instances-for-list-Lake.DSL.PackageCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.instCoePackageCommandCommand"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L66-L67">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoePackageCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoePackageCommandCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Coe.html#Coe">Coe</a> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.PackageCommand">PackageCommand</a> <a href="../.././Init/Meta/Defs.html#Lean.Syntax.Command">Lean.Command</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoePackageCommandCommand">Lake.DSL.instCoePackageCommandCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Coe.html#Coe.mk">{</a> <span class="fn">coe</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.PackageCommand">Lake.DSL.PackageCommand</a>) =&gt; <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">{</a> <span class="fn">raw</span> := <span class="fn"><span class="fn">x</span>.<a href="../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span> <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">}</a></span> <a href="../.././Init/Coe.html#Coe.mk">}</a></li></ul></details></div></div><div class="decl" id="Lake.DSL.postUpdateDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L69-L94">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.postUpdateDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">postUpdateDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Declare a post-<code>lake update</code> hook for the package.
Runs the monadic action is after a successful <code>lake update</code> execution
in this package or one of its downstream dependents.</p><p><strong>Example</strong></p><p>This feature enables Mathlib to synchronize the Lean toolchain and run
<code>cache get</code> after a <code>lake update</code>:</p><pre><code>lean_exe cache
post_update pkg do
  let wsToolchainFile := (← getRootPackage).dir / &quot;lean-toolchain&quot;
  let mathlibToolchain ← <a href="../.././Init/System/IO.html#IO.FS.readFile">IO.FS.readFile</a> &lt;| pkg.dir / &quot;lean-toolchain&quot;
  <a href="../.././Init/System/IO.html#IO.FS.writeFile">IO.FS.writeFile</a> wsToolchainFile mathlibToolchain
  let exeFile ← runBuild cache.fetch
  let exitCode ← env exeFile.toString #[&quot;get&quot;]
  if exitCode ≠ 0 then
    error s!&quot;{pkg.name}: failed to fetch cache&quot;
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.postUpdateDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h1 id="The-require-syntax" class="markdown-heading">The <code>require</code> syntax <a class="hover-link" href="#The-require-syntax">#</a></h1><p>This is the <code>require</code> DSL syntax used to specify package dependencies.</p></div><div class="decl" id="Lake.DSL.fromPath"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L102-L103">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromPath"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromPath</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromPath">Lake.DSL.fromPath</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.nodeWithAntiquot">Lean.ParserDescr.nodeWithAntiquot</a> <span class="fn">&quot;fromPath&quot;</span> <span class="fn">`Lake.DSL.fromPath</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.cat">Lean.ParserDescr.cat</a> <span class="fn">`term</span> <span class="fn">0</span>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.fromPath" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.fromGit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L105-L106">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromGit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromGit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.fromGit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.fromSource"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L108-L109">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromSource"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromSource</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromSource">Lake.DSL.fromSource</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.nodeWithAntiquot">Lean.ParserDescr.nodeWithAntiquot</a> <span class="fn">&quot;fromSource&quot;</span> <span class="fn">`Lake.DSL.fromSource</span>
    <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`orelse</span> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromGit">Lake.DSL.fromGit</a> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromPath">Lake.DSL.fromPath</a>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.fromSource" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.fromClause"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L111-L138">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromClause"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">fromClause</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Specifies a specific source from which to draw the package dependency.
Dependencies that are downloaded from a remote source will be placed
into the workspace's <code>packagesDir</code>.</p><p><strong>Path Dependencies</strong></p><pre><code>from &lt;path&gt;
</code></pre><p>Lake loads the package located at a fixed <code>path</code> relative to the
requiring package's directory.</p><p><strong>Git Dependencies</strong></p><pre><code>from git &lt;url&gt; [@ &lt;rev&gt;] [/ &lt;subDir&gt;]
</code></pre><p>Lake clones the Git repository available at the specified fixed Git <code>url</code>,
and checks out the specified revision <code>rev</code>. The revision can be a commit hash,
branch, or tag. If none is provided, Lake defaults to <code>master</code>. After checkout,
Lake loads the package located in <code>subDir</code> (or the repository root if no
subdirectory is specified).</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromClause">Lake.DSL.fromClause</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.nodeWithAntiquot">Lean.ParserDescr.nodeWithAntiquot</a> <span class="fn">&quot;fromClause&quot;</span> <span class="fn">`Lake.DSL.fromClause</span>
    <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot; from &quot;</span>)</span> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromSource">Lake.DSL.fromSource</a>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.fromClause" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.withClause"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L144-L145">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.withClause"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">withClause</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.withClause">Lake.DSL.withClause</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.nodeWithAntiquot">Lean.ParserDescr.nodeWithAntiquot</a> <span class="fn">&quot;withClause&quot;</span> <span class="fn">`Lake.DSL.withClause</span>
    <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot; with &quot;</span>)</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.cat">Lean.ParserDescr.cat</a> <span class="fn">`term</span> <span class="fn">0</span>)</span>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.withClause" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.verSpec"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L147-L148">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.verSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">verSpec</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.verSpec" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.verClause"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L150-L155">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.verClause"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">verClause</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The version of the package to require.
To specify a Git revision, use the syntax <code>@ git &lt;rev&gt;</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.verClause">Lake.DSL.verClause</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.nodeWithAntiquot">Lean.ParserDescr.nodeWithAntiquot</a> <span class="fn">&quot;verClause&quot;</span> <span class="fn">`Lake.DSL.verClause</span>
    <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot; @ &quot;</span>)</span> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.verSpec">Lake.DSL.verSpec</a>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.verClause" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.depName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L157-L158">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.depName"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">depName</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.depName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.depSpec"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L160-L161">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.depSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">depSpec</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.depSpec" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.requireDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L163-L187">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.requireDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">requireDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Adds a new package dependency to the workspace. The general syntax is:</p><pre><code>require [&quot;&lt;scope&gt;&quot; /] &lt;pkg-name&gt; [@ &lt;version&gt;]
  [from &lt;source&gt;] [with &lt;options&gt;]
</code></pre><p>The <code>from</code> clause tells Lake where to locate the dependency.
See the <code><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromClause">fromClause</a></code> syntax documentation (e.g., hover over it) to see
the different forms this clause can take.</p><p>Without a <code>from</code> clause, Lake will lookup the package in the default
registry (i.e., Reservoir) and use the information there to download the
package at the requested <code>version</code>. The <code>scope</code> is used to disambiguate between
packages in the registry with the same <code>pkg-name</code>. In Reservoir, this scope
is the package owner (e.g., <code>leanprover</code> of <code>@leanprover/doc-gen4</code>).</p><p>The <code>with</code> clause specifies a <code>NameMap <a href="../.././Init/Prelude.html#String">String</a></code> of Lake options
used to configure the dependency. This is equivalent to passing <code>-K</code>
options to the dependency on the command line.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.requireDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.RequireDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L189-L190">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.RequireDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">RequireDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Adds a new package dependency to the workspace. The general syntax is:</p><pre><code>require [&quot;&lt;scope&gt;&quot; /] &lt;pkg-name&gt; [@ &lt;version&gt;]
  [from &lt;source&gt;] [with &lt;options&gt;]
</code></pre><p>The <code>from</code> clause tells Lake where to locate the dependency.
See the <code><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.fromClause">fromClause</a></code> syntax documentation (e.g., hover over it) to see
the different forms this clause can take.</p><p>Without a <code>from</code> clause, Lake will lookup the package in the default
registry (i.e., Reservoir) and use the information there to download the
package at the requested <code>version</code>. The <code>scope</code> is used to disambiguate between
packages in the registry with the same <code>pkg-name</code>. In Reservoir, this scope
is the package owner (e.g., <code>leanprover</code> of <code>@leanprover/doc-gen4</code>).</p><p>The <code>with</code> clause specifies a <code>NameMap <a href="../.././Init/Prelude.html#String">String</a></code> of Lake options
used to configure the dependency. This is equivalent to passing <code>-K</code>
options to the dependency on the command line.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.RequireDecl">Lake.DSL.RequireDecl</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lake.DSL.requireDecl</span></li></ul></details><details id="instances-for-list-Lake.DSL.RequireDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.instCoeRequireDeclCommand"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L192-L193">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeRequireDeclCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeRequireDeclCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Coe.html#Coe">Coe</a> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.RequireDecl">RequireDecl</a> <a href="../.././Init/Meta/Defs.html#Lean.Syntax.Command">Lean.Command</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeRequireDeclCommand">Lake.DSL.instCoeRequireDeclCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Coe.html#Coe.mk">{</a> <span class="fn">coe</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.RequireDecl">Lake.DSL.RequireDecl</a>) =&gt; <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">{</a> <span class="fn">raw</span> := <span class="fn"><span class="fn">x</span>.<a href="../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span> <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">}</a></span> <a href="../.././Init/Coe.html#Coe.mk">}</a></li></ul></details></div></div><div class="mod_doc"><h1 id="DSL-for-Targets-Facets" class="markdown-heading">DSL for Targets &amp; Facets <a class="hover-link" href="#DSL-for-Targets-Facets">#</a></h1><p>Syntax for declaring Lake targets and facets.</p></div><div class="decl" id="Lake.DSL.buildDeclSig"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L200-L201">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.buildDeclSig"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">buildDeclSig</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.buildDeclSig" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 id="Facet-Declarations" class="markdown-heading">Facet Declarations <a class="hover-link" href="#Facet-Declarations">#</a></h2></div><div class="decl" id="Lake.DSL.moduleFacetDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L207-L219">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.moduleFacetDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">moduleFacetDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new module facet. Has one form:</p><pre><code class="language-lean">module_facet «facet-name» (mod : Module) : α :=
  /- build term of type `FetchM (Job α)` -/
</code></pre><p>The <code>mod</code> parameter (and its type specifier) is optional.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.moduleFacetDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.packageFacetDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L221-L233">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.packageFacetDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageFacetDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new package facet. Has one form:</p><pre><code class="language-lean">package_facet «facet-name» (pkg : Package) : α :=
  /- build term of type `FetchM (Job α)` -/
</code></pre><p>The <code>pkg</code> parameter (and its type specifier) is optional.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.packageFacetDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.libraryFacetDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L235-L247">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.libraryFacetDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">libraryFacetDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new library facet. Has one form:</p><pre><code class="language-lean">library_facet «facet-name» (lib : LeanLib) : α :=
  /- build term of type `FetchM (Job α)` -/
</code></pre><p>The <code>lib</code> parameter (and its type specifier) is optional.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.libraryFacetDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 id="Custom-Target-Declaration" class="markdown-heading">Custom Target Declaration <a class="hover-link" href="#Custom-Target-Declaration">#</a></h2></div><div class="decl" id="Lake.DSL.targetCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L254-L268">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.targetCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">targetCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new custom target for the package. Has one form:</p><pre><code class="language-lean">target «target-name» (pkg : NPackage _package.name) : α :=
  /- build term of type `FetchM (Job α)` -/
</code></pre><p>The <code>pkg</code> parameter (and its type specifier) is optional.
It is of type <code>NPackage _package.name</code> to provably demonstrate the package
provided is the package in which the target is defined.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.targetCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 id="Lean-Library-Executable-Target-Declarations" class="markdown-heading">Lean Library &amp; Executable Target Declarations <a class="hover-link" href="#Lean-Library-Executable-Target-Declarations">#</a></h2></div><div class="decl" id="Lake.DSL.leanLibCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L275-L288">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.leanLibCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">leanLibCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new Lean library target for the package.
Can optionally be provided with a configuration of type <code>LeanLibConfig</code>.
Has many forms:</p><pre><code class="language-lean">lean_lib «target-name»
lean_lib «target-name» { /- config opts -/ }
lean_lib «target-name» where /- config opts -/
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.leanLibCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.LeanLibCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L290-L291">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanLibCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">LeanLibCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Define a new Lean library target for the package.
Can optionally be provided with a configuration of type <code>LeanLibConfig</code>.
Has many forms:</p><pre><code class="language-lean">lean_lib «target-name»
lean_lib «target-name» { /- config opts -/ }
lean_lib «target-name» where /- config opts -/
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanLibCommand">Lake.DSL.LeanLibCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lake.DSL.leanLibCommand</span></li></ul></details><details id="instances-for-list-Lake.DSL.LeanLibCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.instCoeLeanLibCommandCommand"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L293-L294">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeLeanLibCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeLeanLibCommandCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Coe.html#Coe">Coe</a> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanLibCommand">LeanLibCommand</a> <a href="../.././Init/Meta/Defs.html#Lean.Syntax.Command">Lean.Command</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeLeanLibCommandCommand">Lake.DSL.instCoeLeanLibCommandCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Coe.html#Coe.mk">{</a> <span class="fn">coe</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanLibCommand">Lake.DSL.LeanLibCommand</a>) =&gt; <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">{</a> <span class="fn">raw</span> := <span class="fn"><span class="fn">x</span>.<a href="../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span> <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">}</a></span> <a href="../.././Init/Coe.html#Coe.mk">}</a></li></ul></details></div></div><div class="decl" id="Lake.DSL.leanExeCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L296-L309">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.leanExeCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">leanExeCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new Lean binary executable target for the package.
Can optionally be provided with a configuration of type <code>LeanExeConfig</code>.
Has many forms:</p><pre><code class="language-lean">lean_exe «target-name»
lean_exe «target-name» { /- config opts -/ }
lean_exe «target-name» where /- config opts -/
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.leanExeCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.LeanExeCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L311-L312">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanExeCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">LeanExeCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Define a new Lean binary executable target for the package.
Can optionally be provided with a configuration of type <code>LeanExeConfig</code>.
Has many forms:</p><pre><code class="language-lean">lean_exe «target-name»
lean_exe «target-name» { /- config opts -/ }
lean_exe «target-name» where /- config opts -/
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanExeCommand">Lake.DSL.LeanExeCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lake.DSL.leanExeCommand</span></li></ul></details><details id="instances-for-list-Lake.DSL.LeanExeCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.instCoeLeanExeCommandCommand"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L314-L315">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeLeanExeCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeLeanExeCommandCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Coe.html#Coe">Coe</a> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanExeCommand">LeanExeCommand</a> <a href="../.././Init/Meta/Defs.html#Lean.Syntax.Command">Lean.Command</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeLeanExeCommandCommand">Lake.DSL.instCoeLeanExeCommandCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Coe.html#Coe.mk">{</a> <span class="fn">coe</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.LeanExeCommand">Lake.DSL.LeanExeCommand</a>) =&gt; <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">{</a> <span class="fn">raw</span> := <span class="fn"><span class="fn">x</span>.<a href="../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span> <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">}</a></span> <a href="../.././Init/Coe.html#Coe.mk">}</a></li></ul></details></div></div><div class="decl" id="Lake.DSL.inputFileCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L317-L323">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.inputFileCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">inputFileCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new input file target for the package.
Can optionally be provided with a configuration of type <code>InputFileConfig</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.inputFileCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.InputFileCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L325-L326">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputFileCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">InputFileCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Define a new input file target for the package.
Can optionally be provided with a configuration of type <code>InputFileConfig</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputFileCommand">Lake.DSL.InputFileCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lake.DSL.inputFileCommand</span></li></ul></details><details id="instances-for-list-Lake.DSL.InputFileCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.instCoeInputFileCommandCommand"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L328-L329">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeInputFileCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeInputFileCommandCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Coe.html#Coe">Coe</a> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputFileCommand">InputFileCommand</a> <a href="../.././Init/Meta/Defs.html#Lean.Syntax.Command">Lean.Command</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeInputFileCommandCommand">Lake.DSL.instCoeInputFileCommandCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Coe.html#Coe.mk">{</a> <span class="fn">coe</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputFileCommand">Lake.DSL.InputFileCommand</a>) =&gt; <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">{</a> <span class="fn">raw</span> := <span class="fn"><span class="fn">x</span>.<a href="../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span> <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">}</a></span> <a href="../.././Init/Coe.html#Coe.mk">}</a></li></ul></details></div></div><div class="decl" id="Lake.DSL.inputDirCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L331-L337">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.inputDirCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">inputDirCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new input directory target for the package.
Can optionally be provided with a configuration of type <code>InputDirConfig</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.inputDirCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.InputDirCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L339-L340">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputDirCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">InputDirCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Define a new input directory target for the package.
Can optionally be provided with a configuration of type <code>InputDirConfig</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputDirCommand">Lake.DSL.InputDirCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lake.DSL.inputDirCommand</span></li></ul></details><details id="instances-for-list-Lake.DSL.InputDirCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.instCoeInputDirCommandCommand"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L342-L343">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeInputDirCommandCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">instCoeInputDirCommandCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Coe.html#Coe">Coe</a> <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputDirCommand">InputDirCommand</a> <a href="../.././Init/Meta/Defs.html#Lean.Syntax.Command">Lean.Command</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.instCoeInputDirCommandCommand">Lake.DSL.instCoeInputDirCommandCommand</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Coe.html#Coe.mk">{</a> <span class="fn">coe</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lake/DSL/Syntax.html#Lake.DSL.InputDirCommand">Lake.DSL.InputDirCommand</a>) =&gt; <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">{</a> <span class="fn">raw</span> := <span class="fn"><span class="fn">x</span>.<a href="../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span> <a href="../.././Init/Prelude.html#Lean.TSyntax.mk">}</a></span> <a href="../.././Init/Coe.html#Coe.mk">}</a></li></ul></details></div></div><div class="mod_doc"><h2 id="External-Library-Target-Declaration" class="markdown-heading">External Library Target Declaration <a class="hover-link" href="#External-Library-Target-Declaration">#</a></h2></div><div class="decl" id="Lake.DSL.externLibDeclSpec"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L350-L351">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.externLibDeclSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">externLibDeclSpec</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.externLibDeclSpec" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.externLibCommand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L353-L369">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.externLibCommand"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">externLibCommand</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new external library target for the package. Has one form:</p><pre><code class="language-lean">extern_lib «target-name» (pkg : NPackage _package.name) :=
  /- build term of type `FetchM (Job FilePath)` -/
</code></pre><p>The <code>pkg</code> parameter (and its type specifier) is optional.
It is of type <code>NPackage _package.name</code> to provably demonstrate the package
provided is the package in which the target is defined.</p><p>The term should build the external library's <strong>static</strong> library.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.externLibCommand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h1 id="Script-Declarations" class="markdown-heading">Script Declarations <a class="hover-link" href="#Script-Declarations">#</a></h1><p>DSL definitions to define a Lake script for a package.</p></div><div class="decl" id="Lake.DSL.scriptDeclSpec"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L377-L378">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.scriptDeclSpec"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">scriptDeclSpec</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.scriptDeclSpec" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.scriptDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L380-L397">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.scriptDecl"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">scriptDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Define a new Lake script for the package.</p><p><strong>Example</strong></p><pre><code>/-- Display a greeting -/
script «script-name» (args) do
  if h : 0 &lt; args.length then
    <a href="../.././Init/System/IO.html#IO.println">IO.println</a> s!&quot;Hello, {args[0]'h}!&quot;
  else
    <a href="../.././Init/System/IO.html#IO.println">IO.println</a> &quot;Hello, world!&quot;
  return 0
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.scriptDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h1 id="Version-Literals" class="markdown-heading">Version Literals <a class="hover-link" href="#Version-Literals">#</a></h1><p>Defines the <code>v!&quot;&lt;ver&gt;&quot;</code> syntax for version literals.</p></div><div class="decl" id="Lake.DSL.verLit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L405-L408">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.verLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">verLit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A Lake version literal.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.verLit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h1 id="DSL-for-Build-Key" class="markdown-heading">DSL for Build Key <a class="hover-link" href="#DSL-for-Build-Key">#</a></h1><p>Notation for specifying build keys in a package.</p></div><div class="decl" id="Lake.DSL.facetSuffix"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L416-L416">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.facetSuffix"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">facetSuffix</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.facetSuffix" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.packageTargetLit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L417-L417">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.packageTargetLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageTargetLit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.packageTargetLit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.moduleTargetKeyLit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L419-L422">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.moduleTargetKeyLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">moduleTargetKeyLit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A module target key literal (with optional facet).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.moduleTargetKeyLit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.packageTargetKeyLit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L424-L427">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.packageTargetKeyLit"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">packageTargetKeyLit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A package target key literal (with optional facet).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.packageTargetKeyLit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h1 id="Elaboration-Time-Control-Flow" class="markdown-heading">Elaboration-Time Control Flow <a class="hover-link" href="#Elaboration-Time-Control-Flow">#</a></h1><p>Syntax for elaboration time control flow.</p></div><div class="decl" id="Lake.DSL.cmdDo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L435-L440">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.cmdDo"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">cmdDo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The <code>do</code> command syntax groups multiple similarly indented commands together.
The group can then be passed to another command that usually only accepts a
single command (e.g., <code>meta if</code>).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.cmdDo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.metaIf"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L442-L468">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.metaIf"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">metaIf</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The <code>meta if</code> command has two forms:</p><pre><code class="language-lean">meta if &lt;c:term&gt; then &lt;a:command&gt;
meta if &lt;c:term&gt; then &lt;a:command&gt; else &lt;b:command&gt;
</code></pre><p>It expands to the command <code>a</code> if the term <code>c</code> evaluates to true
(at elaboration time). Otherwise, it expands to command <code>b</code> (if an <code>else</code>
clause is provided).</p><p>One can use this command to specify, for example, external library targets
only available on specific platforms:</p><pre><code class="language-lean">meta if <a href="../.././Init/System/Platform.html#System.Platform.isWindows">System.Platform.isWindows</a> then
extern_lib winOnlyLib := ...
else meta if <a href="../.././Init/System/Platform.html#System.Platform.isOSX">System.Platform.isOSX</a> then
extern_lib macOnlyLib := ...
else
extern_lib linuxOnlyLib := ...
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lake.DSL.metaIf" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lake.DSL.runIO"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/lake/Lake/DSL/Syntax.lean#L470-L474">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lake/DSL/Syntax.html#Lake.DSL.runIO"><span class="name">Lake</span>.<span class="name">DSL</span>.<span class="name">runIO</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Executes a term of type <code><a href="../.././Init/System/IO.html#IO">IO</a> α</code> at elaboration-time
and produces an expression corresponding to the result via <code>ToExpr α</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lake/DSL/Syntax.html#Lake.DSL.runIO">Lake.DSL.runIO</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.node">Lean.ParserDescr.node</a> <span class="fn">`Lake.DSL.runIO</span> <span class="fn">1022</span>
    <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot;run_io &quot;</span>)</span> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.ParserDescr.const">Lean.ParserDescr.const</a> <span class="fn">`doSeq</span>)</span>)</span></span></li></ul></details><details id="instances-for-list-Lake.DSL.runIO" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>