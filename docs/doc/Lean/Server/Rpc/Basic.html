<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Server.Rpc.Basic</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Lean.Server.Rpc.Basic";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">Rpc</span>.<span class="name">Basic</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init/Dynamic.html">Init.Dynamic</a></li><li><a href="../../.././Lean/Data/Json/FromToJson/Basic.html">Lean.Data.Json.FromToJson.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Server.Rpc.Basic" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.RpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">RpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instInhabitedRpcRef.default"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instInhabitedRpcRef</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instInhabitedRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instInhabitedRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instBEqRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instBEqRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instBEqRpcRef.beq"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instBEqRpcRef</span>.<span class="name">beq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instHashableRpcRef.hash"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instHashableRpcRef</span>.<span class="name">hash</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instHashableRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instHashableRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instFromJsonRpcRef.fromJson"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instFromJsonRpcRef</span>.<span class="name">fromJson</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instFromJsonRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instFromJsonRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instToJsonRpcRef.toJson"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instToJsonRpcRef</span>.<span class="name">toJson</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instToJsonRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instToJsonRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Lsp.instToStringRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instToStringRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.WithRpcRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">WithRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instInhabitedWithRpcRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedWithRpcRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instInhabitedWithRpcRef.default"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedWithRpcRef</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.freshWithRpcRefId"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">freshWithRpcRefId</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.WithRpcRef.mk"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">WithRpcRef</span>.<span class="name">mk</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ReferencedObject"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ReferencedObject</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.RpcObjectStore"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">RpcObjectStore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.rpcStoreRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">rpcStoreRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.rpcGetRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">rpcGetRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.rpcReleaseRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">rpcReleaseRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.RpcEncodable"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">RpcEncodable</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instNonemptyRpcEncodable"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instNonemptyRpcEncodable</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableOfFromJsonOfToJson"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableOfFromJsonOfToJson</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableOption"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableOption</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableArray"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableArray</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableProd"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableProd</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableStateMRpcObjectStore"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableStateMRpcObjectStore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableWithRpcRefOfTypeName"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableWithRpcRefOfTypeName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcEncode"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableWithRpcRefOfTypeName</span>.<span class="name">rpcEncode</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcDecode"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableWithRpcRefOfTypeName</span>.<span class="name">rpcDecode</span></a></div></nav><main>
<div class="mod_doc"><p>Allows LSP clients to make Remote Procedure Calls to the server.</p><p>The single use case for these is to allow the infoview UI to refer to and manipulate heavy-weight
objects residing on the server. It would be inefficient to serialize these into JSON and send over.
For example, the client can format an <code>Expr</code> without transporting the whole <code>Environment</code>.</p><p>All RPC requests are relative to an open file and an RPC session for that file. The client must
first connect to the session using <code>$/lean/rpc/connect</code>.</p></div><div class="decl" id="Lean.Lsp.RpcRef"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L26-L38">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">RpcRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>An object which RPC clients can refer to without marshalling.</p><p>The language server may serve the same <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></code> multiple times and maintains a reference count
to track how many times it has served the reference.
If clients want to release the object associated with an <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></code>,
they must release the reference as many times as they have received it from the server.</p><ul class="structure_fields" id="Lean.Lsp.RpcRef.mk"><li id="Lean.Lsp.RpcRef.p" class="structure_field"><div class="structure_field_info">p : <a href="../../.././Init/Prelude.html#USize">USize</a></div></li></ul><details id="instances-for-list-Lean.Lsp.RpcRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Lsp.instInhabitedRpcRef.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instInhabitedRpcRef.default"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instInhabitedRpcRef</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instInhabitedRpcRef.default">Lean.Lsp.instInhabitedRpcRef.default</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">{</a> <span class="fn">p</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Lsp.instInhabitedRpcRef.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Lsp.instInhabitedRpcRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instInhabitedRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instInhabitedRpcRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instInhabitedRpcRef">Lean.Lsp.instInhabitedRpcRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instInhabitedRpcRef.default">Lean.Lsp.instInhabitedRpcRef.default</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Lsp.instBEqRpcRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instBEqRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instBEqRpcRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instBEqRpcRef">Lean.Lsp.instBEqRpcRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#BEq.mk">{</a> <span class="fn">beq</span> := <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instBEqRpcRef.beq">Lean.Lsp.instBEqRpcRef.beq</a> <a href="../../.././Init/Prelude.html#BEq.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Lsp.instBEqRpcRef.beq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instBEqRpcRef.beq"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instBEqRpcRef</span>.<span class="name">beq</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a> → <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instBEqRpcRef.beq">Lean.Lsp.instBEqRpcRef.beq</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">{</a> <span class="fn">p</span> := <span class="fn">a</span> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">}</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">{</a> <span class="fn">p</span> := <span class="fn">b</span> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">}</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> (<span class="fn">a</span> <a href="../../.././Init/Prelude.html#BEq.beq">==</a> <span class="fn">b</span>)</li><li class="equation"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instBEqRpcRef.beq">Lean.Lsp.instBEqRpcRef.beq</a> <span class="fn">x✝¹</span> <span class="fn">x✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></li></ul></details><details id="instances-for-list-Lean.Lsp.instBEqRpcRef.beq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Lsp.instHashableRpcRef.hash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instHashableRpcRef.hash"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instHashableRpcRef</span>.<span class="name">hash</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a> → <a href="../../.././Init/Prelude.html#UInt64">UInt64</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instHashableRpcRef.hash">Lean.Lsp.instHashableRpcRef.hash</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">{</a> <span class="fn">p</span> := <span class="fn">a</span> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.mk">}</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#mixHash">mixHash</a> <span class="fn">0</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Hashable.hash">hash</a> <span class="fn">a</span>)</span></span></li></ul></details><details id="instances-for-list-Lean.Lsp.instHashableRpcRef.hash" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Lsp.instHashableRpcRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instHashableRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instHashableRpcRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Hashable">Hashable</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instHashableRpcRef">Lean.Lsp.instHashableRpcRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Hashable.mk">{</a> <span class="fn">hash</span> := <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instHashableRpcRef.hash">Lean.Lsp.instHashableRpcRef.hash</a> <a href="../../.././Init/Prelude.html#Hashable.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Lsp.instFromJsonRpcRef.fromJson"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instFromJsonRpcRef.fromJson"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instFromJsonRpcRef</span>.<span class="name">fromJson</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Data/Json/Basic.html#Lean.Json">Json</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Except">Except</a> <a href="../../.././Init/Prelude.html#String">String</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Lsp.instFromJsonRpcRef.fromJson" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Lsp.instFromJsonRpcRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instFromJsonRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instFromJsonRpcRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.FromJson">FromJson</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instFromJsonRpcRef">Lean.Lsp.instFromJsonRpcRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.FromJson.mk">{</a> <span class="fn">fromJson?</span> := <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instFromJsonRpcRef.fromJson">Lean.Lsp.instFromJsonRpcRef.fromJson</a> <a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.FromJson.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Lsp.instToJsonRpcRef.toJson"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instToJsonRpcRef.toJson"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instToJsonRpcRef</span>.<span class="name">toJson</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a> → <a href="../../.././Lean/Data/Json/Basic.html#Lean.Json">Json</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instToJsonRpcRef.toJson">Lean.Lsp.instToJsonRpcRef.toJson</a> <span class="fn">x✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/Data/Json/Basic.html#Lean.Json.mkObj">Lean.Json.mkObj</a> <span class="fn"><a href="../../.././Init/Prelude.html#List.cons">[</a><a href="../../.././Init/Prelude.html#List.cons">[</a><a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">&quot;p&quot;</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn"><a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.ToJson.toJson">Lean.toJson</a> <span class="fn"><span class="fn">x✝</span>.<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.p">p</a></span></span><a href="../../.././Init/Prelude.html#Prod.mk">)</a><a href="../../.././Init/Prelude.html#List.cons">]</a><a href="../../.././Init/Prelude.html#List.cons">]</a>.<a href="../../.././Init/Prelude.html#List.flatten">flatten</a></span></span></li></ul></details><details id="instances-for-list-Lean.Lsp.instToJsonRpcRef.toJson" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Lsp.instToJsonRpcRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L38-L38">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instToJsonRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instToJsonRpcRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.ToJson">ToJson</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instToJsonRpcRef">Lean.Lsp.instToJsonRpcRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.ToJson.mk">{</a> <span class="fn">toJson</span> := <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instToJsonRpcRef.toJson">Lean.Lsp.instToJsonRpcRef.toJson</a> <a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.ToJson.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Lsp.instToStringRpcRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L40-L41">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instToStringRpcRef"><span class="name">Lean</span>.<span class="name">Lsp</span>.<span class="name">instToStringRpcRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/ToString/Basic.html#ToString">ToString</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.instToStringRpcRef">Lean.Lsp.instToStringRpcRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Data/ToString/Basic.html#ToString.mk">{</a> <span class="fn">toString</span> := <span class="fn">fun (<span class="fn">r</span> : <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">Lean.Lsp.RpcRef</a>) =&gt; <span class="fn"><a href="../../.././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn"><span class="fn">r</span>.<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef.p">p</a></span></span></span> <a href="../../.././Init/Data/ToString/Basic.html#ToString.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Server.WithRpcRef"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L47-L57">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">WithRpcRef</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a> u)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a> u</div></div><p>Marks values to be encoded as opaque references in RPC packets.
Two <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a></code>s with the same <code><a href="../../.././Init/Prelude.html#id">id</a></code> will yield the same client-side reference.</p><p>See also the docstring for <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a></code>.</p><ul class="structure_ext"><li id="_private.Lean.Server.Rpc.Basic.0.Lean.Server.WithRpcRef.mk'" class="structure_ext_ctor">mk' :: (</li><ul class="structure_ext_fields"><li id="Lean.Server.WithRpcRef.val" class="structure_field"><div class="structure_field_info">val : <span class="fn">α</span></div></li><li id="_private.Lean.Server.Rpc.Basic.0.Lean.Server.WithRpcRef.id" class="structure_field"><div class="structure_field_info">id : <a href="../../.././Init/Prelude.html#USize">USize</a></div></li></ul><li class="structure_ext_ctor">)</li></ul><details id="instances-for-list-Lean.Server.WithRpcRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.instInhabitedWithRpcRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L57-L57">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instInhabitedWithRpcRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedWithRpcRef</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">a✝</span> : <a href="../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">a✝</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">a✝</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instInhabitedWithRpcRef">Lean.Server.instInhabitedWithRpcRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instInhabitedWithRpcRef.default">Lean.Server.instInhabitedWithRpcRef.default</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Server.instInhabitedWithRpcRef.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L57-L57">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instInhabitedWithRpcRef.default"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedWithRpcRef</span>.<span class="name">default</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">a✝</span> : <a href="../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">a✝</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">a✝</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instInhabitedWithRpcRef.default">Lean.Server.instInhabitedWithRpcRef.default</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Server/Rpc/Basic.html#_private.Lean.Server.Rpc.Basic.0.Lean.Server.WithRpcRef.mk'">{</a> <span class="fn">val</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">id</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../../.././Lean/Server/Rpc/Basic.html#_private.Lean.Server.Rpc.Basic.0.Lean.Server.WithRpcRef.mk'">}</a></li></ul></details><details id="instances-for-list-Lean.Server.instInhabitedWithRpcRef.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.freshWithRpcRefId"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L59-L59">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.freshWithRpcRefId"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">freshWithRpcRefId</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <a href="../../.././Init/Prelude.html#USize">USize</a></span></div></div></div></div><div class="decl" id="Lean.Server.WithRpcRef.mk"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L61-L70">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef.mk"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">WithRpcRef</span>.<span class="name">mk</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">α</span>)</span></span></div></div><p>Creates an <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a></code> instance with a unique <code><a href="../../.././Init/Prelude.html#id">id</a></code>.
As long as the client holds at least one reference to this <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a></code>,
serving it again will yield the same client-side reference.
Thus, when used as React deps,
client-side references can help preserve UI state across RPC requests.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef.mk">Lean.Server.WithRpcRef.mk</a> <span class="fn">val</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">id</span> ← <span class="fn"><a href="../../.././Init/System/ST.html#ST.Ref.modifyGet">ST.Ref.modifyGet</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.freshWithRpcRefId">Lean.Server.freshWithRpcRefId</a> <span class="fn">fun (<span class="fn">id</span> : <a href="../../.././Init/Prelude.html#USize">USize</a>) =&gt; <a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">id</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">id</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a></span></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../.././Lean/Server/Rpc/Basic.html#_private.Lean.Server.Rpc.Basic.0.Lean.Server.WithRpcRef.mk'">{</a> <span class="fn">val</span> := <span class="fn">val</span>, <span class="fn">id</span> := <span class="fn">id</span> <a href="../../.././Lean/Server/Rpc/Basic.html#_private.Lean.Server.Rpc.Basic.0.Lean.Server.WithRpcRef.mk'">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.WithRpcRef.mk" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ReferencedObject"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L72-L75">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.ReferencedObject"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ReferencedObject</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Server.ReferencedObject.mk"><li id="Lean.Server.ReferencedObject.obj" class="structure_field"><div class="structure_field_info">obj : <a href="../../.././Init/Dynamic.html#Dynamic">Dynamic</a></div></li><li id="Lean.Server.ReferencedObject.id" class="structure_field"><div class="structure_field_info">id : <a href="../../.././Init/Prelude.html#USize">USize</a></div></li><li id="Lean.Server.ReferencedObject.rc" class="structure_field"><div class="structure_field_info">rc : <a href="../../.././Init/Prelude.html#Nat">Nat</a></div></li></ul><details id="instances-for-list-Lean.Server.ReferencedObject" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.RpcObjectStore"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L77-L92">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">RpcObjectStore</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Server.RpcObjectStore.mk"><li id="Lean.Server.RpcObjectStore.aliveRefs" class="structure_field"><div class="structure_field_info">aliveRefs : <span class="fn"><a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap">PersistentHashMap</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">Lsp.RpcRef</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.ReferencedObject">ReferencedObject</a></span></div><div class="structure_field_doc"><p>Objects that are being kept alive for the RPC client, together with their type names,
mapped to by their RPC reference.</p></div></li><li id="Lean.Server.RpcObjectStore.refsById" class="structure_field"><div class="structure_field_info">refsById : <span class="fn"><a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap">PersistentHashMap</a> <a href="../../.././Init/Prelude.html#USize">USize</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">Lsp.RpcRef</a></span></div><div class="structure_field_doc"><p>Unique <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></code> for the ID of an object that is being referenced through RPC.
We store this mapping so that we can reuse <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></code>s for the same object.
Reusing <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></code>s is helpful because it enables clients to reuse their UI state.</p></div></li><li id="Lean.Server.RpcObjectStore.nextRef" class="structure_field"><div class="structure_field_info">nextRef : <a href="../../.././Init/Prelude.html#USize">USize</a></div><div class="structure_field_doc"><p>Value to use for the next fresh <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">RpcRef</a></code>, monotonically increasing.</p></div></li></ul><details id="instances-for-list-Lean.Server.RpcObjectStore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.rpcStoreRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L94-L114">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.rpcStoreRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">rpcStoreRef</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Dynamic.html#TypeName">TypeName</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">obj</span> : <span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/State.html#StateM">StateM</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">Lsp.RpcRef</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.rpcStoreRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.rpcGetRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L116-L123">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.rpcGetRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">rpcGetRef</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Dynamic.html#TypeName">TypeName</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">r</span> : <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">Lsp.RpcRef</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <span class="fn">(<a href="../../.././Init/Control/Except.html#ExceptT">ExceptT</a> <a href="../../.././Init/Prelude.html#String">String</a> <a href="../../.././Init/Control/Id.html#Id">Id</a>)</span> <span class="fn">(<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.rpcGetRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.rpcReleaseRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L125-L137">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.rpcReleaseRef"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">rpcReleaseRef</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">r</span> : <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">Lsp.RpcRef</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/State.html#StateM">StateM</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.rpcReleaseRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.RpcEncodable"><div class="class"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L139-L167">source</a></div><div class="decl_header"><span class="decl_kind">class</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">RpcEncodable</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p><code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> α</code> means that <code>α</code> can be deserialized from and serialized into JSON
for the purpose of receiving arguments to and sending return values from
Remote Procedure Calls (RPCs).</p><p>Any type with <code>FromJson</code> and <code>ToJson</code> instances is <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a></code>.</p><p>Furthermore, types that do not have these instances may still be <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a></code>.
Use <code>deriving <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a></code> to automatically derive instances for such types.</p><p>This occurs when <code>α</code> contains data that should not or cannot be serialized:
for instance, heavy objects such as <code><a href="../../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a></code>, or closures.
For such data, we use the <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a></code> marker.
Note that for <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> α</code> to be <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a></code>,
<code>α</code> must have a <code><a href="../../.././Init/Dynamic.html#TypeName">TypeName</a></code> instance</p><p>On the server side, <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> α</code> is a structure containing a value of type <code>α</code> and an associated
<code><a href="../../.././Init/Prelude.html#id">id</a></code>.
On the client side, it is an opaque reference of (structural) type <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Lsp.RpcRef">Lsp.RpcRef</a></code>.
Thus, <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> α</code> is cheap to transmit over the network
but may only be accessed on the server side.
In practice, it is used by the client to pass data
between various RPC methods provided by the server.
Two <code><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a></code>s with the same <code><a href="../../.././Init/Prelude.html#id">id</a></code> will yield the same client-side reference.</p><ul class="structure_fields" id="Lean.Server.RpcEncodable.mk"><li id="Lean.Server.RpcEncodable.rpcEncode" class="structure_field"><div class="structure_field_info">rpcEncode : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../../.././Init/Control/State.html#StateM">StateM</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <a href="../../.././Lean/Data/Json/Basic.html#Lean.Json">Json</a></span></span></div></li><li id="Lean.Server.RpcEncodable.rpcDecode" class="structure_field"><div class="structure_field_info">rpcDecode : <span class="fn"><a href="../../.././Lean/Data/Json/Basic.html#Lean.Json">Json</a> → <span class="fn"><a href="../../.././Init/Control/Except.html#ExceptT">ExceptT</a> <a href="../../.././Init/Prelude.html#String">String</a> <span class="fn">(<a href="../../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <a href="../../.././Init/Control/Id.html#Id">Id</a>)</span> <span class="fn">α</span></span></span></div></li></ul><details class="instances"><summary>Instances</summary><ul id="instances-list-Lean.Server.RpcEncodable" class="instances-list"></ul></details></div></div><div class="decl" id="Lean.Server.instNonemptyRpcEncodable"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L170-L171">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instNonemptyRpcEncodable"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instNonemptyRpcEncodable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">(<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">α</span>)</span></span></div></div></div></div><div class="decl" id="Lean.Server.instRpcEncodableOfFromJsonOfToJson"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L173-L175">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableOfFromJsonOfToJson"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableOfFromJsonOfToJson</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.FromJson">FromJson</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.ToJson">ToJson</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableOfFromJsonOfToJson">Lean.Server.instRpcEncodableOfFromJsonOfToJson</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable.mk">{</a> <span class="fn">rpcEncode</span> := <span class="fn">fun (<span class="fn">a</span> : <span class="fn">α</span>) =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.ToJson.toJson">Lean.toJson</a> <span class="fn">a</span>)</span></span></span>, <span class="fn">rpcDecode</span> := <span class="fn">fun (<span class="fn">j</span> : <a href="../../.././Lean/Data/Json/Basic.html#Lean.Json">Lean.Json</a>) =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#MonadExcept.ofExcept">ofExcept</a> <span class="fn">(<a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.FromJson.fromJson?">Lean.fromJson?</a> <span class="fn">j</span>)</span></span></span> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Server.instRpcEncodableOption"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L177-L179">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableOption"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableOption</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Server.instRpcEncodableArray"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L183-L185">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableArray"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableArray</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Server.instRpcEncodableProd"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L187-L191">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableProd"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableProd</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">β</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">β</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn">β</span>)</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Server.instRpcEncodableStateMRpcObjectStore"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L193-L197">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableStateMRpcObjectStore"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableStateMRpcObjectStore</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">(<a href="../../.././Init/Control/State.html#StateM">StateM</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Server.instRpcEncodableWithRpcRefOfTypeName"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L199-L204">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableWithRpcRefOfTypeName"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableWithRpcRefOfTypeName</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Dynamic.html#TypeName">TypeName</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcEncodable">RpcEncodable</a> <span class="fn">(<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcEncode"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L203-L203">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcEncode"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableWithRpcRefOfTypeName</span>.<span class="name">rpcEncode</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Dynamic.html#TypeName">TypeName</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">r</span> : <span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/State.html#StateM">StateM</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <a href="../../.././Lean/Data/Json/Basic.html#Lean.Json">Json</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcEncode">Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcEncode</a> <span class="fn">r</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.ToJson.toJson">Lean.toJson</a> <a href="../../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.rpcStoreRef">Lean.Server.rpcStoreRef</a> <span class="fn">r</span></span></li></ul></details><details id="instances-for-list-Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcEncode" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcDecode"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/Rpc/Basic.lean#L204-L204">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcDecode"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instRpcEncodableWithRpcRefOfTypeName</span>.<span class="name">rpcDecode</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Dynamic.html#TypeName">TypeName</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">j</span> : <a href="../../.././Lean/Data/Json/Basic.html#Lean.Json">Json</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/Except.html#ExceptT">ExceptT</a> <a href="../../.././Init/Prelude.html#String">String</a> <span class="fn">(<a href="../../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.RpcObjectStore">RpcObjectStore</a> <a href="../../.././Init/Control/Id.html#Id">Id</a>)</span> <span class="fn">(<a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.WithRpcRef">WithRpcRef</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcDecode">Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcDecode</a> <span class="fn">j</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<a href="../../.././Lean/Data/Json/FromToJson/Basic.html#Lean.FromJson.fromJson?">Lean.fromJson?</a> <span class="fn">j</span>)</span></span>
  <span class="fn"><a href="../../.././Lean/Server/Rpc/Basic.html#Lean.Server.rpcGetRef">Lean.Server.rpcGetRef</a> <span class="fn">α</span> <span class="fn">__do_lift</span></span></span></li></ul></details><details id="instances-for-list-Lean.Server.instRpcEncodableWithRpcRefOfTypeName.rpcDecode" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>