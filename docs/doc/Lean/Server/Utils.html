<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Server.Utils</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Server.Utils";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">Utils</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init/System/Uri.html">Init.System.Uri</a></li><li><a href="../.././Lean/Server/InfoUtils.html">Lean.Server.InfoUtils</a></li><li><a href="../.././Lean/Data/Lsp/Communication.html">Lean.Data.Lsp.Communication</a></li><li><a href="../.././Lean/Data/Lsp/Diagnostics.html">Lean.Data.Lsp.Diagnostics</a></li><li><a href="../.././Lean/Data/Lsp/Extra.html">Lean.Data.Lsp.Extra</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Server.Utils" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#IO.throwServerError"><span class="name">IO</span>.<span class="name">throwServerError</span></a></div><div class="nav_link"><a class="break_within" href="#IO.FS.Stream.chainRight"><span class="name">IO</span>.<span class="name">FS</span>.<span class="name">Stream</span>.<span class="name">chainRight</span></a></div><div class="nav_link"><a class="break_within" href="#IO.FS.Stream.chainLeft"><span class="name">IO</span>.<span class="name">FS</span>.<span class="name">Stream</span>.<span class="name">chainLeft</span></a></div><div class="nav_link"><a class="break_within" href="#IO.FS.Stream.withPrefix"><span class="name">IO</span>.<span class="name">FS</span>.<span class="name">Stream</span>.<span class="name">withPrefix</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.DocumentMeta"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">DocumentMeta</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instInhabitedDocumentMeta"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedDocumentMeta</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instInhabitedDocumentMeta.default"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedDocumentMeta</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.DocumentMeta.mkInputContext"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">DocumentMeta</span>.<span class="name">mkInputContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.replaceLspRange"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">replaceLspRange</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.maybeTee"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">maybeTee</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.applyDocumentChange"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">applyDocumentChange</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.foldDocumentChanges"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">foldDocumentChanges</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.mkPublishDiagnosticsNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkPublishDiagnosticsNotification</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.mkFileProgressNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkFileProgressNotification</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.mkFileProgressAtPosNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkFileProgressAtPosNotification</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.mkFileProgressDoneNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkFileProgressDoneNotification</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.mkApplyWorkspaceEditRequest"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkApplyWorkspaceEditRequest</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.documentUriFromModule?"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">documentUriFromModule?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.moduleFromDocumentUri"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">moduleFromDocumentUri</span></a></div><div class="nav_link"><a class="break_within" href="#String.Range.toLspRange"><span class="name">String</span>.<span class="name">Range</span>.<span class="name">toLspRange</span></a></div></nav><main>
<div class="decl" id="IO.throwServerError"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L20-L22">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#IO.throwServerError"><span class="name">IO</span>.<span class="name">throwServerError</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">err</span> : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">α</span></span></div></div><p>Throws an <code><a href="../.././Init/System/IOError.html#IO.userError">IO.userError</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#IO.throwServerError">IO.throwServerError</a> <span class="fn">err</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#MonadExcept.throw">throw</a> <span class="fn">(<a href="../.././Init/System/IOError.html#IO.userError">IO.userError</a> <span class="fn">err</span>)</span></span></li></ul></details><details id="instances-for-list-IO.throwServerError" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="IO.FS.Stream.chainRight"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L26-L46">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#IO.FS.Stream.chainRight"><span class="name">IO</span>.<span class="name">FS</span>.<span class="name">Stream</span>.<span class="name">chainRight</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">a </span><span class="fn">b</span> : <a href="../.././Init/System/IO.html#IO.FS.Stream">Stream</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">flushEagerly</span> : <a href="../.././Init/Prelude.html#Bool">Bool</a> := <a href="../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/System/IO.html#IO.FS.Stream">Stream</a></div></div><p>Chains two streams by creating a new stream s.t. writing to it
just writes to <code>a</code> but reading from it also duplicates the read output
into <code>b</code>, c.f. <code>a | tee b</code> on Unix.
NB: if <code>a</code> is written to but this stream is never read from,
the output will <em>not</em> be duplicated. Use this if you only care
about the data that was actually read.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-IO.FS.Stream.chainRight" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="IO.FS.Stream.chainLeft"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L48-L59">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#IO.FS.Stream.chainLeft"><span class="name">IO</span>.<span class="name">FS</span>.<span class="name">Stream</span>.<span class="name">chainLeft</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">a </span><span class="fn">b</span> : <a href="../.././Init/System/IO.html#IO.FS.Stream">Stream</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">flushEagerly</span> : <a href="../.././Init/Prelude.html#Bool">Bool</a> := <a href="../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/System/IO.html#IO.FS.Stream">Stream</a></div></div><p>Like <code>tee a | b</code> on Unix. See <code>chainOut</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-IO.FS.Stream.chainLeft" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="IO.FS.Stream.withPrefix"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L61-L68">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#IO.FS.Stream.withPrefix"><span class="name">IO</span>.<span class="name">FS</span>.<span class="name">Stream</span>.<span class="name">withPrefix</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">a</span> : <a href="../.././Init/System/IO.html#IO.FS.Stream">Stream</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">pre</span> : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/System/IO.html#IO.FS.Stream">Stream</a></div></div><p>Prefixes all written outputs with <code>pre</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-IO.FS.Stream.withPrefix" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.DocumentMeta"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L75-L96">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">DocumentMeta</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Meta-Data of a document.</p><ul class="structure_fields" id="Lean.Server.DocumentMeta.mk"><li id="Lean.Server.DocumentMeta.uri" class="structure_field"><div class="structure_field_info">uri : <a href="../.././Lean/Data/Lsp/BasicAux.html#Lean.Lsp.DocumentUri">Lsp.DocumentUri</a></div><div class="structure_field_doc"><p>URI where the document is located.</p></div></li><li id="Lean.Server.DocumentMeta.mod" class="structure_field"><div class="structure_field_info">mod : <a href="../.././Init/Prelude.html#Lean.Name">Name</a></div><div class="structure_field_doc"><p>Module name corresponding to <code><a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.uri">uri</a></code>.
We store the module name instead of recomputing it as needed to ensure that we can still
determine the original module name even when the file has been deleted in the mean-time.</p></div></li><li id="Lean.Server.DocumentMeta.version" class="structure_field"><div class="structure_field_info">version : <a href="../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>Version number of the document. Incremented whenever the document is edited.</p></div></li><li id="Lean.Server.DocumentMeta.text" class="structure_field"><div class="structure_field_info">text : <a href="../.././Lean/Data/Position.html#Lean.FileMap">FileMap</a></div><div class="structure_field_doc"><p>Current text of the document.
It is maintained such that it is normalized using <code><a href="../.././Init/Data/String/Extra.html#String.crlfToLf">String.crlfToLf</a></code>, which preserves logical line/column numbers.
(Note: we assume that edit operations never split or merge <code>\r\n</code> line endings.)</p></div></li><li id="Lean.Server.DocumentMeta.dependencyBuildMode" class="structure_field"><div class="structure_field_info">dependencyBuildMode : <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.DependencyBuildMode">Lsp.DependencyBuildMode</a></div><div class="structure_field_doc"><p>Controls when dependencies of the document are built on <code>textDocument/didOpen</code> notifications.</p></div></li></ul><details id="instances-for-list-Lean.Server.DocumentMeta" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.instInhabitedDocumentMeta"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L96-L96">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.instInhabitedDocumentMeta"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedDocumentMeta</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta">DocumentMeta</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Server/Utils.html#Lean.Server.instInhabitedDocumentMeta">Lean.Server.instInhabitedDocumentMeta</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../.././Lean/Server/Utils.html#Lean.Server.instInhabitedDocumentMeta.default">Lean.Server.instInhabitedDocumentMeta.default</a> <a href="../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Server.instInhabitedDocumentMeta.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L96-L96">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.instInhabitedDocumentMeta.default"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedDocumentMeta</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta">DocumentMeta</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Server/Utils.html#Lean.Server.instInhabitedDocumentMeta.default">Lean.Server.instInhabitedDocumentMeta.default</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.mk">{</a> <span class="fn">uri</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">mod</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">version</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">text</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">dependencyBuildMode</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.instInhabitedDocumentMeta.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.DocumentMeta.mkInputContext"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L98-L103">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.mkInputContext"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">DocumentMeta</span>.<span class="name">mkInputContext</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">doc</span> : <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta">DocumentMeta</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Parser/Types.html#Lean.Parser.InputContext">Parser.InputContext</a></div></div><p>Extracts an <code>InputContext</code> from <code>doc</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">doc</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.mkInputContext">mkInputContext</a></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Parser/Types.html#Lean.Parser.InputContext.mk">Lean.Parser.InputContext.mk</a> <span class="fn"><span class="fn"><span class="fn">doc</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.text">text</a></span>.<a href="../.././Lean/Data/Position.html#Lean.FileMap.source">source</a></span>
    <span class="fn"><span class="fn">(<span class="fn"><span class="fn">(<a href="../.././Init/System/Uri.html#System.Uri.fileUriToPath?">System.Uri.fileUriToPath?</a> <span class="fn"><span class="fn">doc</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.uri">uri</a></span>)</span>.<a href="../.././Init/Prelude.html#Option.getD">getD</a></span> <a href="../.././Init/System/FilePath.html#System.FilePath.mk">{</a> <span class="fn">toString</span> := <span class="fn"><span class="fn">doc</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.uri">uri</a></span> <a href="../.././Init/System/FilePath.html#System.FilePath.mk">}</a>)</span>.<a href="../.././Init/System/FilePath.html#System.FilePath.toString">toString</a></span> <span class="fn"><span class="fn"><span class="fn"><span class="fn">doc</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.text">text</a></span>.<a href="../.././Lean/Data/Position.html#Lean.FileMap.source">source</a></span>.<a href="../.././Init/Prelude.html#String.endPos">endPos</a></span> <span class="fn">⋯</span> <span class="fn"><span class="fn">doc</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.text">text</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.DocumentMeta.mkInputContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.replaceLspRange"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L105-L118">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.replaceLspRange"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">replaceLspRange</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">text</span> : <a href="../.././Lean/Data/Position.html#Lean.FileMap">FileMap</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">r</span> : <a href="../.././Lean/Data/Lsp/BasicAux.html#Lean.Lsp.Range">Lsp.Range</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">newText</span> : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/Position.html#Lean.FileMap">FileMap</a></div></div><p>Replaces the range <code>r</code> (using LSP UTF-16 positions) in <code><a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.text">text</a></code> (using UTF-8 positions)
with <code>newText</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.replaceLspRange" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.maybeTee"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L122-L136">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.maybeTee"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">maybeTee</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">fName</span> : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">isOut</span> : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h</span> : <a href="../.././Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <a href="../.././Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a></span></div></div><p>Duplicates an I/O stream to a log file <code>fName</code> in LEAN_SERVER_LOG_DIR
if that envvar is set.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.maybeTee" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.applyDocumentChange"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L140-L145">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.applyDocumentChange"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">applyDocumentChange</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">oldText</span> : <a href="../.././Lean/Data/Position.html#Lean.FileMap">FileMap</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">change</span> : <a href="../.././Lean/Data/Lsp/TextSync.html#Lean.Lsp.TextDocumentContentChangeEvent">Lsp.TextDocumentContentChangeEvent</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/Position.html#Lean.FileMap">FileMap</a></div></div><p>Returns the document contents with the change applied.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.applyDocumentChange">Lean.Server.applyDocumentChange</a> <span class="fn">oldText</span> <span class="fn">(<a href="../.././Lean/Data/Lsp/TextSync.html#Lean.Lsp.TextDocumentContentChangeEvent.rangeChange">Lean.Lsp.TextDocumentContentChangeEvent.rangeChange</a> <span class="fn">range</span> <span class="fn">newText</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.replaceLspRange">Lean.Server.replaceLspRange</a> <span class="fn">oldText</span> <span class="fn">range</span> <span class="fn">newText</span></span></li><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.applyDocumentChange">Lean.Server.applyDocumentChange</a> <span class="fn">oldText</span> <span class="fn">(<a href="../.././Lean/Data/Lsp/TextSync.html#Lean.Lsp.TextDocumentContentChangeEvent.fullChange">Lean.Lsp.TextDocumentContentChangeEvent.fullChange</a> <span class="fn">newText</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><span class="fn"><span class="fn">newText</span>.<a href="../.././Init/Data/String/Extra.html#String.crlfToLf">crlfToLf</a></span>.<a href="../.././Lean/Data/Position.html#String.toFileMap">toFileMap</a></span></li></ul></details><details id="instances-for-list-Lean.Server.applyDocumentChange" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.foldDocumentChanges"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L147-L149">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.foldDocumentChanges"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">foldDocumentChanges</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">changes</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Data/Lsp/TextSync.html#Lean.Lsp.TextDocumentContentChangeEvent">Lsp.TextDocumentContentChangeEvent</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">oldText</span> : <a href="../.././Lean/Data/Position.html#Lean.FileMap">FileMap</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/Position.html#Lean.FileMap">FileMap</a></div></div><p>Returns the document contents with all changes applied.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.foldDocumentChanges">Lean.Server.foldDocumentChanges</a> <span class="fn">changes</span> <span class="fn">oldText</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Data/Array/Basic.html#Array.foldl">Array.foldl</a> <a href="../.././Lean/Server/Utils.html#Lean.Server.applyDocumentChange">Lean.Server.applyDocumentChange</a> <span class="fn">oldText</span> <span class="fn">changes</span></span></li></ul></details><details id="instances-for-list-Lean.Server.foldDocumentChanges" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.mkPublishDiagnosticsNotification"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L151-L159">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.mkPublishDiagnosticsNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkPublishDiagnosticsNotification</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta">DocumentMeta</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">diagnostics</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Data/Lsp/Diagnostics.html#Lean.Lsp.Diagnostic">Lsp.Diagnostic</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification">JsonRpc.Notification</a> <a href="../.././Lean/Data/Lsp/Diagnostics.html#Lean.Lsp.PublishDiagnosticsParams">Lsp.PublishDiagnosticsParams</a></span></div></div><p>Constructs a <code>textDocument/publishDiagnostics</code> notification.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.mkPublishDiagnosticsNotification">Lean.Server.mkPublishDiagnosticsNotification</a> <span class="fn">m</span> <span class="fn">diagnostics</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification.mk">{</a> <span class="fn">method</span> := <span class="fn">&quot;textDocument/publishDiagnostics&quot;</span>,
    <span class="fn">param</span> := <a href="../.././Lean/Data/Lsp/Diagnostics.html#Lean.Lsp.PublishDiagnosticsParams.mk">{</a> <span class="fn">uri</span> := <span class="fn"><span class="fn">m</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.uri">uri</a></span>, <span class="fn">version?</span> := <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">↑<span class="fn"><span class="fn">m</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.version">version</a></span></span></span>, <span class="fn">diagnostics</span> := <span class="fn">diagnostics</span> <a href="../.././Lean/Data/Lsp/Diagnostics.html#Lean.Lsp.PublishDiagnosticsParams.mk">}</a> <a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.mkPublishDiagnosticsNotification" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.mkFileProgressNotification"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L161-L168">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.mkFileProgressNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkFileProgressNotification</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta">DocumentMeta</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">processing</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressProcessingInfo">Lsp.LeanFileProgressProcessingInfo</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification">JsonRpc.Notification</a> <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressParams">Lsp.LeanFileProgressParams</a></span></div></div><p>Constructs a <code>$/lean/fileProgress</code> notification.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.mkFileProgressNotification">Lean.Server.mkFileProgressNotification</a> <span class="fn">m</span> <span class="fn">processing</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification.mk">{</a> <span class="fn">method</span> := <span class="fn">&quot;$/lean/fileProgress&quot;</span>,
    <span class="fn">param</span> := <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressParams.mk">{</a> <span class="fn">textDocument</span> := <a href="../.././Lean/Data/Lsp/Basic.html#Lean.Lsp.VersionedTextDocumentIdentifier.mk">{</a> <span class="fn">uri</span> := <span class="fn"><span class="fn">m</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.uri">uri</a></span>, <span class="fn">version?</span> := <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn"><span class="fn">m</span>.<a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.version">version</a></span></span> <a href="../.././Lean/Data/Lsp/Basic.html#Lean.Lsp.VersionedTextDocumentIdentifier.mk">}</a>, <span class="fn">processing</span> := <span class="fn">processing</span> <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressParams.mk">}</a> <a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.mkFileProgressNotification" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.mkFileProgressAtPosNotification"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L170-L174">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.mkFileProgressAtPosNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkFileProgressAtPosNotification</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta">DocumentMeta</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">pos</span> : <a href="../.././Init/Prelude.html#String.Pos.Raw">String.Pos.Raw</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">kind</span> : <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressKind">Lsp.LeanFileProgressKind</a> := <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressKind.processing">Lsp.LeanFileProgressKind.processing</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification">JsonRpc.Notification</a> <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressParams">Lsp.LeanFileProgressParams</a></span></div></div><p>Constructs a <code>$/lean/fileProgress</code> notification from the given position onwards.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.mkFileProgressAtPosNotification" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.mkFileProgressDoneNotification"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L176-L178">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.mkFileProgressDoneNotification"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkFileProgressDoneNotification</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta">DocumentMeta</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Notification">JsonRpc.Notification</a> <a href="../.././Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressParams">Lsp.LeanFileProgressParams</a></span></div></div><p>Constructs a <code>$/lean/fileProgress</code> notification marking processing as done.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.mkFileProgressDoneNotification">Lean.Server.mkFileProgressDoneNotification</a> <span class="fn">m</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.mkFileProgressNotification">Lean.Server.mkFileProgressNotification</a> <span class="fn">m</span> <a href="../.././Init/Prelude.html#List.toArray">#[</a><a href="../.././Init/Prelude.html#List.toArray">]</a></span></li></ul></details><details id="instances-for-list-Lean.Server.mkFileProgressDoneNotification" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.mkApplyWorkspaceEditRequest"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L181-L183">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.mkApplyWorkspaceEditRequest"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">mkApplyWorkspaceEditRequest</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">params</span> : <a href="../.././Lean/Data/Lsp/Basic.html#Lean.Lsp.ApplyWorkspaceEditParams">Lsp.ApplyWorkspaceEditParams</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Request">JsonRpc.Request</a> <a href="../.././Lean/Data/Lsp/Basic.html#Lean.Lsp.ApplyWorkspaceEditParams">Lsp.ApplyWorkspaceEditParams</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#Lean.Server.mkApplyWorkspaceEditRequest">Lean.Server.mkApplyWorkspaceEditRequest</a> <span class="fn">params</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Request.mk">{</a> <span class="fn">id</span> := <span class="fn"><a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID.str">Lean.JsonRpc.RequestID.str</a> <span class="fn">&quot;workspace/applyEdit&quot;</span></span>, <span class="fn">method</span> := <span class="fn">&quot;workspace/applyEdit&quot;</span>, <span class="fn">param</span> := <span class="fn">params</span> <a href="../.././Lean/Data/JsonRpc.html#Lean.JsonRpc.Request.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.mkApplyWorkspaceEditRequest" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.documentUriFromModule?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L194-L206">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.documentUriFromModule?"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">documentUriFromModule?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">modName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Data/Lsp/BasicAux.html#Lean.Lsp.DocumentUri">Lsp.DocumentUri</a>)</span></span></div></div><p>Finds the URI corresponding to <code>modName</code> in <code>searchSearchPath</code>.
Yields <code>none</code> if the file corresponding to <code>modName</code> has been deleted in the mean-time.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.documentUriFromModule?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.moduleFromDocumentUri"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L208-L216">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#Lean.Server.moduleFromDocumentUri"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">moduleFromDocumentUri</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">uri</span> : <a href="../.././Lean/Data/Lsp/BasicAux.html#Lean.Lsp.DocumentUri">Lsp.DocumentUri</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <a href="../.././Init/Prelude.html#Lean.Name">Name</a></span></div></div><p>Finds the module name corresponding to <code><a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.uri">uri</a></code> in <code>srcSearchPath</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.moduleFromDocumentUri" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="String.Range.toLspRange"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Server/Utils.lean#L220-L225">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/Utils.html#String.Range.toLspRange"><span class="name">String</span>.<span class="name">Range</span>.<span class="name">toLspRange</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">text</span> : <a href="../.././Lean/Data/Position.html#Lean.FileMap">Lean.FileMap</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">r</span> : <a href="../.././Lean/Syntax.html#String.Range">String.Range</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/Lsp/BasicAux.html#Lean.Lsp.Range">Lean.Lsp.Range</a></div></div><p>Converts an UTF-8-based <code>String.range</code> in <code><a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.text">text</a></code> to an equivalent LSP UTF-16-based <code>Lsp.Range</code>
in <code><a href="../.././Lean/Server/Utils.html#Lean.Server.DocumentMeta.text">text</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/Utils.html#String.Range.toLspRange">String.Range.toLspRange</a> <span class="fn">text</span> <span class="fn">r</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Data/Lsp/BasicAux.html#Lean.Lsp.Range.mk">{</a> <span class="fn">start</span> := <span class="fn"><span class="fn"><span class="fn">text</span>.<a href="../.././Lean/Data/Lsp/Utf16.html#Lean.FileMap.utf8PosToLspPos">utf8PosToLspPos</a></span> <span class="fn"><span class="fn">r</span>.<a href="../.././Lean/Syntax.html#String.Range.start">start</a></span></span>, <span class="fn">«end»</span> := <span class="fn"><span class="fn"><span class="fn">text</span>.<a href="../.././Lean/Data/Lsp/Utf16.html#Lean.FileMap.utf8PosToLspPos">utf8PosToLspPos</a></span> <span class="fn"><span class="fn">r</span>.<a href="../.././Lean/Syntax.html#String.Range.stop">stop</a></span></span> <a href="../.././Lean/Data/Lsp/BasicAux.html#Lean.Lsp.Range.mk">}</a></li></ul></details><details id="instances-for-list-String.Range.toLspRange" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>