<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Server.ServerTask</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Server.ServerTask";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init/Task.html">Init.Task</a></li><li><a href="../.././Init/System/IO.html">Init.System.IO</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Server.ServerTask" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instInhabitedServerTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedServerTask</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instInhabitedServerTask.default"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedServerTask</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.instCoeTaskServerTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instCoeTaskServerTask</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.pure"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">pure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.get"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">get</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.wait"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">wait</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.mapCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">mapCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.mapCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">mapCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.bindCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">bindCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.bindCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">bindCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.join"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">join</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.BaseIO.asTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">asTask</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.BaseIO.mapTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">mapTaskCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.BaseIO.mapTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">mapTaskCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.BaseIO.bindTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">bindTaskCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.BaseIO.bindTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">bindTaskCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.EIO.asTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">asTask</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.EIO.mapTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">mapTaskCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.EIO.mapTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">mapTaskCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.EIO.bindTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">bindTaskCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.EIO.bindTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">bindTaskCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.IO.asTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">asTask</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.IO.mapTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">mapTaskCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.IO.mapTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">mapTaskCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.IO.bindTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">bindTaskCheap</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.IO.bindTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">bindTaskCostly</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.hasFinished"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">hasFinished</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.waitAny"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">waitAny</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Server.ServerTask.cancel"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">cancel</span></a></div><div class="nav_link"><a class="break_within" href="#Task.asServerTask"><span class="name">Task</span>.<span class="name">asServerTask</span></a></div></nav><main>
<div class="mod_doc"><p>This file provides a thin <code><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a></code> wrapper over the <code><a href="../.././Init/Core.html#Task">Task</a></code> API.
All calls to the <code><a href="../.././Init/Core.html#Task">Task</a></code> API in the language server should go through this API.</p><p>The reason for this API is that the elaborator consuming threads from the thread pool should
never hinder language server operations. Specifically, we want to ensure the following:</p><ul><li>All new tasks spawned in the language server must be dedicated so that they cannot be starved
by the elaborator.<ul><li>Dedicated tasks are costly, so avoid spawning new tasks for operations that are so cheap that
they can just be done on the current thread instead.</li></ul></li><li>When mapping or binding a task:<ul><li>If the function being mapped is sufficiently cheap that it can run on the current thread,
map it with <code>sync := true</code>. This runs the function on the current thread if the task has already
finished, or it reuses the thread of the task if the task has not finished.
This ensures that the function to be executed cannot be starved by the elaborator.</li><li>If the function being mapped is not cheap / costly, map it with <code>prio := .dedicated</code>.
This spawns a new thread and thus cannot be starved by the elaborator.
Finally, if the function being mapped is costly, but is already being executed in a dedicated task,
it is fine to pretend that it is a cheap function instead.</li></ul></li></ul><p>In request handlers, the distinction of whether an operation is &quot;cheap&quot; or &quot;costly&quot; should be
decided by the following:</p><ul><li>If the operation is sufficiently fast that it could run on the main task of the language server,
blocking all other communication for a brief moment, then it can be considered cheap.</li><li>If the operation is being executed in a dedicated task that isn't the main task of the server,
it can also be considered cheap.</li><li>Otherwise, it is to be considered costly.</li></ul></div><div class="decl" id="Lean.Server.ServerTask"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L45-L47">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a> u</div></div><ul class="structure_fields" id="Lean.Server.ServerTask.mk"><li id="Lean.Server.ServerTask.task" class="structure_field"><div class="structure_field_info">task : <span class="fn"><a href="../.././Init/Core.html#Task">Task</a> <span class="fn">α</span></span></div></li></ul><details id="instances-for-list-Lean.Server.ServerTask" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.instInhabitedServerTask"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L47-L47">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.instInhabitedServerTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedServerTask</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">a✝</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">a✝</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">a✝</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.instInhabitedServerTask">Lean.Server.instInhabitedServerTask</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../.././Lean/Server/ServerTask.html#Lean.Server.instInhabitedServerTask.default">Lean.Server.instInhabitedServerTask.default</a> <a href="../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Server.instInhabitedServerTask.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L47-L47">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.instInhabitedServerTask.default"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instInhabitedServerTask</span>.<span class="name">default</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">a✝</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">a✝</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">a✝</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.instInhabitedServerTask.default">Lean.Server.instInhabitedServerTask.default</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.instInhabitedServerTask.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.instCoeTaskServerTask"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L49-L50">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.instCoeTaskServerTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">instCoeTaskServerTask</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Coe.html#Coe">Coe</a> <span class="fn">(<a href="../.././Init/Core.html#Task">Task</a> <span class="fn">α</span>)</span> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.instCoeTaskServerTask">Lean.Server.instCoeTaskServerTask</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Coe.html#Coe.mk">{</a> <span class="fn">coe</span> := <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">Lean.Server.ServerTask.mk</a> <a href="../.././Init/Coe.html#Coe.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.pure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L54-L54">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.pure"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">pure</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.pure">Lean.Server.ServerTask.pure</a> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <a href="../.././Init/Core.html#Task.pure">{</a> <span class="fn">get</span> := <span class="fn">x</span> <a href="../.././Init/Core.html#Task.pure">}</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.pure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.get"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L56-L56">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.get"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">get</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.get">get</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span>.<a href="../.././Init/Core.html#Task.get">get</a></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.get" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.wait"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L58-L58">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.wait"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">wait</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.wait">wait</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/System/IO.html#IO.wait">IO.wait</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.wait" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.mapCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L60-L61">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mapCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">mapCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a> u_2}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mapCheap">Lean.Server.ServerTask.mapCheap</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn"><a href="../.././Init/Core.html#Task.map">Task.map</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.mapCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.mapCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L63-L64">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mapCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">mapCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a> u_2}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mapCostly">Lean.Server.ServerTask.mapCostly</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn"><a href="../.././Init/Core.html#Task.map">Task.map</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.mapCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.bindCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L66-L67">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.bindCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">bindCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a> u_2}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.bindCheap">bindCheap</a></span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn"><span class="fn"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span>.<a href="../.././Init/Core.html#Task.bind">bind</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <span class="fn"><span class="fn">(<span class="fn">f</span> <span class="fn">x</span>)</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span>)</span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.bindCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.bindCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L69-L70">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.bindCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">bindCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a> u_2}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.bindCostly">bindCostly</a></span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn"><span class="fn"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span>.<a href="../.././Init/Core.html#Task.bind">bind</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <span class="fn"><span class="fn">(<span class="fn">f</span> <span class="fn">x</span>)</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span>)</span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.bindCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.join"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L72-L76">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.join"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">join</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">ts</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.join" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.BaseIO.asTask"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L80-L81">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.asTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">asTask</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">act</span> : <span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.asTask">Lean.Server.ServerTask.BaseIO.asTask</a> <span class="fn">act</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><span class="fn"><span class="fn">act</span>.<a href="../.././Init/System/IO.html#BaseIO.asTask">asTask</a></span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.BaseIO.asTask" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.BaseIO.mapTaskCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L83-L84">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.mapTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">mapTaskCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.mapTaskCheap">Lean.Server.ServerTask.BaseIO.mapTaskCheap</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#BaseIO.mapTask">BaseIO.mapTask</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.BaseIO.mapTaskCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.BaseIO.mapTaskCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L86-L87">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.mapTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">mapTaskCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.mapTaskCostly">Lean.Server.ServerTask.BaseIO.mapTaskCostly</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#BaseIO.mapTask">BaseIO.mapTask</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.BaseIO.mapTaskCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.BaseIO.bindTaskCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L89-L90">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.bindTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">bindTaskCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.bindTaskCheap">Lean.Server.ServerTask.BaseIO.bindTaskCheap</a> <span class="fn">t</span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#BaseIO.bindTask">BaseIO.bindTask</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">Lean.Server.ServerTask.task</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">x</span></span>)</span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.BaseIO.bindTaskCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.BaseIO.bindTaskCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L92-L93">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.bindTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">BaseIO</span>.<span class="name">bindTaskCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">β</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.BaseIO.bindTaskCostly">Lean.Server.ServerTask.BaseIO.bindTaskCostly</a> <span class="fn">t</span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#BaseIO.bindTask">BaseIO.bindTask</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">Lean.Server.ServerTask.task</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">x</span></span>)</span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.BaseIO.bindTaskCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.EIO.asTask"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L99-L100">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.asTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">asTask</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε </span><span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">act</span> : <span class="fn"><a href="../.././Init/System/IO.html#EIO">EIO</a> <span class="fn">ε</span> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">α</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.asTask">Lean.Server.ServerTask.EIO.asTask</a> <span class="fn">act</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><span class="fn"><span class="fn">act</span>.<a href="../.././Init/System/IO.html#EIO.asTask">asTask</a></span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.EIO.asTask" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.EIO.mapTaskCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L102-L103">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.mapTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">mapTaskCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε </span><span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#EIO">EIO</a> <span class="fn">ε</span> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.mapTaskCheap">Lean.Server.ServerTask.EIO.mapTaskCheap</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#EIO.mapTask">EIO.mapTask</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.EIO.mapTaskCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.EIO.mapTaskCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L105-L106">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.mapTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">mapTaskCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε </span><span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#EIO">EIO</a> <span class="fn">ε</span> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.mapTaskCostly">Lean.Server.ServerTask.EIO.mapTaskCostly</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#EIO.mapTask">EIO.mapTask</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.EIO.mapTaskCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.EIO.bindTaskCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L108-L109">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.bindTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">bindTaskCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε </span><span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#EIO">EIO</a> <span class="fn">ε</span> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">β</span>)</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.bindTaskCheap">Lean.Server.ServerTask.EIO.bindTaskCheap</a> <span class="fn">t</span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#EIO.bindTask">EIO.bindTask</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">Lean.Server.ServerTask.task</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">x</span></span>)</span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.EIO.bindTaskCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.EIO.bindTaskCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L111-L112">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.bindTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">EIO</span>.<span class="name">bindTaskCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ε </span><span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#EIO">EIO</a> <span class="fn">ε</span> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">β</span>)</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.EIO.bindTaskCostly">Lean.Server.ServerTask.EIO.bindTaskCostly</a> <span class="fn">t</span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#EIO.bindTask">EIO.bindTask</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">Lean.Server.ServerTask.task</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">x</span></span>)</span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.EIO.bindTaskCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.IO.asTask"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L118-L119">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.asTask"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">asTask</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">act</span> : <span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Init/System/IOError.html#IO.Error">IO.Error</a> <span class="fn">α</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.asTask">Lean.Server.ServerTask.IO.asTask</a> <span class="fn">act</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><span class="fn"><span class="fn">act</span>.<a href="../.././Init/System/IO.html#IO.asTask">asTask</a></span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.IO.asTask" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.IO.mapTaskCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L121-L122">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.mapTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">mapTaskCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Init/System/IOError.html#IO.Error">IO.Error</a> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.mapTaskCheap">Lean.Server.ServerTask.IO.mapTaskCheap</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#IO.mapTask">IO.mapTask</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.IO.mapTaskCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.IO.mapTaskCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L124-L125">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.mapTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">mapTaskCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Init/System/IOError.html#IO.Error">IO.Error</a> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.mapTaskCostly">Lean.Server.ServerTask.IO.mapTaskCostly</a> <span class="fn">f</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#IO.mapTask">IO.mapTask</a> <span class="fn">f</span> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.IO.mapTaskCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.IO.bindTaskCheap"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L127-L128">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.bindTaskCheap"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">bindTaskCheap</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Init/System/IOError.html#IO.Error">IO.Error</a> <span class="fn">β</span>)</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Init/System/IOError.html#IO.Error">IO.Error</a> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.bindTaskCheap">Lean.Server.ServerTask.IO.bindTaskCheap</a> <span class="fn">t</span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#IO.bindTask">IO.bindTask</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">Lean.Server.ServerTask.task</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">x</span></span>)</span> <a href="../.././Init/Core.html#Task.Priority.default">Task.Priority.default</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.IO.bindTaskCheap" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.IO.bindTaskCostly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L130-L131">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.bindTaskCostly"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">IO</span>.<span class="name">bindTaskCostly</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Init/System/IOError.html#IO.Error">IO.Error</a> <span class="fn">β</span>)</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">(<a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Init/System/IOError.html#IO.Error">IO.Error</a> <span class="fn">β</span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.IO.bindTaskCostly">Lean.Server.ServerTask.IO.bindTaskCostly</a> <span class="fn">t</span> <span class="fn">f</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn"><a href="../.././Init/System/IO.html#IO.bindTask">IO.bindTask</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">Lean.Server.ServerTask.task</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">x</span></span>)</span> <a href="../.././Init/Core.html#Task.Priority.dedicated">Task.Priority.dedicated</a></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">a</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.IO.bindTaskCostly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.hasFinished"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L135-L136">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.hasFinished"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">hasFinished</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.hasFinished">hasFinished</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/System/IO.html#IO.hasFinished">IO.hasFinished</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.hasFinished" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.waitAny"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L138-L142">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.waitAny"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">waitAny</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">tasks</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h</span> : <span class="fn"><span class="fn">tasks</span>.<a href="../.././Init/Prelude.html#List.length">length</a></span> <a href="../.././Init/Prelude.html#GT.gt">&gt;</a> <span class="fn">0</span> := by exact Nat.zero_lt_succ _)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.waitAny">Lean.Server.ServerTask.waitAny</a> <span class="fn">tasks</span> <span class="fn">h</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/System/IO.html#IO.waitAny">IO.waitAny</a> <span class="fn">(<a href="../.././Init/Prelude.html#List.map">List.map</a> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">Lean.Server.ServerTask</a> <span class="fn">α</span></span>) =&gt; <span class="fn"><span class="fn">x</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span>)</span> <span class="fn">tasks</span>)</span> <span class="fn">⋯</span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.waitAny" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Server.ServerTask.cancel"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L144-L145">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.cancel"><span class="name">Lean</span>.<span class="name">Server</span>.<span class="name">ServerTask</span>.<span class="name">cancel</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">ServerTask</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.cancel">cancel</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/System/IO.html#IO.cancel">IO.cancel</a> <span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.task">task</a></span></span></li></ul></details><details id="instances-for-list-Lean.Server.ServerTask.cancel" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Task.asServerTask"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Server/ServerTask.lean#L149-L149">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Server/ServerTask.html#Task.asServerTask"><span class="name">Task</span>.<span class="name">asServerTask</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href="../.././Init/Core.html#Task">Task</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask">Lean.Server.ServerTask</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">t</span>.<a href="../.././Lean/Server/ServerTask.html#Task.asServerTask">asServerTask</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">{</a> <span class="fn">task</span> := <span class="fn">t</span> <a href="../.././Lean/Server/ServerTask.html#Lean.Server.ServerTask.mk">}</a></li></ul></details><details id="instances-for-list-Task.asServerTask" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>