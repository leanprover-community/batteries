<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.PrettyPrinter.Delaborator.Basic</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Lean.PrettyPrinter.Delaborator.Basic";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">Basic</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Lean/ExtraModUses.html">Lean.ExtraModUses</a></li><li><a href="../../.././Lean/KeyedDeclsAttribute.html">Lean.KeyedDeclsAttribute</a></li><li><a href="../../.././Init/Data/ToString/Name.html">Init.Data.ToString.Name</a></li><li><a href="../../.././Lean/Elab/InfoTree/Main.html">Lean.Elab.InfoTree.Main</a></li><li><a href="../../.././Lean/PrettyPrinter/Delaborator/TopDownAnalyze.html">Lean.PrettyPrinter.Delaborator.TopDownAnalyze</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.PrettyPrinter.Delaborator.Basic" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.Context"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">Context</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.State"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.delabFailureId"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delabFailureId</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.DelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">DelabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.Delab"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">Delab</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.instInhabitedDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instInhabitedDelabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.orElse"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">orElse</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.failure"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">failure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.instAlternativeDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instAlternativeDelabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.instOrElseDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instOrElseDelabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.instMonadReaderOfSubExprDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instMonadReaderOfSubExprDelabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.instMonadWithReaderOfSubExprDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instMonadWithReaderOfSubExprDelabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.instMonadStateOfHoleIteratorDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instMonadStateOfHoleIteratorDelabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.delabAttribute"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delabAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.attrApp_delab_"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">attrApp_delab_</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.getExprKind"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getExprKind</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.getOptionsAtCurrPos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getOptionsAtCurrPos</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.getPPOption"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getPPOption</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.whenPPOption"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">whenPPOption</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.whenNotPPOption"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">whenNotPPOption</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.withOptionAtCurrPos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withOptionAtCurrPos</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.annotatePos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotatePos</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.annotateCurPos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotateCurPos</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.addTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addTermInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.addFieldInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addFieldInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.addDelabTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addDelabTermInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.annotateTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotateTermInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.annotateTermInfoUnlessAnnotated"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotateTermInfoUnlessAnnotated</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.withAnnotateTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withAnnotateTermInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.withAnnotateTermInfoUnlessAnnotated"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withAnnotateTermInfoUnlessAnnotated</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.getUnusedName"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getUnusedName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.mkAnnotatedIdent"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">mkAnnotatedIdent</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.withBindingBodyUnusedName"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withBindingBodyUnusedName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.OmissionReason"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">OmissionReason</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.OmissionReason.toString"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">OmissionReason</span>.<span class="name">toString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.addOmissionInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addOmissionInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.withIncDepth"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withIncDepth</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.isShallowExpression"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">isShallowExpression</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.shouldOmitExpr"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">shouldOmitExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.shouldOmitProof"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">shouldOmitProof</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.omission"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">omission</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.delabFor"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delabFor</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.delab"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delab</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.Delaborator.appUnexpanderAttribute"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">appUnexpanderAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.delabCore"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">delabCore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.PrettyPrinter.delab"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">delab</span></a></div></nav><main>
<div class="mod_doc"><p>The delaborator is the first stage of the pretty printer, and the inverse of the
elaborator: it turns fully elaborated <code>Expr</code> core terms back into surface-level
<code>Syntax</code>, omitting some implicit information again and using higher-level syntax
abstractions like notations where possible. The exact behavior can be customized
using pretty printer options; activating <code>pp.all</code> should guarantee that the
delaborator is injective and that re-elaborating the resulting <code>Syntax</code>
round-trips.</p><p>Pretty printer options can be given not only for the whole term, but also
specific subterms. This is used both when automatically refining pp options
until round-trip and when interactively selecting pp options for a subterm (both
TBD). The association of options to subterms is done by assigning a unique,
synthetic Nat position to each subterm derived from its position in the full
term. This position is added to the corresponding Syntax object so that
elaboration errors and interactions with the pretty printer output can be traced
back to the subterm.</p><p>The delaborator is extensible via the <code>[delab]</code> attribute.</p></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.Context"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L43-L50">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Context"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">Context</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.PrettyPrinter.Delaborator.Context.mk"><li id="Lean.PrettyPrinter.Delaborator.Context.optionsPerPos" class="structure_field"><div class="structure_field_info">optionsPerPos : <a href="../../.././Lean/PrettyPrinter/Delaborator/SubExpr.html#Lean.PrettyPrinter.Delaborator.OptionsPerPos">OptionsPerPos</a></div></li><li id="Lean.PrettyPrinter.Delaborator.Context.currNamespace" class="structure_field"><div class="structure_field_info">currNamespace : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></div></li><li id="Lean.PrettyPrinter.Delaborator.Context.openDecls" class="structure_field"><div class="structure_field_info">openDecls : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Data/OpenDecl.html#Lean.OpenDecl">OpenDecl</a></span></div></li><li id="Lean.PrettyPrinter.Delaborator.Context.inPattern" class="structure_field"><div class="structure_field_info">inPattern : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="Lean.PrettyPrinter.Delaborator.Context.subExpr" class="structure_field"><div class="structure_field_info">subExpr : <a href="../../.././Lean/SubExpr.html#Lean.SubExpr">SubExpr</a></div></li><li id="Lean.PrettyPrinter.Delaborator.Context.depth" class="structure_field"><div class="structure_field_info">depth : <a href="../../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>Current recursion depth during delaboration. Used by the <code>pp.deepTerms false</code> option.</p></div></li></ul><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.Context" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L52-L60">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.State"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.PrettyPrinter.Delaborator.State.mk"><li id="Lean.PrettyPrinter.Delaborator.State.steps" class="structure_field"><div class="structure_field_info">steps : <a href="../../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>The number of <code><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delab">delab</a></code> steps so far. Used by <code>pp.<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.maxSteps">maxSteps</a></code> to stop delaboration.</p></div></li><li id="Lean.PrettyPrinter.Delaborator.State.infos" class="structure_field"><div class="structure_field_info">infos : <span class="fn"><a href="../../.././Lean/SubExpr.html#Lean.SubExpr.PosMap">SubExpr.PosMap</a> <a href="../../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.Info">Elab.Info</a></span></div><div class="structure_field_doc"><p>We attach <code>Elab.Info</code> at various locations in the <code>Syntax</code> output in order to convey
its semantics. While the elaborator emits <code>InfoTree</code>s, here we have no real text location tree
to traverse, so we use a flattened map.</p></div></li><li id="Lean.PrettyPrinter.Delaborator.State.holeIter" class="structure_field"><div class="structure_field_info">holeIter : <a href="../../.././Lean/PrettyPrinter/Delaborator/SubExpr.html#Lean.PrettyPrinter.Delaborator.SubExpr.HoleIterator">SubExpr.HoleIterator</a></div><div class="structure_field_doc"><p>See <code>SubExpr.nextExtraPos</code>.</p></div></li></ul><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.delabFailureId"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L64-L64">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delabFailureId"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delabFailureId</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/InternalExceptionId.html#Lean.InternalExceptionId">InternalExceptionId</a></div></div></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.DelabM"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L66-L66">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">DelabM</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Context">Lean.PrettyPrinter.Delaborator.Context</a>
    <span class="fn">(<a href="../../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.State">Lean.PrettyPrinter.Delaborator.State</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a>)</span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.DelabM" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.Delab"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L67-L67">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">Delab</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Lean.PrettyPrinter.Delaborator.Delab</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Term">Lean.Term</a></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.Delab" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.instInhabitedDelabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L69-L70">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instInhabitedDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instInhabitedDelabM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instInhabitedDelabM">Lean.PrettyPrinter.Delaborator.instInhabitedDelabM</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <span class="fn"><a href="../../.././Init/Prelude.html#MonadExcept.throw">throw</a> <a href="../../.././Init/Prelude.html#Inhabited.default">default</a></span> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.orElse"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L72-L73">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.orElse"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">orElse</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">d₁</span> : <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">d₂</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.orElse">Lean.PrettyPrinter.Delaborator.orElse</a> <span class="fn">d₁</span> <span class="fn">d₂</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Lean/CoreM.html#Lean.catchInternalId">Lean.catchInternalId</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delabFailureId">Lean.PrettyPrinter.Delaborator.delabFailureId</a> <span class="fn">d₁</span> <span class="fn">fun (<span class="fn">x</span> : <a href="../../.././Lean/Exception.html#Lean.Exception">Lean.Exception</a>) =&gt; <span class="fn"><span class="fn">d₂</span> <a href="../../.././Init/Prelude.html#Unit.unit">(</a><a href="../../.././Init/Prelude.html#Unit.unit">)</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.orElse" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.failure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L75-L76">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.failure"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">failure</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.failure">Lean.PrettyPrinter.Delaborator.failure</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#MonadExcept.throw">throw</a> <span class="fn">(<a href="../../.././Lean/Exception.html#Lean.Exception.internal">Lean.Exception.internal</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delabFailureId">Lean.PrettyPrinter.Delaborator.delabFailureId</a>)</span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.failure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.instAlternativeDelabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L78-L80">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instAlternativeDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instAlternativeDelabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/Basic.html#Alternative">Alternative</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.instOrElseDelabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L83-L83">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instOrElseDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instOrElseDelabM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#OrElse">OrElse</a> <span class="fn">(<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instOrElseDelabM">Lean.PrettyPrinter.Delaborator.instOrElseDelabM</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#OrElse.mk">{</a> <span class="fn">orElse</span> := <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.orElse">Lean.PrettyPrinter.Delaborator.orElse</a> <a href="../../.././Init/Prelude.html#OrElse.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.instMonadReaderOfSubExprDelabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L86-L87">source</a></div><div class="attributes">@[instance_reducible, instance 100]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instMonadReaderOfSubExprDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instMonadReaderOfSubExprDelabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#MonadReaderOf">MonadReaderOf</a> <a href="../../.././Lean/SubExpr.html#Lean.SubExpr">SubExpr</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instMonadReaderOfSubExprDelabM">Lean.PrettyPrinter.Delaborator.instMonadReaderOfSubExprDelabM</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <a href="../../.././Init/Prelude.html#MonadReaderOf.mk">{</a> <span class="fn">read</span> := <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Context.subExpr">Lean.PrettyPrinter.Delaborator.Context.subExpr</a> <a href="../../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <a href="../../.././Init/Prelude.html#MonadReader.read">read</a> <a href="../../.././Init/Prelude.html#MonadReaderOf.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.instMonadWithReaderOfSubExprDelabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L89-L90">source</a></div><div class="attributes">@[instance_reducible, instance 100]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instMonadWithReaderOfSubExprDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instMonadWithReaderOfSubExprDelabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../../.././Lean/SubExpr.html#Lean.SubExpr">SubExpr</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.instMonadStateOfHoleIteratorDelabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L92-L97">source</a></div><div class="attributes">@[instance_reducible, instance 100]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.instMonadStateOfHoleIteratorDelabM"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">instMonadStateOfHoleIteratorDelabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#MonadStateOf">MonadStateOf</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/SubExpr.html#Lean.PrettyPrinter.Delaborator.SubExpr.HoleIterator">SubExpr.HoleIterator</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.delabAttribute"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L99-L124">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delabAttribute"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delabAttribute</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">KeyedDeclsAttribute</a> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></span></div></div><p>Registers a delaborator.</p><p><code>@[delab k]</code> registers a declaration of type <code><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Lean.PrettyPrinter.Delaborator.Delab</a></code> for the
<code><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></code> constructor <code>k</code>. Multiple delaborators for a single constructor are tried in turn until
the first success. If the term to be delaborated is an application of a constant <code>c</code>, elaborators
for <code>app.c</code> are tried first; this is also done for <code>Expr.const</code>s (&quot;nullary applications&quot;) to reduce
special casing. If the term is an <code>Expr.mdata</code> with a single key <code>k</code>, <code>mdata.k</code> is tried first.</p></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.attrApp_delab_"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L135-L139">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.attrApp_delab_"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">attrApp_delab_</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">ParserDescr</a></div></div><p><code>@[app_delab c]</code> registers a delaborator for applications with head constant <code>c</code>.
Such delaborators also apply to the constant <code>c</code> itself (known as a &quot;nullary application&quot;).</p><p>This attribute should be applied to definitions of type <code><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Lean.PrettyPrinter.Delaborator.Delab</a></code>.</p><p>When defining delaborators for constant applications, one should prefer this attribute over <code>@[delab app.c]</code>,
as <code>@[app_delab c]</code> first performs name resolution on <code>c</code> in the current scope.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.attrApp_delab_" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.getExprKind"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L141-L161">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getExprKind"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getExprKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.getExprKind" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.getOptionsAtCurrPos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L163-L169">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getOptionsAtCurrPos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getOptionsAtCurrPos</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Lean/Data/Options.html#Lean.Options">Options</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.getOptionsAtCurrPos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.getPPOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L171-L173">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getPPOption"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getPPOption</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">opt</span> : <span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Options">Options</a> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></div></div><p>Evaluate option accessor, using subterm-specific options if set.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getPPOption">Lean.PrettyPrinter.Delaborator.getPPOption</a> <span class="fn">opt</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getOptionsAtCurrPos">Lean.PrettyPrinter.Delaborator.getOptionsAtCurrPos</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn">opt</span> <span class="fn">__do_lift</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.getPPOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.whenPPOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L175-L177">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.whenPPOption"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">whenPPOption</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">opt</span> : <span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Options">Options</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">d</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.whenPPOption">Lean.PrettyPrinter.Delaborator.whenPPOption</a> <span class="fn">opt</span> <span class="fn">d</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">b</span> ← <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getPPOption">Lean.PrettyPrinter.Delaborator.getPPOption</a> <span class="fn">opt</span></span>
  <a href="../../.././Init/Prelude.html#ite">if</a> <span class="fn">b</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#ite">then</a> <span class="fn">d</span> <a href="../../.././Init/Prelude.html#ite">else</a> <a href="../../.././Init/Control/Basic.html#Alternative.failure">failure</a></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.whenPPOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.whenNotPPOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L179-L181">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.whenNotPPOption"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">whenNotPPOption</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">opt</span> : <span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Options">Options</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">d</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.whenNotPPOption">Lean.PrettyPrinter.Delaborator.whenNotPPOption</a> <span class="fn">opt</span> <span class="fn">d</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">b</span> ← <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getPPOption">Lean.PrettyPrinter.Delaborator.getPPOption</a> <span class="fn">opt</span></span>
  <a href="../../.././Init/Prelude.html#ite">if</a> <span class="fn">b</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#ite">then</a> <a href="../../.././Init/Control/Basic.html#Alternative.failure">failure</a> <a href="../../.././Init/Prelude.html#ite">else</a> <span class="fn">d</span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.whenNotPPOption" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.withOptionAtCurrPos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L183-L190">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.withOptionAtCurrPos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withOptionAtCurrPos</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <a href="../../.././Lean/Data/KVMap.html#Lean.DataValue">DataValue</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></div></div><p>Set the given option at the current position and execute <code>x</code> in this context.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.withOptionAtCurrPos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.annotatePos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L192-L193">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotatePos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotatePos</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">pos</span> : <a href="../../.././Lean/SubExpr.html#Lean.SubExpr.Pos">SubExpr.Pos</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Term">Term</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Term">Term</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotatePos">Lean.PrettyPrinter.Delaborator.annotatePos</a> <span class="fn">pos</span> <span class="fn">stx</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <a href="../../.././Init/Prelude.html#Lean.TSyntax.mk">{</a> <span class="fn">raw</span> := <span class="fn"><a href="../../.././Init/Meta/Defs.html#Lean.Syntax.setInfo">Lean.Syntax.setInfo</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Lean.SourceInfo.synthetic">Lean.SourceInfo.synthetic</a> <a href="../../.././Init/Prelude.html#String.Pos.Raw.mk">{</a> <span class="fn">byteIdx</span> := <span class="fn">pos</span> <a href="../../.././Init/Prelude.html#String.Pos.Raw.mk">}</a> <a href="../../.././Init/Prelude.html#String.Pos.Raw.mk">{</a> <span class="fn">byteIdx</span> := <span class="fn">pos</span> <a href="../../.././Init/Prelude.html#String.Pos.Raw.mk">}</a>)</span> <span class="fn"><span class="fn">stx</span>.<a href="../../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span></span> <a href="../../.././Init/Prelude.html#Lean.TSyntax.mk">}</a></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.annotatePos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.annotateCurPos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L195-L196">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateCurPos"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotateCurPos</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Term">Term</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateCurPos">Lean.PrettyPrinter.Delaborator.annotateCurPos</a> <span class="fn">stx</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Lean/PrettyPrinter/Delaborator/SubExpr.html#Lean.PrettyPrinter.Delaborator.SubExpr.getPos">Lean.PrettyPrinter.Delaborator.SubExpr.getPos</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotatePos">Lean.PrettyPrinter.Delaborator.annotatePos</a> <span class="fn">__do_lift</span> <span class="fn">stx</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.annotateCurPos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.addTermInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L198-L209">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.addTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addTermInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">pos</span> : <a href="../../.././Lean/SubExpr.html#Lean.SubExpr.Pos">SubExpr.Pos</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">isBinder</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.addTermInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.addFieldInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L211-L221">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.addFieldInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addFieldInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">pos</span> : <a href="../../.././Lean/SubExpr.html#Lean.SubExpr.Pos">SubExpr.Pos</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">projName </span><span class="fn">fieldName</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">val</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.addFieldInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.addDelabTermInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L223-L231">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.addDelabTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addDelabTermInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">pos</span> : <a href="../../.././Lean/SubExpr.html#Lean.SubExpr.Pos">SubExpr.Pos</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">isBinder</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">location?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Data/DeclarationRange.html#Lean.DeclarationLocation">DeclarationLocation</a></span> := <a href="../../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docString?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#String">String</a></span> := <a href="../../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">explicit</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.addDelabTermInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.annotateTermInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L233-L240">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotateTermInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Term">Term</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><p>Annotates the term with the current expression position and registers <code>TermInfo</code>
to associate the term to the current expression.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.annotateTermInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.annotateTermInfoUnlessAnnotated"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L242-L251">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateTermInfoUnlessAnnotated"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">annotateTermInfoUnlessAnnotated</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Term">Term</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><p>Annotates the term with the current expression position and registers <code>TermInfo</code>
to associate the term to the current expression, unless the syntax has a synthetic position
and associated <code>Info</code> already.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.annotateTermInfoUnlessAnnotated" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.withAnnotateTermInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L253-L258">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.withAnnotateTermInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withAnnotateTermInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">d</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><p>Modifies the delaborator so that it annotates the resulting term using <code><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateTermInfo">annotateTermInfo</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.withAnnotateTermInfo">Lean.PrettyPrinter.Delaborator.withAnnotateTermInfo</a> <span class="fn">d</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">stx</span> ← <span class="fn">d</span>
  <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateTermInfo">Lean.PrettyPrinter.Delaborator.annotateTermInfo</a> <span class="fn">stx</span></span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.withAnnotateTermInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.withAnnotateTermInfoUnlessAnnotated"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L260-L265">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.withAnnotateTermInfoUnlessAnnotated"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withAnnotateTermInfoUnlessAnnotated</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">d</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><p>Modifies the delaborator so that it ensures resulting term is annotated using <code><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateTermInfoUnlessAnnotated">annotateTermInfoUnlessAnnotated</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.withAnnotateTermInfoUnlessAnnotated">Lean.PrettyPrinter.Delaborator.withAnnotateTermInfoUnlessAnnotated</a> <span class="fn">d</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">stx</span> ← <span class="fn">d</span>
  <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.annotateTermInfoUnlessAnnotated">Lean.PrettyPrinter.Delaborator.annotateTermInfoUnlessAnnotated</a> <span class="fn">stx</span></span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.withAnnotateTermInfoUnlessAnnotated" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.getUnusedName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L267-L300">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.getUnusedName"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">getUnusedName</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">suggestion</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">body</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">preserveName</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">avoid</span> : <a href="../../.././Lean/Data/NameMap/Basic.html#Lean.NameSet">NameSet</a> := <a href="../../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></div></div><p>Gets an name based on <code>suggestion</code> that is unused in the local context.
Erases macro scopes.
If <code>pp.safeShadowing</code> is true, then the name is allowed to shadow a name in the local context
if the name does not appear in <code>body</code> or in the <code>avoid</code> set.
(The <code>avoid</code> set is assumed to be a subset of the names used by the local context.)</p><p>If <code>preserveName</code> is false, then returns the name, possibly with fresh macro scopes added.
If <code>suggestion</code> has macro scopes then the result does as well.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.getUnusedName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.mkAnnotatedIdent"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L302-L309">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.mkAnnotatedIdent"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">mkAnnotatedIdent</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Ident">Ident</a></span></div></div><p>Creates an identifier that is annotated with the term <code>e</code>, using a fresh position using the <code>HoleIterator</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.mkAnnotatedIdent" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.withBindingBodyUnusedName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L311-L325">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.withBindingBodyUnusedName"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withBindingBodyUnusedName</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">d</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a> → <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">preserveName</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">avoid</span> : <a href="../../.././Lean/Data/NameMap/Basic.html#Lean.NameSet">NameSet</a> := <a href="../../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></div></div><p>Enters the body of the current expression, which must be a lambda or forall.
The binding variable is passed to <code>d</code> as <code>Syntax</code>, and it is an identifier that has been annotated with the fvar expression
for the variable.</p><p>If <code>pp.safeShadowing</code> is true, then the name is allowed to shadow a name in the local context
if the name does not appear in the body or in the <code>avoid</code> set.
(The <code>avoid</code> set is assumed to be a subset of the names used by the local context.)</p><p>If <code>preserveName</code> is <code>false</code> (the default), gives the binder an unused name.
Otherwise, it tries to preserve the textual form of the name, preserving whether it is hygienic.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.withBindingBodyUnusedName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.OmissionReason"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L327-L331">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">OmissionReason</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="constructors"><li class="constructor" id="Lean.PrettyPrinter.Delaborator.OmissionReason.deep">deep : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason">OmissionReason</a></li><li class="constructor" id="Lean.PrettyPrinter.Delaborator.OmissionReason.proof">proof : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason">OmissionReason</a></li><li class="constructor" id="Lean.PrettyPrinter.Delaborator.OmissionReason.maxSteps">maxSteps : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason">OmissionReason</a></li><li class="constructor" id="Lean.PrettyPrinter.Delaborator.OmissionReason.string">string<span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <a href="../../.././Init/Prelude.html#String">String</a>)</span></span>
 : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason">OmissionReason</a></li></ul><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.OmissionReason" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.OmissionReason.toString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L333-L337">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.toString"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">OmissionReason</span>.<span class="name">toString</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason">OmissionReason</a> → <a href="../../.././Init/Prelude.html#String">String</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.deep">Lean.PrettyPrinter.Delaborator.OmissionReason.deep</a>.<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.toString">toString</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">&quot;Term omitted due to its depth (see option `pp.deepTerms`).&quot;</span></li><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.proof">Lean.PrettyPrinter.Delaborator.OmissionReason.proof</a>.<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.toString">toString</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">&quot;Proof omitted (see option `pp.proofs`).&quot;</span></li><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.maxSteps">Lean.PrettyPrinter.Delaborator.OmissionReason.maxSteps</a>.<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.toString">toString</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">&quot;Term omitted due to reaching the maximum number of steps allowed for pretty printing this expression (see option `pp.maxSteps`).&quot;</span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.string">Lean.PrettyPrinter.Delaborator.OmissionReason.string</a> <span class="fn">s</span>)</span>.<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.toString">toString</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">s</span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.OmissionReason.toString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.addOmissionInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L339-L340">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.addOmissionInfo"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">addOmissionInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">pos</span> : <a href="../../.././Lean/SubExpr.html#Lean.SubExpr.Pos">SubExpr.Pos</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">reason</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason">OmissionReason</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.addOmissionInfo">Lean.PrettyPrinter.Delaborator.addOmissionInfo</a> <span class="fn">pos</span> <span class="fn">stx</span> <span class="fn">e</span> <span class="fn">reason</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.addDelabTermInfo">Lean.PrettyPrinter.Delaborator.addDelabTermInfo</a> <span class="fn">pos</span> <span class="fn">stx</span> <span class="fn">e</span> <a href="../../.././Init/Prelude.html#Bool.false">false</a> <a href="../../.././Init/Prelude.html#Option.none">none</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option.some">some</a> <span class="fn"><span class="fn">reason</span>.<a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason.toString">toString</a></span>)</span> <a href="../../.././Init/Prelude.html#Bool.false">false</a></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.addOmissionInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.withIncDepth"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L342-L348">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.withIncDepth"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">withIncDepth</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">act</span> : <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <span class="fn">α</span></span></div></div><p>Runs the delaborator <code>act</code> with increased depth.
The depth is used when <code>pp.deepTerms</code> is <code>false</code> to determine what is a deep term.
See also <code><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Context.depth">Lean.PrettyPrinter.Delaborator.Context.depth</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.withIncDepth" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.isShallowExpression"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L350-L361">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.isShallowExpression"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">isShallowExpression</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">threshold</span> : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Returns true if <code>e</code> is a &quot;shallow&quot; expression.
Local variables, constants, and other atomic expressions are always shallow.
In general, an expression is considered to be shallow if its depth is at most <code>threshold</code>.</p><p>Since the implementation uses <code><a href="../../.././Lean/Expr.html#Lean.Expr.approxDepth">Lean.Expr.approxDepth</a></code>, the <code>threshold</code> is clamped to <code>[0, 254]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.isShallowExpression">Lean.PrettyPrinter.Delaborator.isShallowExpression</a> <span class="fn">threshold</span> <span class="fn">e</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#Decidable.decide">decide</a> (<span class="fn"><span class="fn"><span class="fn">e</span>.<a href="../../.././Lean/Expr.html#Lean.Expr.approxDepth">approxDepth</a></span>.<a href="../../.././Init/Prelude.html#UInt32.toNat">toNat</a></span> <a href="../../.././Init/Prelude.html#LE.le">≤</a> <span class="fn"><a href="../../.././Init/Prelude.html#Min.min">min</a> <span class="fn">254</span> <span class="fn">threshold</span></span>)</span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.isShallowExpression" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.shouldOmitExpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L363-L385">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.shouldOmitExpr"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">shouldOmitExpr</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Returns <code>true</code> if, at the current depth, we should omit the term and use <code>⋯</code> rather than
delaborating it. This function can only return <code>true</code> if <code>pp.deepTerms</code> is set to <code>false</code>.
It also contains a heuristic to allow &quot;shallow terms&quot; to be delaborated, even if they appear deep in
an expression, which prevents terms such as atomic expressions or <code><a href="../../.././Init/Prelude.html#OfNat.ofNat">OfNat.ofNat</a></code> literals from being
delaborated as <code>⋯</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.shouldOmitExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.shouldOmitProof"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L387-L406">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.shouldOmitProof"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">shouldOmitProof</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">DelabM</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Returns <code>true</code> if the given expression is a proof and should be omitted.
This function only returns <code>true</code> if <code>pp.proofs</code> is set to <code>false</code>.</p><p>&quot;Shallow&quot; proofs are not omitted.
The <code>pp.proofs.threshold</code> option controls the depth threshold for what constitutes a shallow proof.
See <code><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.isShallowExpression">Lean.PrettyPrinter.Delaborator.isShallowExpression</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.shouldOmitProof" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.omission"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L408-L416">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.omission"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">omission</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">reason</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.OmissionReason">OmissionReason</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div><p>Delaborates the current expression as <code>⋯</code> and attaches <code>Elab.OmissionInfo</code>, which influences how the
subterm omitted by <code>⋯</code> is delaborated when hovered over.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.Delaborator.omission" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.delabFor"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L418-L423">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delabFor"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delabFor</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Name</a> → <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></span></div></div></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.delab"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L425-L451">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delab"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">delab</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.Delab">Delab</a></div></div></div></div><div class="decl" id="Lean.PrettyPrinter.Delaborator.appUnexpanderAttribute"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L453-L475">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.appUnexpanderAttribute"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">Delaborator</span>.<span class="name">appUnexpanderAttribute</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">KeyedDeclsAttribute</a> <a href="../../.././Init/Prelude.html#Lean.PrettyPrinter.Unexpander">Unexpander</a></span></div></div><p>Registers an unexpander for applications of a given constant.</p><p><code>@[app_unexpander c]</code> registers a <code><a href="../../.././Init/Prelude.html#Lean.PrettyPrinter.Unexpander">Lean.PrettyPrinter.Unexpander</a></code> for applications of the constant
<code>c</code>. The unexpander is passed the result of pre-pretty printing the application <em>without</em>
implicitly passed arguments. If <code>pp.explicit</code> is set to true or <code>pp.notation</code> is set to false,
it will not be called at all.</p><p>Unexpanders work as an alternative for delaborators (<code>@[app_delab]</code>) that can be used without
special imports. This however also makes them much less capable since they can only transform
syntax and don't have access to the expression tree.</p></div></div><div class="decl" id="Lean.PrettyPrinter.delabCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L482-L512">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.delabCore"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">delabCore</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">optionsPerPos</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/SubExpr.html#Lean.PrettyPrinter.Delaborator.OptionsPerPos">Delaborator.OptionsPerPos</a> := <a href="../../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">delab</span> : <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Delaborator.DelabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/SubExpr.html#Lean.SubExpr.PosMap">SubExpr.PosMap</a> <a href="../../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.Info">Elab.Info</a></span>)</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.delabCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.PrettyPrinter.delab"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/PrettyPrinter/Delaborator/Basic.lean#L514-L517">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.delab"><span class="name">Lean</span>.<span class="name">PrettyPrinter</span>.<span class="name">delab</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">optionsPerPos</span> : <a href="../../.././Lean/PrettyPrinter/Delaborator/SubExpr.html#Lean.PrettyPrinter.Delaborator.OptionsPerPos">Delaborator.OptionsPerPos</a> := <a href="../../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Init/Meta/Defs.html#Lean.Syntax.Term">Term</a></span></div></div><p>&quot;Delaborate&quot; the given term into surface-level syntax using the default and given subterm-specific options.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.delab">Lean.PrettyPrinter.delab</a> <span class="fn">e</span> <span class="fn">optionsPerPos</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__discr</span> ← <span class="fn"><a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.delabCore">Lean.PrettyPrinter.delabCore</a> <span class="fn">e</span> <span class="fn">optionsPerPos</span> <a href="../../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.delab">Lean.PrettyPrinter.Delaborator.delab</a></span>
  <span class="fn">match <span class="fn">__discr</span> with
    | <a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">stx</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">snd</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">stx</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.PrettyPrinter.delab" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>