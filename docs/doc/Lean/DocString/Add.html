<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.DocString.Add</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.DocString.Add";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">DocString</span>.<span class="name">Add</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Lean/DocString/Parser.html">Lean.DocString.Parser</a></li><li><a href="../.././Lean/Elab/DocString.html">Lean.Elab.DocString</a></li><li><a href="../.././Lean/Elab/Term/TermElabM.html">Lean.Elab.Term.TermElabM</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.DocString.Add" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.validateDocComment"><span class="name">Lean</span>.<span class="name">validateDocComment</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.parseVersoDocString"><span class="name">Lean</span>.<span class="name">parseVersoDocString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.reportVersoParseFailure"><span class="name">Lean</span>.<span class="name">reportVersoParseFailure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.versoDocString"><span class="name">Lean</span>.<span class="name">versoDocString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.versoModDocString"><span class="name">Lean</span>.<span class="name">versoModDocString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.versoDocStringFromString"><span class="name">Lean</span>.<span class="name">versoDocStringFromString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addMarkdownDocString"><span class="name">Lean</span>.<span class="name">addMarkdownDocString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addVersoDocStringCore"><span class="name">Lean</span>.<span class="name">addVersoDocStringCore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addVersoModDocStringCore"><span class="name">Lean</span>.<span class="name">addVersoModDocStringCore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addVersoDocString"><span class="name">Lean</span>.<span class="name">addVersoDocString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addVersoDocStringFromString"><span class="name">Lean</span>.<span class="name">addVersoDocStringFromString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addDocStringOf"><span class="name">Lean</span>.<span class="name">addDocStringOf</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.makeDocStringVerso"><span class="name">Lean</span>.<span class="name">makeDocStringVerso</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addDocString"><span class="name">Lean</span>.<span class="name">addDocString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addDocString'"><span class="name">Lean</span>.<span class="name">addDocString'</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.addVersoModDocString"><span class="name">Lean</span>.<span class="name">addVersoModDocString</span></a></div></nav><main>
<div class="decl" id="Lean.validateDocComment"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L22-L43">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.validateDocComment"><span class="name">Lean</span>.<span class="name">validateDocComment</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Log.html#Lean.MonadLog">MonadLog</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Message.html#Lean.AddMessageContext">AddMessageContext</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">docstring</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Command.docComment</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Validates all links to the Lean reference manual in <code>docstring</code>.</p><p>This is intended to be used before saving a docstring that is later subject to rewriting with
<code>rewriteManualLinks</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.validateDocComment" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.parseVersoDocString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L46-L111">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.parseVersoDocString"><span class="name">Lean</span>.<span class="name">parseVersoDocString</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Position.html#Lean.MonadFileMap">MonadFileMap</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Exception.html#Lean.MonadError">MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Environment.html#Lean.MonadEnv">MonadEnv</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Log.html#Lean.MonadLog">MonadLog</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/ResolveName.html#Lean.MonadResolveName">MonadResolveName</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <span class="fn"><a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <a href="../.././Init/Prelude.html#List.cons">[</a><span class="fn">`Lean.Parser.Command.docComment</span><a href="../.././Init/Prelude.html#List.cons">,</a> <span class="fn">`Lean.Parser.Command.moduleDoc</span><a href="../.././Init/Prelude.html#List.cons">]</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span></div></div><p>Parses a docstring as Verso, returning the syntax if successful.</p><p>When not successful, parser errors are logged.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.parseVersoDocString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.reportVersoParseFailure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L116-L173">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.reportVersoParseFailure"><span class="name">Lean</span>.<span class="name">reportVersoParseFailure</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Position.html#Lean.MonadFileMap">MonadFileMap</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Exception.html#Lean.MonadError">MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Environment.html#Lean.MonadEnv">MonadEnv</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Log.html#Lean.MonadLog">MonadLog</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/ResolveName.html#Lean.MonadResolveName">MonadResolveName</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">parseFailure</span> : <a href="../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Reports parse errors from a Verso docstring parse failure.</p><p>When Verso docstring parsing fails at parse time, a <code>parseFailure</code> node is created containing the
raw text, because emitting an error at that stage could lead to unwanted parser backtracking. This
function reports the actual error messages with proper source positions.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.reportVersoParseFailure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.versoDocString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L177-L192">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.versoDocString"><span class="name">Lean</span>.<span class="name">versoDocString</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">binders</span> : <a href="../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Command.docComment</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/DocString/Types.html#Lean.Doc.Block">Doc.Block</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabInline">ElabInline</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabBlock">ElabBlock</a>)</span></span> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/DocString/Types.html#Lean.Doc.Part">Doc.Part</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabInline">ElabInline</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabBlock">ElabBlock</a> <a href="../.././Init/Prelude.html#Empty">Empty</a>)</span></span>)</span></div></div><p>Elaborates a Verso docstring for the specified declaration, which should already be present in the
environment.</p><p><code>binders</code> should be the syntax of the parameters to the constant that is being documented, as a null
node that contains a sequence of bracketed binders. It is used to allow interactive features such as
document highlights and “find references” to work for documented parameters. If no parameter binders
are available, pass <code>Syntax.missing</code> or an empty null node.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.versoDocString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.versoModDocString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L196-L203">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.versoModDocString"><span class="name">Lean</span>.<span class="name">versoModDocString</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">range</span> : <a href="../.././Lean/Data/DeclarationRange.html#Lean.DeclarationRange">DeclarationRange</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">doc</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Doc.Parser.document</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Lean/DocString/Extension.html#Lean.VersoModuleDocs.Snippet">VersoModuleDocs.Snippet</a></span></div></div><p>Parses and elaborates a Verso module docstring.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.versoModDocString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.versoDocStringFromString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L209-L252">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.versoDocStringFromString"><span class="name">Lean</span>.<span class="name">versoDocStringFromString</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/DocString/Types.html#Lean.Doc.Block">Doc.Block</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabInline">ElabInline</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabBlock">ElabBlock</a>)</span></span> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/DocString/Types.html#Lean.Doc.Part">Doc.Part</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabInline">ElabInline</a> <a href="../.././Lean/DocString/Extension.html#Lean.ElabBlock">ElabBlock</a> <a href="../.././Init/Prelude.html#Empty">Empty</a>)</span></span>)</span></div></div><p>Adds a Verso docstring to the specified declaration, which should already be present in the
environment. The docstring is added from a string value, rather than syntax, which means that the
interactive features are disabled.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.versoDocStringFromString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addMarkdownDocString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L254-L269">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addMarkdownDocString"><span class="name">Lean</span>.<span class="name">addMarkdownDocString</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Environment.html#Lean.MonadEnv">MonadEnv</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Exception.html#Lean.MonadError">MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Log.html#Lean.MonadLog">MonadLog</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Message.html#Lean.AddMessageContext">AddMessageContext</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Command.docComment</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds a Markdown docstring to the environment, validating documentation links.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.addMarkdownDocString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addVersoDocStringCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L271-L283">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addVersoDocStringCore"><span class="name">Lean</span>.<span class="name">addVersoDocStringCore</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Environment.html#Lean.MonadEnv">MonadEnv</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Exception.html#Lean.MonadError">MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docs</span> : <a href="../.././Lean/DocString/Extension.html#Lean.VersoDocString">VersoDocString</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds an elaborated Verso docstring to the environment.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.addVersoDocStringCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addVersoModDocStringCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L285-L295">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addVersoModDocStringCore"><span class="name">Lean</span>.<span class="name">addVersoModDocStringCore</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Environment.html#Lean.MonadEnv">MonadEnv</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Exception.html#Lean.MonadError">MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">docs</span> : <a href="../.././Lean/DocString/Extension.html#Lean.VersoModuleDocs.Snippet">VersoModuleDocs.Snippet</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds an elaborated Verso module docstring to the environment.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.addVersoModDocStringCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addVersoDocString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L298-L312">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addVersoDocString"><span class="name">Lean</span>.<span class="name">addVersoDocString</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">binders</span> : <a href="../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Command.docComment</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds a Verso docstring to the environment.</p><p><code>binders</code> should be the syntax of the parameters to the constant that is being documented, as a null
node that contains a sequence of bracketed binders. It is used to allow interactive features such as
document highlights and “find references” to work for documented parameters. If no parameter binders
are available, pass <code>Syntax.missing</code> or an empty null node.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.addVersoDocString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addVersoDocStringFromString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L314-L323">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addVersoDocStringFromString"><span class="name">Lean</span>.<span class="name">addVersoDocStringFromString</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds a Verso docstring to the environment from a string value, which disables the interactive
features. This should be used for programs that add documentation when there is no syntax available.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.addVersoDocStringFromString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addDocStringOf"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L326-L337">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addDocStringOf"><span class="name">Lean</span>.<span class="name">addDocStringOf</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">isVerso</span> : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">binders</span> : <a href="../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Command.docComment</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds a docstring to the environment. If <code>isVerso</code> is <code>false</code>, then the docstring is interpreted as
Markdown.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addDocStringOf">Lean.addDocStringOf</a> <span class="fn">isVerso</span> <span class="fn">declName</span> <span class="fn">binders</span> <span class="fn">docComment</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Init/Prelude.html#ite">if</a> <span class="fn">isVerso</span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a> <a href="../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addVersoDocString">Lean.addVersoDocString</a> <span class="fn">declName</span> <span class="fn">binders</span> <span class="fn">docComment</span></span>
  <a href="../.././Init/Prelude.html#ite">else</a> <span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addMarkdownDocString">Lean.addMarkdownDocString</a> <span class="fn">declName</span> <span class="fn">docComment</span></span></li></ul></details><details id="instances-for-list-Lean.addDocStringOf" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.makeDocStringVerso"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L339-L350">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.makeDocStringVerso"><span class="name">Lean</span>.<span class="name">makeDocStringVerso</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Interprets a docstring that has been saved as a Markdown string as Verso, elaborating it. This is
used during bootstrapping.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.makeDocStringVerso" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addDocString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L352-L368">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addDocString"><span class="name">Lean</span>.<span class="name">addDocString</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">binders</span> : <a href="../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Command.docComment</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds a docstring to the environment.</p><p>If the option <code>doc.verso</code> is <code>true</code>, the docstring is processed as a Verso docstring. Otherwise, it
is considered a Markdown docstring, and documentation links are validated. To explicitly control
whether the docstring is in Verso format, use <code><a href="../.././Lean/DocString/Add.html#Lean.addDocStringOf">addDocStringOf</a></code> instead.</p><p>For Verso docstrings, <code>binders</code> should be the syntax of the parameters to the constant that is being
documented, as a null node that contains a sequence of bracketed binders. It is used to allow
interactive features such as document highlights and “find references” to work for documented
parameters. If no parameter binders are available, pass <code>Syntax.missing</code> or an empty null node.
<code>binders</code> is not used for Markdown docstrings.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addDocString">Lean.addDocString</a> <span class="fn">declName</span> <span class="fn">binders</span> <span class="fn">docComment</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../.././Lean/Data/Options.html#Lean.MonadOptions.getOptions">Lean.getOptions</a>
  <span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addDocStringOf">Lean.addDocStringOf</a> <span class="fn">(<a href="../.././Lean/Data/Options.html#Lean.Option.get">Lean.Option.get</a> <span class="fn">__do_lift</span> <a href="../.././Lean/DocString/Extension.html#Lean.doc.verso">Lean.doc.verso</a>)</span> <span class="fn">declName</span> <span class="fn">binders</span> <span class="fn">docComment</span></span></span></li></ul></details><details id="instances-for-list-Lean.addDocString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addDocString'"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L370-L390">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addDocString'"><span class="name">Lean</span>.<span class="name">addDocString'</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">declName</span> : <a href="../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">binders</span> : <a href="../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docString?</span> : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Command.docComment</span>)</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds a docstring to the environment, if it is provided. If no docstring is provided, nothing
happens.</p><p>If the option <code>doc.verso</code> is <code>true</code>, the docstring is processed as a Verso docstring. Otherwise, it
is considered a Markdown docstring, and documentation links are validated. To explicitly control
whether the docstring is in Verso format, use <code><a href="../.././Lean/DocString/Add.html#Lean.addDocStringOf">addDocStringOf</a></code> instead.</p><p>For Verso docstrings, <code>binders</code> should be the syntax of the parameters to the constant that is being
documented, as a null node that contains a sequence of bracketed binders. It is used to allow
interactive features such as document highlights and “find references” to work for documented
parameters. If no parameter binders are available, pass <code>Syntax.missing</code> or an empty null node.
<code>binders</code> is not used for Markdown docstrings.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addDocString'">Lean.addDocString'</a> <span class="fn">declName</span> <span class="fn">binders</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">docString</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addDocString">Lean.addDocString</a> <span class="fn">declName</span> <span class="fn">binders</span> <span class="fn">docString</span></span></li><li class="equation"><span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addDocString'">Lean.addDocString'</a> <span class="fn">declName</span> <span class="fn">binders</span> <a href="../.././Init/Prelude.html#Option.none">none</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#Unit.unit">(</a><a href="../.././Init/Prelude.html#Unit.unit">)</a></span></li></ul></details><details id="instances-for-list-Lean.addDocString'" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.addVersoModDocString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/DocString/Add.lean#L395-L407">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/DocString/Add.html#Lean.addVersoModDocString"><span class="name">Lean</span>.<span class="name">addVersoModDocString</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">range</span> : <a href="../.././Lean/Data/DeclarationRange.html#Lean.DeclarationRange">DeclarationRange</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">docComment</span> : <a href="../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Doc.Parser.document</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Adds a Verso docstring to the environment.</p><p><code>binders</code> should be the syntax of the parameters to the constant that is being documented, as a null
node that contains a sequence of bracketed binders. It is used to allow interactive features such as
document highlights and “find references” to work for documented parameters. If no parameter binders
are available, pass <code>Syntax.missing</code> or an empty null node.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addVersoModDocString">Lean.addVersoModDocString</a> <span class="fn">range</span> <span class="fn">docComment</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">snippet</span> ← <span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.versoModDocString">Lean.versoModDocString</a> <span class="fn">range</span> <span class="fn">docComment</span></span>
  <span class="fn"><a href="../.././Lean/DocString/Add.html#Lean.addVersoModDocStringCore">Lean.addVersoModDocStringCore</a> <span class="fn">snippet</span></span></span></li></ul></details><details id="instances-for-list-Lean.addVersoModDocString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>