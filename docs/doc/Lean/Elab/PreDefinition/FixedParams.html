<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Elab.PreDefinition.FixedParams</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Lean.Elab.PreDefinition.FixedParams";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">PreDefinition</span>.<span class="name">FixedParams</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init/Omega.html">Init.Omega</a></li><li><a href="../../.././Lean/Elab/PreDefinition/Basic.html">Lean.Elab.PreDefinition.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Elab.PreDefinition.FixedParams" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info.init"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">init</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info.addSelfCalls"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">addSelfCalls</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info.mayBeFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">mayBeFixed</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info.setVarying"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">setVarying</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info.getCallerParam?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">getCallerParam?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info.setCallerParam"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">setCallerParam</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.Info.format"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">format</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParams.instToFormatInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">instToFormatInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.getParamRevDeps"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">getParamRevDeps</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.getFixedParamsInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">getFixedParamsInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerms</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.instInhabitedFixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instInhabitedFixedParamPerms</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.instInhabitedFixedParamPerms.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instInhabitedFixedParamPerms</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.instReprFixedParamPerms.repr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instReprFixedParamPerms</span>.<span class="name">repr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.instReprFixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instReprFixedParamPerms</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.getFixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">getFixedParamPerms</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.numFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">numFixed</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.isFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">isFixed</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.forallTelescope"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">forallTelescope</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.instantiateForall"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">instantiateForall</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.instantiateLambda"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">instantiateLambda</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.pickFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">pickFixed</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.pickVarying"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">pickVarying</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerm.buildArgs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">buildArgs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerms.fixedArePrefix"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerms</span>.<span class="name">fixedArePrefix</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.FixedParamPerms.erase"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerms</span>.<span class="name">erase</span></a></div></nav><main>
<div class="mod_doc"><p>This module contains the logic for figuring out, given mutually recursive predefinitions,
which parameters are “fixed”. This used to be a simple task when we only considered a fixed prefix,
but becomes a quite involved task if we allow fixed parameters also later in the parameter list,
and possibly in a different order in different modules.</p><p>The main components of this module are</p><ul><li>The pure <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a></code> data type for the bookkeeping during analysis</li><li>The <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a></code> type, with the analysis result for one function
(effectively a mask and a permutation)</li><li>The <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a></code> data type, with the data for a whole recursive group.</li><li>The <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.getFixedParamPerms">getFixedParamPerms</a></code> function that calculates the fixed parameters</li><li>Various <code>MetaM</code> functions for bringing into scope fixed and varying parameters, assembling
argument lists etc.</li></ul></div><div class="decl" id="Lean.Elab.FixedParams.Info"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L36-L84">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>To determine which parameters in mutually recursive predefinitions are fixed, and how they
correspond to each other, we run an analysis that aggregates information in the <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a></code> data type.</p><p>Abstractly, this represents</p><ul><li>a set <code>varying</code> of <code>(funIdx × paramIdx)</code> pairs known to be varying, initially empty</li><li>a directed graph whose nodes are <code>(funIdx × paramIdx)</code> pairs, initially empty</li></ul><p>We find the largest set and graph that satisfies these rules:</p><ul><li>Every parameter has to be related to itself: <code>(funIdx, paramIdx) → (funIdx, paramIdx)</code>.</li><li>whenever the function with index <code>caller</code> calls <code>callee</code> and the <code>argIdx</code>'s argument is reducibly
defeq to <code>paramIdx</code>, then we have an edge <code>(caller, paramIdx) → (callee, argIdx)</code>.</li><li>whenever the function with index <code>caller</code> calls <code>callee</code> and the <code>argIdx</code>'s argument is not reducibly
defeq to any of the <code>caller</code>'s parameters, then <code>(callee, argIdx) ∈ varying</code>.</li><li>If we have <code>(caller, paramIdx₁) → (callee, argIdx)</code> and <code>(caller, paramIdx₂) → (callee, argIdx)</code>
with <code>paramIdx₁ ≠ paramIdx₂</code>, then <code>(callee, argIdx) ∈ varying</code>.</li><li>The graph is transitive</li><li>If we have <code>(caller, paramIdx) → (callee, argIdx)</code> and <code>(caller, paramIdx) ∈ varying</code>, then
<code>(callee, argIdx) ∈ varying</code></li><li>If the type of <code>funIdx</code>’s parameter <code>paramIdx₂ depends on the </code>paramIdx₁<code>and</code>
`(funIdx, paramIdx₁) ∈ varying<code>, then </code>(funIdx, paramIdx₁) ∈ varying`</li><li>For structural recursion: The target and all its indices are <code>varying</code>.
(This is taking into account post-hoc, using <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms.erase">FixedParamPerms.erase</a></code>)</li></ul><p>Under the assumption that the predefinitions indeed are mutually recursive, then the resulting graph,
restricted to the non-<code>varying</code> nodes, should partition into cliques that have one member from each
function. Every such clique becomes a fixed parameter.</p><ul class="structure_fields" id="Lean.Elab.FixedParams.Info.mk"><li id="Lean.Elab.FixedParams.Info.graph" class="structure_field"><div class="structure_field_info">graph : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span>)</span>)</span>)</span></span></div></li><li id="Lean.Elab.FixedParams.Info.revDeps" class="structure_field"><div class="structure_field_info">revDeps : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span>)</span></span></div><div class="structure_field_doc"><p>The dependency structure of the function parameter.
If <code>paramIdx₂ ∈ revDeps[funIdx][paraIdx₁]</code>, then the type of <code>paramIdx₂</code> depends on <code>paramIdx₁</code></p></div></li></ul><details id="instances-for-list-Lean.Elab.FixedParams.Info" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParams.Info.init"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L87-L90">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.init"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">init</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">revDeps</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParams.Info.init" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParams.Info.addSelfCalls"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L92-L96">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.addSelfCalls"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">addSelfCalls</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">info</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParams.Info.addSelfCalls" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParams.Info.mayBeFixed"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L98-L102">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.mayBeFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">mayBeFixed</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">callerIdx </span><span class="fn">paramIdx</span> : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">info</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Is this parameter still plausibly a fixed parameter?</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.mayBeFixed">Lean.Elab.FixedParams.Info.mayBeFixed</a> <span class="fn">callerIdx</span> <span class="fn">paramIdx</span> <span class="fn">info</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">info</span>.<a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.graph">graph</a></span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">[</a><span class="fn">callerIdx</span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">]</a><a href="../../.././Init/GetElem.html#GetElem?.getElem!">!</a><a href="../../.././Init/GetElem.html#GetElem?.getElem!">[</a><span class="fn">paramIdx</span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">]</a><a href="../../.././Init/GetElem.html#GetElem?.getElem!">!</a>.<a href="../../.././Init/Data/Option/Basic.html#Option.isSome">isSome</a></span></li></ul></details><details id="instances-for-list-Lean.Elab.FixedParams.Info.mayBeFixed" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParams.Info.setVarying"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L104-L121">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.setVarying"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">setVarying</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">funIdx </span><span class="fn">paramIdx</span> : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">info</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a></div></div><p>This parameter is varying. Set and propagate that information.</p></div></div><div class="decl" id="Lean.Elab.FixedParams.Info.getCallerParam?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L123-L124">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.getCallerParam?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">getCallerParam?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">calleeIdx </span><span class="fn">argIdx </span><span class="fn">callerIdx</span> : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">info</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.getCallerParam?">Lean.Elab.FixedParams.Info.getCallerParam?</a> <span class="fn">calleeIdx</span> <span class="fn">argIdx</span> <span class="fn">callerIdx</span> <span class="fn">info</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><span class="fn"><span class="fn"><span class="fn">info</span>.<a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.graph">graph</a></span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">[</a><span class="fn">calleeIdx</span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">]</a><a href="../../.././Init/GetElem.html#GetElem?.getElem!">!</a><a href="../../.././Init/GetElem.html#GetElem?.getElem!">[</a><span class="fn">argIdx</span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">]</a><a href="../../.././Init/GetElem.html#GetElem?.getElem!">!</a>.<a href="../../.././Init/Data/Option/Basic.html#Option.bind">bind</a></span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>) =&gt; <span class="fn">x</span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">[</a><span class="fn">callerIdx</span><a href="../../.././Init/GetElem.html#GetElem?.getElem!">]</a><a href="../../.././Init/GetElem.html#GetElem?.getElem!">!</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.FixedParams.Info.getCallerParam?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParams.Info.setCallerParam"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L126-L163">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.setCallerParam"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">setCallerParam</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">calleeIdx </span><span class="fn">argIdx </span><span class="fn">callerIdx </span><span class="fn">paramIdx</span> : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">info</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a></div></div><p>We observe a possibly valid edge.</p></div></div><div class="decl" id="Lean.Elab.FixedParams.Info.format"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L165-L171">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.format"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">Info</span>.<span class="name">format</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">info</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Data/Format/Basic.html#Std.Format">Format</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParams.Info.format" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParams.instToFormatInfo"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L174-L174">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.instToFormatInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParams</span>.<span class="name">instToFormatInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat">ToFormat</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">Info</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.instToFormatInfo">Lean.Elab.FixedParams.instToFormatInfo</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat.mk">{</a> <span class="fn">format</span> := <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.format">Lean.Elab.FixedParams.Info.format</a> <a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.getParamRevDeps"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L180-L189">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.getParamRevDeps"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">getParamRevDeps</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">value</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.getParamRevDeps" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.getFixedParamsInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L191-L241">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.getFixedParamsInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">getFixedParamsInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">preDefs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Elab/PreDefinition/Basic.html#Lean.Elab.PreDefinition">PreDefinition</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">FixedParams.Info</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.getFixedParamsInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L243-L250">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>For a given function, a mapping from its parameters to the (indices of the) fixed parameters of the
recursive group.
The length of the array is the arity of the function, as determined from its body, consistent
with the arity used by well-founded recursion.
For the first function, they appear in order; for other functions they may be reordered.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">Lean.Elab.FixedParamPerm</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerms"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L252-L269">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerms</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>This data structure stores the result of the fixed parameter analysis. See <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info">FixedParams.Info</a></code> for
details on the analysis.</p><ul class="structure_fields" id="Lean.Elab.FixedParamPerms.mk"><li id="Lean.Elab.FixedParamPerms.numFixed" class="structure_field"><div class="structure_field_info">numFixed : <a href="../../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>Number of fixed parameters</p></div></li><li id="Lean.Elab.FixedParamPerms.perms" class="structure_field"><div class="structure_field_info">perms : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a></span></div><div class="structure_field_doc"><p>For each function in the clique, a mapping from its parameters to the fixed parameters.
For the first function, they appear in order; for other functions they may be reordered.</p></div></li><li id="Lean.Elab.FixedParamPerms.revDeps" class="structure_field"><div class="structure_field_info">revDeps : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span>)</span></span></div><div class="structure_field_doc"><p>The dependencies among the parameters. See <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParams.Info.revDeps">FixedParams.Info.revDeps</a></code>.
We need this for the <code>FixedParamsPerm.<a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms.erase">erase</a></code> operation.</p></div></li></ul><details id="instances-for-list-Lean.Elab.FixedParamPerms" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.instInhabitedFixedParamPerms"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L269-L269">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instInhabitedFixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instInhabitedFixedParamPerms</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instInhabitedFixedParamPerms">Lean.Elab.instInhabitedFixedParamPerms</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instInhabitedFixedParamPerms.default">Lean.Elab.instInhabitedFixedParamPerms.default</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.instInhabitedFixedParamPerms.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L269-L269">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instInhabitedFixedParamPerms.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instInhabitedFixedParamPerms</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instInhabitedFixedParamPerms.default">Lean.Elab.instInhabitedFixedParamPerms.default</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms.mk">{</a> <span class="fn">numFixed</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">perms</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">revDeps</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Elab.instInhabitedFixedParamPerms.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.instReprFixedParamPerms.repr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L269-L269">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instReprFixedParamPerms.repr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instReprFixedParamPerms</span>.<span class="name">repr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Nat">Nat</a> → <a href="../../.././Init/Data/Format/Basic.html#Std.Format">Format</a></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.instReprFixedParamPerms.repr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.instReprFixedParamPerms"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L269-L269">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instReprFixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">instReprFixedParamPerms</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instReprFixedParamPerms">Lean.Elab.instReprFixedParamPerms</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Data/Repr.html#Repr.mk">{</a> <span class="fn">reprPrec</span> := <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.instReprFixedParamPerms.repr">Lean.Elab.instReprFixedParamPerms.repr</a> <a href="../../.././Init/Data/Repr.html#Repr.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.getFixedParamPerms"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L271-L302">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.getFixedParamPerms"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">getFixedParamPerms</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">preDefs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Elab/PreDefinition/Basic.html#Lean.Elab.PreDefinition">PreDefinition</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.getFixedParamPerms" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.numFixed"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L304-L305">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.numFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">numFixed</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Nat">Nat</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">perm</span>.<a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.numFixed">numFixed</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Data/Array/Basic.html#Array.countP">Array.countP</a> <a href="../../.././Init/Data/Option/Basic.html#Option.isSome">Option.isSome</a> <span class="fn">perm</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.numFixed" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.isFixed"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L307-L308">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.isFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">isFixed</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">i</span> : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">perm</span>.<a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.isFixed">isFixed</a></span> <span class="fn">i</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">perm</span><a href="../../.././Init/GetElem.html#GetElem?.getElem?">[</a><span class="fn">i</span><a href="../../.././Init/GetElem.html#GetElem?.getElem?">]</a><a href="../../.././Init/GetElem.html#GetElem?.getElem?">?</a>.<a href="../../.././Init/Data/Option/Basic.html#Option.join">join</a></span>.<a href="../../.././Init/Data/Option/Basic.html#Option.isSome">isSome</a></span></li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.isFixed" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.forallTelescope"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L334-L336">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.forallTelescope"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">forallTelescope</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">n</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a> u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Control/Basic.html#MonadControlT">MonadControlT</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">n</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">n</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span> → <span class="fn"><span class="fn">n</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">n</span> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">perm</span>.<a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.forallTelescope">forallTelescope</a></span> <span class="fn">type</span> <span class="fn">k</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.map1MetaM">Lean.Meta.map1MetaM</a>
    <span class="fn">(fun {<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>} (<span class="fn">k</span> : <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></span>) =&gt; <span class="fn"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#_private.Lean.Elab.PreDefinition.FixedParams.0.Lean.Elab.FixedParamPerm.forallTelescopeImpl">Lean.Elab.FixedParamPerm.forallTelescopeImpl✝</a> <span class="fn">perm</span> <span class="fn">type</span> <span class="fn">k</span></span>)</span> <span class="fn">k</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.forallTelescope" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.instantiateForall"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L339-L354">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.instantiateForall"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">instantiateForall</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">type₀</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">xs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>If <code>type</code> is the type of the <code>funIdx</code>'s function, instantiate the fixed parameters.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.instantiateForall" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.instantiateLambda"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L356-L377">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.instantiateLambda"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">instantiateLambda</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">value₀</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">xs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>If <code>value</code> is the body of the <code>funIdx</code>'s function, instantiate the fixed parameters.
Expects enough manifest lambdas to instantiate all fixed parameters, but can handle
eta-contracted definitions beyond that.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.instantiateLambda" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.pickFixed"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L379-L397">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.pickFixed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">pickFixed</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">xs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span></div></div><p>If <code>xs</code> are arguments to the <code>funIdx</code>'s function, pick only the fixed ones, and reorder appropriately.
Expects <code>xs</code> to match the arity of the function.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.pickFixed" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.pickVarying"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L399-L407">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.pickVarying"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">pickVarying</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">xs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span></div></div><p>If <code>xs</code> are arguments to the <code>funIdx</code>'s function, pick only the varying ones.
Unlike <code><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.pickFixed">pickFixed</a></code>, this function can handle over- or under-application.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.pickVarying" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerm.buildArgs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L409-L435">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm.buildArgs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerm</span>.<span class="name">buildArgs</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">perm</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerm">FixedParamPerm</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fixedArgs </span><span class="fn">varyingArgs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span></div></div><p>Intersperses the fixed and varying parameters to be in the original parameter order.
Can handle over- or under-application (extra or missing varying args), as long
as there are all varying parameters that go before fixed parameters.
(We expect to always find all fixed parameters, else they wouldn't be fixed parameters.)</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerm.buildArgs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerms.fixedArePrefix"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L437-L444">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms.fixedArePrefix"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerms</span>.<span class="name">fixedArePrefix</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">fixedParamPerms</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Are all fixed parameters a non-reordered prefix?</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerms.fixedArePrefix" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.FixedParamPerms.erase"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/PreDefinition/FixedParams.lean#L446-L495">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms.erase"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">FixedParamPerms</span>.<span class="name">erase</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">fixedParamPerms</span> : <a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">xs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">toErase</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/PreDefinition/FixedParams.html#Lean.Elab.FixedParamPerms">FixedParamPerms</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span></div></div><p>If <code>xs</code> are the fixed parameters that are in scope, and <code>toErase</code> are, for each function, the
positions of arguments that must no longer be fixed parameters, then this function splits partitions
<code>xs</code> into those to keep and those to erase, and updates <code>FixedParams</code> accordingly.</p><p>This is used in structural recursion, where we may discover that some fixed parameters are actually
indices and need to be treated as varying, including all parameters that depend on them.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.FixedParamPerms.erase" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>