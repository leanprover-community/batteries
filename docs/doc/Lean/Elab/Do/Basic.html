<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Elab.Do.Basic</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Lean.Elab.Do.Basic";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">Basic</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init/Omega.html">Init.Omega</a></li><li><a href="../../.././Lean/Elab/Binders.html">Lean.Elab.Binders</a></li><li><a href="../../.././Lean/Meta/ProdN.html">Lean.Meta.ProdN</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Elab.Do.Basic" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.MonadInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">MonadInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContInfoRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfoRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instNonemptyContInfoRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptyContInfoRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">Context</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.MonadInstanceCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">MonadInstanceCache</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instNonemptyMonadInstanceCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptyMonadInstanceCache</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instInhabitedContVarId.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContVarId</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instInhabitedContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContVarId</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instBEqContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instBEqContVarId</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instBEqContVarId.beq"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instBEqContVarId</span>.<span class="name">beq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instHashableContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instHashableContVarId</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instHashableContVarId.hash"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instHashableContVarId</span>.<span class="name">hash</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarJump"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarJump</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instNonemptyState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptyState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElemCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instInhabitedDoElemCont.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedDoElemCont</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instInhabitedDoElemCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedDoElemCont</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElab</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instInhabitedContInfo.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContInfo</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instInhabitedContInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContInfo.toContInfoRefImpl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfo</span>.<span class="name">toContInfoRefImpl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContInfo.toContInfoRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfo</span>.<span class="name">toContInfoRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContInfoRef.toContInfoImpl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfoRef</span>.<span class="name">toContInfoImpl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContInfoRef.toContInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfoRef</span>.<span class="name">toContInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkMonadicType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkMonadicType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkPUnit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkPUnit</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkPUnitUnit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkPUnitUnit</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkPureApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkPureApp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElemCont.mkPure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">mkPure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkBindApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkBindApp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.declareMutVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">declareMutVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.declareMutVar?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">declareMutVar?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.throwUnlessMutVarDeclared"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">throwUnlessMutVarDeclared</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.checkMutVarsForShadowing"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">checkMutVarsForShadowing</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkFreshResultType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkFreshResultType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.synthUsingDefEq"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">synthUsingDefEq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkBindCancellingPure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkBindCancellingPure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabTerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabTerm</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabTermEnsuringType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabTermEnsuringType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabBinder"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabBinder</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.getReassignedMutVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getReassignedMutVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.addReachingDefsAsNonDep"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">addReachingDefsAsNonDep</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkFreshContVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkFreshContVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarId.find"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">find</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarId.mkJump"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">mkJump</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarId.jumpCount"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">jumpCount</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarId.synthesizeJumps"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">synthesizeJumps</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarId.erase"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">erase</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.ContVarId.getReassignedMutVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">getReassignedMutVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.withLCtxKeepingMutVarDefs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">withLCtxKeepingMutVarDefs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElemCont.mkBindUnlessPure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">mkBindUnlessPure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElemCont.continueWithUnit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">continueWithUnit</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElemCont.withDuplicableCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">withDuplicableCont</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.bindMutVarsFromTuple"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">bindMutVarsFromTuple</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.getReturnCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getReturnCont</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.getBreakCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getBreakCont</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.getContinueCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getContinueCont</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.withProxyMutVarDefs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">withProxyMutVarDefs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.enterLoopBody"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">enterLoopBody</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.withoutControl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">withoutControl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.enterFinally"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">enterFinally</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.SavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">SavedState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instNonemptySavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptySavedState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.SavedState.restore"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">SavedState</span>.<span class="name">restore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.DoElabM.saveState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElabM</span>.<span class="name">saveState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.instMonadBacktrackSavedStateDoElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instMonadBacktrackSavedStateDoElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkDoElemElabAttributeUnsafe"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkDoElemElabAttributeUnsafe</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.mkDoElemElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkDoElemElabAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.doElemElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">doElemElabAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabDoElem"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDoElem</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabDoElems1"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDoElems1</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabDoSeq"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDoSeq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.dooBlock"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">dooBlock</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabDooBlock"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDooBlock</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Do.elabDo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDo</span></a></div></nav><main>
<div class="decl" id="Lean.Elab.Do.MonadInfo"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L21-L33">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">MonadInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Do.MonadInfo.mk"><li id="Lean.Elab.Do.MonadInfo.m" class="structure_field"><div class="structure_field_info">m : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div><div class="structure_field_doc"><p>The inferred type of the monad of type <code>Type <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.u">u</a> → Type <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.v">v</a></code>.</p></div></li><li id="Lean.Elab.Do.MonadInfo.u" class="structure_field"><div class="structure_field_info">u : <a href="../../.././Lean/Level.html#Lean.Level">Level</a></div><div class="structure_field_doc"><p>The <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.u">u</a></code> in <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a> : Type <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.u">u</a> → Type <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.v">v</a></code>.</p></div></li><li id="Lean.Elab.Do.MonadInfo.v" class="structure_field"><div class="structure_field_info">v : <a href="../../.././Lean/Level.html#Lean.Level">Level</a></div><div class="structure_field_doc"><p>The <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.v">v</a></code> in <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a> : Type <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.u">u</a> → Type <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.v">v</a></code>.</p></div></li><li id="Lean.Elab.Do.MonadInfo.cachedPUnit" class="structure_field"><div class="structure_field_info">cachedPUnit : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div><div class="structure_field_doc"><p>The cached <code><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></code> expression.</p></div></li><li id="Lean.Elab.Do.MonadInfo.cachedPUnitUnit" class="structure_field"><div class="structure_field_info">cachedPUnitUnit : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div><div class="structure_field_doc"><p>The cached <code><a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></code> expression.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Do.MonadInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContInfoRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L38-L38">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfoRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef">Lean.Elab.Do.ContInfoRef</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#_private.Lean.Elab.Do.Basic.0.Lean.Elab.Do.ContInfoRefPointed">Lean.Elab.Do.ContInfoRefPointed✝</a>.<a href="../../.././Init/Prelude.html#NonemptyType.type">type</a></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContInfoRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instNonemptyContInfoRef"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L40-L41">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instNonemptyContInfoRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptyContInfoRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Nonempty">Nonempty</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef">ContInfoRef</a></span></div></div></div></div><div class="decl" id="Lean.Elab.Do.Context"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L43-L54">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">Context</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Do.Context.mk"><li id="Lean.Elab.Do.Context.monadInfo" class="structure_field"><div class="structure_field_info">monadInfo : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo">MonadInfo</a></div><div class="structure_field_doc"><p>Inferred and cached information about the monad.</p></div></li><li id="Lean.Elab.Do.Context.mutVars" class="structure_field"><div class="structure_field_info">mutVars : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></div><div class="structure_field_doc"><p>The mutable variables in declaration order.</p></div></li><li id="Lean.Elab.Do.Context.doBlockResultType" class="structure_field"><div class="structure_field_info">doBlockResultType : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div><div class="structure_field_doc"><p>The expected type of the current <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> block.
This can be different from <code>earlyReturnType</code> in <code>for</code> loop <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> blocks, for example.</p></div></li><li id="Lean.Elab.Do.Context.contInfo" class="structure_field"><div class="structure_field_info">contInfo : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef">ContInfoRef</a></div><div class="structure_field_doc"><p>Information about <code>return</code>, <code>break</code> and <code>continue</code> continuations.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Do.Context" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.MonadInstanceCache"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L56-L65">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInstanceCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">MonadInstanceCache</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Do.MonadInstanceCache.mk"><li id="Lean.Elab.Do.MonadInstanceCache.instPure" class="structure_field"><div class="structure_field_info">instPure : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div><div class="structure_field_doc"><p>The inferred <code><a href="../../.././Init/Prelude.html#Pure">Pure</a></code> instance of <code>(← read).monadInfo.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a></code>.</p></div></li><li id="Lean.Elab.Do.MonadInstanceCache.instBind" class="structure_field"><div class="structure_field_info">instBind : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div><div class="structure_field_doc"><p>The inferred <code><a href="../../.././Init/Prelude.html#Bind">Bind</a></code> instance of <code>(← read).monadInfo.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a></code>.</p></div></li><li id="Lean.Elab.Do.MonadInstanceCache.cachedPure" class="structure_field"><div class="structure_field_info">cachedPure : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div><div class="structure_field_doc"><p>The cached <code><a href="../../.././Init/Prelude.html#Pure.pure">Pure.pure</a></code> expression.</p></div></li><li id="Lean.Elab.Do.MonadInstanceCache.cachedBind" class="structure_field"><div class="structure_field_info">cachedBind : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div><div class="structure_field_doc"><p>The cached <code><a href="../../.././Init/Prelude.html#Bind.bind">Bind.bind</a></code> expression.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Do.MonadInstanceCache" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instNonemptyMonadInstanceCache"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L65-L65">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instNonemptyMonadInstanceCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptyMonadInstanceCache</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Nonempty">Nonempty</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInstanceCache">MonadInstanceCache</a></span></div></div></div></div><div class="decl" id="Lean.Elab.Do.ContVarId"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L67-L79">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>A continuation metavariable.</p><p>When generating jumps to join points or filling in expressions for <code>break</code> or <code>continue</code>, it is
still unclear what mutable variables need to be passed, because it depends on which mutable
variables were reassigned in the control flow path to <em>any</em> of the jumps.</p><p>The mechanism of <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></code> allows to delay the assignment of the jump expressions until the local
contexts of all the jumps are known.</p><ul class="structure_fields" id="Lean.Elab.Do.ContVarId.mk"><li id="Lean.Elab.Do.ContVarId.name" class="structure_field"><div class="structure_field_info">name : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></div></li></ul><details id="instances-for-list-Lean.Elab.Do.ContVarId" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instInhabitedContVarId.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L79-L79">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContVarId.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContVarId</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContVarId.default">Lean.Elab.Do.instInhabitedContVarId.default</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">{</a> <span class="fn">name</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Elab.Do.instInhabitedContVarId.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instInhabitedContVarId"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L79-L79">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContVarId</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContVarId">Lean.Elab.Do.instInhabitedContVarId</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContVarId.default">Lean.Elab.Do.instInhabitedContVarId.default</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instBEqContVarId"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L79-L79">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instBEqContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instBEqContVarId</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instBEqContVarId">Lean.Elab.Do.instBEqContVarId</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#BEq.mk">{</a> <span class="fn">beq</span> := <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instBEqContVarId.beq">Lean.Elab.Do.instBEqContVarId.beq</a> <a href="../../.././Init/Prelude.html#BEq.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instBEqContVarId.beq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L79-L79">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instBEqContVarId.beq"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instBEqContVarId</span>.<span class="name">beq</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a> → <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instBEqContVarId.beq">Lean.Elab.Do.instBEqContVarId.beq</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">{</a> <span class="fn">name</span> := <span class="fn">a</span> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">}</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">{</a> <span class="fn">name</span> := <span class="fn">b</span> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">}</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> (<span class="fn">a</span> <a href="../../.././Init/Prelude.html#BEq.beq">==</a> <span class="fn">b</span>)</li><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instBEqContVarId.beq">Lean.Elab.Do.instBEqContVarId.beq</a> <span class="fn">x✝¹</span> <span class="fn">x✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></li></ul></details><details id="instances-for-list-Lean.Elab.Do.instBEqContVarId.beq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instHashableContVarId"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L79-L79">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instHashableContVarId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instHashableContVarId</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Hashable">Hashable</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instHashableContVarId">Lean.Elab.Do.instHashableContVarId</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Hashable.mk">{</a> <span class="fn">hash</span> := <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instHashableContVarId.hash">Lean.Elab.Do.instHashableContVarId.hash</a> <a href="../../.././Init/Prelude.html#Hashable.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instHashableContVarId.hash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L79-L79">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instHashableContVarId.hash"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instHashableContVarId</span>.<span class="name">hash</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a> → <a href="../../.././Init/Prelude.html#UInt64">UInt64</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instHashableContVarId.hash">Lean.Elab.Do.instHashableContVarId.hash</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">{</a> <span class="fn">name</span> := <span class="fn">a</span> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mk">}</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#mixHash">mixHash</a> <span class="fn">0</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Hashable.hash">hash</a> <span class="fn">a</span>)</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.instHashableContVarId.hash" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarJump"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L81-L94">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarJump"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarJump</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Information about a jump site associated to <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></code>.
There will be one instance per jump site to a join point, or for each <code>break</code> or <code>continue</code>
element.</p><ul class="structure_fields" id="Lean.Elab.Do.ContVarJump.mk"><li id="Lean.Elab.Do.ContVarJump.mvar" class="structure_field"><div class="structure_field_info">mvar : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div><div class="structure_field_doc"><p>The metavariable to be assigned with the jump to the join point.
Conveniently, its captured local context is that of the jump, in which the new mutable variable
definitions and result variable are in scope.</p></div></li><li id="Lean.Elab.Do.ContVarJump.ref" class="structure_field"><div class="structure_field_info">ref : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a></div><div class="structure_field_doc"><p>A reference for error reporting.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Do.ContVarJump" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarInfo"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L96-L112">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Information about a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></code>.</p><ul class="structure_fields" id="Lean.Elab.Do.ContVarInfo.mk"><li id="Lean.Elab.Do.ContVarInfo.type" class="structure_field"><div class="structure_field_info">type : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div><div class="structure_field_doc"><p>The monadic type of the continuation.</p></div></li><li id="Lean.Elab.Do.ContVarInfo.tunneledVars" class="structure_field"><div class="structure_field_info">tunneledVars : <span class="fn"><a href="../../.././Std/Data/HashSet/Basic.html#Std.HashSet">Std.HashSet</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></div><div class="structure_field_doc"><p>A superset of the local variable names that the jumps will refer to. Often the <code>mut</code> variables.
Any <code>let</code>-bound FV will be turned into a <code>have</code>-bound FV by setting their <code>nondep</code> flag in the
local context of the metavariable for the jump site. This is a technicality to ensure that
<code>isDefEq</code> will not inline the <code>let</code>s.</p></div></li><li id="Lean.Elab.Do.ContVarInfo.lctx" class="structure_field"><div class="structure_field_info">lctx : <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a></div><div class="structure_field_doc"><p>Local context at the time the continuation variable was created.</p></div></li><li id="Lean.Elab.Do.ContVarInfo.jumps" class="structure_field"><div class="structure_field_info">jumps : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarJump">ContVarJump</a></span></div><div class="structure_field_doc"><p>The tracked jumps to the continuation. Each contains a metavariable to be assigned later.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Do.ContVarInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L114-L117">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Do.State.mk"><li id="Lean.Elab.Do.State.monadInstanceCache" class="structure_field"><div class="structure_field_info">monadInstanceCache : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInstanceCache">MonadInstanceCache</a></div></li><li id="Lean.Elab.Do.State.contVars" class="structure_field"><div class="structure_field_info">contVars : <span class="fn"><a href="../../.././Std/Data/HashMap/Basic.html#Std.HashMap">Std.HashMap</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarInfo">ContVarInfo</a></span></div></li></ul><details id="instances-for-list-Lean.Elab.Do.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instNonemptyState"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L117-L117">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instNonemptyState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptyState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Nonempty">Nonempty</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State">State</a></span></div></div></div></div><div class="decl" id="Lean.Elab.Do.DoElabM"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L119-L119">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElabM</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">Lean.Elab.Do.DoElabM</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context">Lean.Elab.Do.Context</a> <span class="fn">(<a href="../../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State">Lean.Elab.Do.State</a> <a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a>)</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.DoElabM" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.DoElemCont"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L121-L150">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Elaboration of a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> block <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a> $e; $rest</code>, results in a call
<code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabTerm">elabTerm</a> `(do $e; $rest) = elabElem e dec</code>, where <code>elabElem e ·</code> is the elaborator for <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code>
element <code>e</code>, and <code>dec</code> is the <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></code> describing the elaboration of the rest of the block
<code>rest</code>.</p><p>If the semantics of <code>e</code> resumes its continuation <code>rest</code>, its elaborator must bind its result to
<code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.resultName">resultName</a></code>, ensure that it has type <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.resultType">resultType</a></code> and then elaborate <code>rest</code> using <code>dec</code>.</p><p>Clearly, for term elements <code>e : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a> α</code>, the result has type <code>α</code>.
More subtly, for binding elements <code>let x := e</code> or <code>let x ← e</code>, the result has type <code><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></code> and is
unrelated to the type of the bound variable <code>x</code>.</p><p>Examples:</p><ul><li><code>return</code> drops the continuation; <code>return x; pure ()</code> elaborates to <code>pure x</code>.</li><li><code>let x ← e; rest x</code> elaborates to <code>e &gt;&gt;= fun x =&gt; rest x</code>.</li><li><code>let x := 3; let y ← (let x ← e); rest x</code> elaborates to
<code>let x := 3; e &gt;&gt;= fun x_1 =&gt; let y := (); rest x</code>, which is immediately zeta-reduced to
<code>let x := 3; e &gt;&gt;= fun x_1 =&gt; rest x</code>.</li><li><code>one; two</code> elaborates to <code>one &gt;&gt;= fun (_ : PUnit) =&gt; two</code>; it is an error if <code>one</code> does not have
type <code><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></code>.</li></ul><ul class="structure_fields" id="Lean.Elab.Do.DoElemCont.mk"><li id="Lean.Elab.Do.DoElemCont.resultName" class="structure_field"><div class="structure_field_info">resultName : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></div><div class="structure_field_doc"><p>The name of the monadic result variable.</p></div></li><li id="Lean.Elab.Do.DoElemCont.resultType" class="structure_field"><div class="structure_field_info">resultType : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div><div class="structure_field_doc"><p>The type of the monadic result.</p></div></li><li id="Lean.Elab.Do.DoElemCont.k" class="structure_field"><div class="structure_field_info">k : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div><div class="structure_field_doc"><p>The continuation to elaborate the <code>rest</code> of the block.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Do.DoElemCont" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instInhabitedDoElemCont.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L150-L150">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedDoElemCont.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedDoElemCont</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedDoElemCont.default">Lean.Elab.Do.instInhabitedDoElemCont.default</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.mk">{</a> <span class="fn">resultName</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">resultType</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">k</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Elab.Do.instInhabitedDoElemCont.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instInhabitedDoElemCont"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L150-L150">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedDoElemCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedDoElemCont</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedDoElemCont">Lean.Elab.Do.instInhabitedDoElemCont</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedDoElemCont.default">Lean.Elab.Do.instInhabitedDoElemCont.default</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.Do.DoElab"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L152-L159">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElab</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>The type of elaborators for <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> block elements.</p><p>It is <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabTerm">elabTerm</a> `(do $e; $rest) = elabElem e dec</code>, where <code>elabElem e ·</code> is the elaborator for <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code>
element <code>e</code>, and <code>dec</code> is the <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></code> describing the elaboration of the rest of the block
<code>rest</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElab">Lean.Elab.Do.DoElab</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`doElem</span> → <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">Lean.Elab.Do.DoElemCont</a> → <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">Lean.Elab.Do.DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></span>)</span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.DoElab" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContInfo"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L161-L169">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Information about a success, <code>return</code>, <code>break</code> or <code>continue</code> continuation that will be filled in
after the code using it has been elaborated.</p><ul class="structure_fields" id="Lean.Elab.Do.ContInfo.mk"><li id="Lean.Elab.Do.ContInfo.returnCont" class="structure_field"><div class="structure_field_info">returnCont : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></div></li><li id="Lean.Elab.Do.ContInfo.breakCont" class="structure_field"><div class="structure_field_info">breakCont : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span></div></li><li id="Lean.Elab.Do.ContInfo.continueCont" class="structure_field"><div class="structure_field_info">continueCont : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span></div></li></ul><details id="instances-for-list-Lean.Elab.Do.ContInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instInhabitedContInfo.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L169-L169">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContInfo.default"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContInfo</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo">ContInfo</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContInfo.default">Lean.Elab.Do.instInhabitedContInfo.default</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.mk">{</a> <span class="fn">returnCont</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">breakCont</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">continueCont</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Elab.Do.instInhabitedContInfo.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instInhabitedContInfo"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L169-L169">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instInhabitedContInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo">ContInfo</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContInfo">Lean.Elab.Do.instInhabitedContInfo</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instInhabitedContInfo.default">Lean.Elab.Do.instInhabitedContInfo.default</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContInfo.toContInfoRefImpl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L171-L172">source</a></div><div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.toContInfoRefImpl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfo</span>.<span class="name">toContInfoRefImpl</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo">ContInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef">ContInfoRef</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">m</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.toContInfoRefImpl">toContInfoRefImpl</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#unsafeCast">unsafeCast</a> <span class="fn">m</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContInfo.toContInfoRefImpl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContInfo.toContInfoRef"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L174-L175">source</a></div><div class="attributes">@[implemented_by Lean.Elab.Do.ContInfo.toContInfoRefImpl]</div>
<div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.toContInfoRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfo</span>.<span class="name">toContInfoRef</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo">ContInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef">ContInfoRef</a></div></div></div></div><div class="decl" id="Lean.Elab.Do.ContInfoRef.toContInfoImpl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L177-L178">source</a></div><div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef.toContInfoImpl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfoRef</span>.<span class="name">toContInfoImpl</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef">ContInfoRef</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo">ContInfo</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">m</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef.toContInfoImpl">toContInfoImpl</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#unsafeCast">unsafeCast</a> <span class="fn">m</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContInfoRef.toContInfoImpl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContInfoRef.toContInfo"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L180-L181">source</a></div><div class="attributes">@[implemented_by Lean.Elab.Do.ContInfoRef.toContInfoImpl]</div>
<div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef.toContInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContInfoRef</span>.<span class="name">toContInfo</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">m</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef">ContInfoRef</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo">ContInfo</a></div></div></div></div><div class="decl" id="Lean.Elab.Do.mkMonadicType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L183-L185">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkMonadicType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkMonadicType</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">resultType</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Constructs <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a> α</code> from <code>α</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkMonadicType">Lean.Elab.Do.mkMonadicType</a> <span class="fn">resultType</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Init/Prelude.html#MonadReader.read">read</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.mkApp">Lean.mkApp</a> <span class="fn"><span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.monadInfo">monadInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a></span> <span class="fn">resultType</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkMonadicType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkPUnit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L187-L189">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkPUnit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkPUnit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>The cached <code><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></code> expression.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkPUnit">Lean.Elab.Do.mkPUnit</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Init/Prelude.html#MonadReader.read">read</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.monadInfo">monadInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.cachedPUnit">cachedPUnit</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkPUnit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkPUnitUnit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L191-L193">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkPUnitUnit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkPUnitUnit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>The cached <code><a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></code> expression.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkPUnitUnit">Lean.Elab.Do.mkPUnitUnit</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Init/Prelude.html#MonadReader.read">read</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.monadInfo">monadInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.cachedPUnitUnit">cachedPUnitUnit</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkPUnitUnit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkPureApp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L205-L208">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkPureApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkPureApp</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α </span><span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>The expression <code>pure (α:=α) e</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkPureApp">Lean.Elab.Do.mkPureApp</a> <span class="fn">α</span> <span class="fn">e</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">e</span> ← <span class="fn"><a href="../../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.ensureHasType">Lean.Elab.Term.ensureHasType</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option.some">some</a> <span class="fn">α</span>)</span> <span class="fn">e</span>)</span></span>
  let <span class="fn">__do_lift</span> ← <a href="../../.././Lean/Elab/Do/Basic.html#_private.Lean.Elab.Do.Basic.0.Lean.Elab.Do.getCachedPure">Lean.Elab.Do.getCachedPure✝</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.mkApp2">Lean.mkApp2</a> <span class="fn">__do_lift</span> <span class="fn">α</span> <span class="fn">e</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkPureApp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.DoElemCont.mkPure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L210-L213">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.mkPure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">mkPure</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">resultType</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">TermElabM</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></span></div></div><p>Create a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></code> returning the result using <code>pure</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.DoElemCont.mkPure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkBindApp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L225-L231">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkBindApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkBindApp</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α </span><span class="fn">β </span><span class="fn">e </span><span class="fn">k</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>The expression <code><a href="../../.././Init/Prelude.html#Bind.bind">Bind.bind</a> (α:=α) (β:=β) e <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkBindApp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.declareMutVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L233-L235">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.declareMutVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">declareMutVar</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span> → <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></span></div></div><p>Register the given name as that of a <code>mut</code> variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.declareMutVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.declareMutVar?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L237-L239">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.declareMutVar?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">declareMutVar?</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">mutTk?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></div></div><p>Register the given name as that of a <code>mut</code> variable if the syntax token <code>mut</code> is present.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.declareMutVar?">Lean.Elab.Do.declareMutVar?</a> <span class="fn">mutTk?</span> <span class="fn">x</span> <span class="fn">k</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">mutTk?</span>.<a href="../../.././Init/Data/Option/Basic.html#Option.isSome">isSome</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.declareMutVar">Lean.Elab.Do.declareMutVar</a> <span class="fn">x</span> <span class="fn">k</span></span> <a href="../../.././Init/Prelude.html#ite">else</a> <span class="fn">k</span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.declareMutVar?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.throwUnlessMutVarDeclared"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L241-L244">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.throwUnlessMutVarDeclared"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">throwUnlessMutVarDeclared</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Throw an error if the given name is not a declared <code>mut</code> variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.throwUnlessMutVarDeclared" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.checkMutVarsForShadowing"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L246-L249">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.checkMutVarsForShadowing"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">checkMutVarsForShadowing</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Throw an error if a declaration of the given name would shadow a <code>mut</code> variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.checkMutVarsForShadowing" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkFreshResultType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L251-L253">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkFreshResultType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkFreshResultType</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">userName</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a> := <span class="fn">`α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Create a fresh <code>α</code> that would fit in <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a> α</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkFreshResultType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.synthUsingDefEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L255-L257">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.synthUsingDefEq"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">synthUsingDefEq</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">msg</span> : <a href="../../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">expected </span><span class="fn">actual</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.synthUsingDefEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkBindCancellingPure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L259-L271">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkBindCancellingPure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkBindCancellingPure</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">eResultTy </span><span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Has the effect of <code>e &gt;&gt;= fun (x : eResultTy) =&gt; $(← <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a> `(x))</code>.
Ensures that <code>e</code> has type <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a> eResultTy</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkBindCancellingPure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.elabType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L273-L282">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabType</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">ty?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> (<a href="../../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`term</span>)</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">freshLevel</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>A variant of <code>Term.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabType">elabType</a></code> that takes the universe of the monad into account, unless
<code>freshLevel</code> is set.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.elabTerm"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L294-L302">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabTerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabTerm</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">expectedType?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabTerm">Lean.Elab.Do.elabTerm</a> <span class="fn">stx</span> <span class="fn">expectedType?</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__discr</span> ← <span class="fn"><a href="../../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<a href="../../.././Lean/Elab/Do/Basic.html#_private.Lean.Elab.Do.Basic.0.Lean.Elab.Do.withPendingMVars">Lean.Elab.Do.withPendingMVars✝</a> <span class="fn">(<a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.elabTerm">Lean.Elab.Term.elabTerm</a> <span class="fn">stx</span> <span class="fn">expectedType?</span>)</span>)</span></span>
  <span class="fn">match <span class="fn">__discr</span> with
    | <a href="../../.././Init/Prelude.html#Prod.mk">(</a><span class="fn">e</span><a href="../../.././Init/Prelude.html#Prod.mk">,</a> <span class="fn">_pendingMVars</span><a href="../../.././Init/Prelude.html#Prod.mk">)</a> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">e</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabTerm" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.elabTermEnsuringType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L304-L307">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabTermEnsuringType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabTermEnsuringType</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">expectedType?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabTermEnsuringType">Lean.Elab.Do.elabTermEnsuringType</a> <span class="fn">stx</span> <span class="fn">expectedType?</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">e</span> ← <span class="fn"><a href="../../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.elabTermEnsuringType">Lean.Elab.Term.elabTermEnsuringType</a> <span class="fn">stx</span> <span class="fn">expectedType?</span>)</span></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">e</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabTermEnsuringType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.elabBinder"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L309-L310">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabBinder"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabBinder</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">binder</span> : <a href="../../.././Init/Prelude.html#Lean.Syntax">Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabBinder" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.getReassignedMutVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L312-L321">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.getReassignedMutVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getReassignedMutVars</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">rootCtx</span> : <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mutVars</span> : <span class="fn"><a href="../../.././Std/Data/HashSet/Basic.html#Std.HashSet">Std.HashSet</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">childCtxs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Std/Data/HashSet/Basic.html#Std.HashSet">Std.HashSet</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></div></div><p>The subset of <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.mutVars">mutVars</a></code> that were reassigned in any of the <code>childCtxs</code> relative to the given
<code>rootCtx</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.getReassignedMutVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.addReachingDefsAsNonDep"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L323-L332">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.addReachingDefsAsNonDep"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">addReachingDefsAsNonDep</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">rootCtx </span><span class="fn">childCtx</span> : <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">tunneledVars</span> : <span class="fn"><a href="../../.././Std/Data/HashSet/Basic.html#Std.HashSet">Std.HashSet</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a></div></div><p>Adds the new reaching definitions of the given <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarInfo.tunneledVars">tunneledVars</a></code> in <code>childCtx</code> relative to <code>rootCtx</code> as
non-dependent decls.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.addReachingDefsAsNonDep" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkFreshContVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L334-L346">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkFreshContVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkFreshContVar</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">resultType</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">tunneledVars</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a></span></div></div><p>Creates a new continuation variable of type <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.MonadInfo.m">m</a> α</code> given the result type <code>α</code>.
The <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarInfo.tunneledVars">tunneledVars</a></code> is a superset of the <code>let</code>-bound variable names that the jumps will refer to.
Often it will be the <code>mut</code> variables. Leaving it empty inlines <code>let</code>-bound variables at jump sites.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkFreshContVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarId.find"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L348-L351">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.find"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">find</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">contVarId</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarInfo">ContVarInfo</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContVarId.find" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarId.mkJump"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L353-L360">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.mkJump"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">mkJump</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">contVarId</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Creates a new jump site for the continuation variable, to be synthesized later.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContVarId.mkJump" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarId.jumpCount"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L362-L365">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.jumpCount"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">jumpCount</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">contVarId</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a></span></div></div><p>The number of jump sites allocated for the continuation variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">contVarId</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.jumpCount">jumpCount</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">info</span> ← <span class="fn"><span class="fn">contVarId</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.find">find</a></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn">info</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarInfo.jumps">jumps</a></span>.<a href="../../.././Init/Prelude.html#Array.size">size</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContVarId.jumpCount" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarId.synthesizeJumps"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L367-L377">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.synthesizeJumps"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">synthesizeJumps</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">contVarId</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Synthesize the jump sites for the continuation variable.
<code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></code> is run once for each jump site, in the <code>LocalContext</code> of the jump site.
The result of <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></code> is used to fill in the jump site.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContVarId.synthesizeJumps" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarId.erase"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L379-L380">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.erase"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">erase</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">contVarId</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">contVarId</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.erase">erase</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Init/Prelude.html#modify">modify</a> <span class="fn">fun (<span class="fn">s</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State">Lean.Elab.Do.State</a>) =&gt;
    <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State.mk">{</a> <span class="fn">monadInstanceCache</span> := <span class="fn"><span class="fn">s</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State.monadInstanceCache">monadInstanceCache</a></span>, <span class="fn">contVars</span> := <span class="fn"><span class="fn"><span class="fn"><span class="fn">s</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State.contVars">contVars</a></span>.<a href="../../.././Std/Data/HashMap/Basic.html#Std.HashMap.erase">erase</a></span> <span class="fn">contVarId</span></span> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContVarId.erase" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.ContVarId.getReassignedMutVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L382-L389">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId.getReassignedMutVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">ContVarId</span>.<span class="name">getReassignedMutVars</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">contVarId</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContVarId">ContVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">rootCtx</span> : <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">(<a href="../../.././Std/Data/HashSet/Basic.html#Std.HashSet">Std.HashSet</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span></div></div><p>The subset of <code>(← read).<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.mutVars">mutVars</a></code> that were reassigned at any of the jump sites of the continuation
variable. The result array has the same order as <code>(← read).<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.mutVars">mutVars</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.ContVarId.getReassignedMutVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.withLCtxKeepingMutVarDefs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L391-L423">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.withLCtxKeepingMutVarDefs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">withLCtxKeepingMutVarDefs</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">oldCtx</span> : <a href="../../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">oldMutVars</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">resultName</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></div></div><p>Restores the local context to <code>oldCtx</code> and adds the new reaching definitions of the mut vars and
result. Then resume the continuation <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></code> with the <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.mutVars">mutVars</a></code> restored to the given <code>oldMutVars</code>.</p><p>This function is useful to de-nest</p><pre><code>let mut x := 0
let y := 3
let z ← <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a>
  let mut y ← e
  x := y + 1
  pure y
let y := y + 3
pure (x + y + z)
</code></pre><p>into</p><pre><code>let mut x := 0
let y := 3
let mut y† ← e
x := y† + 1
let z ← pure y†
let y := y + 3
pure (x + y + z)
</code></pre><p>Note that the continuation of the <code>let z ← ...</code> bind, roughly
<code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a> := .cont `z _ `(let y := y + 3; pure (x + y + z))</code>,
needs to elaborated in a local context that contains the reassignment of <code>x</code>, but not the shadowing
mut var definition of <code>y</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.withLCtxKeepingMutVarDefs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.DoElemCont.mkBindUnlessPure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L425-L430">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.mkBindUnlessPure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">mkBindUnlessPure</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">dec</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Return <code>$e &gt;&gt;= fun ($dec.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.resultName">resultName</a> : $dec.resultType) =&gt; $(← dec.k)</code>, cancelling
the bind if <code>$(← dec.k)</code> is <code>pure $dec.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.resultName">resultName</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">dec</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.mkBindUnlessPure">mkBindUnlessPure</a></span> <span class="fn">e</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkBindCancellingPure">Lean.Elab.Do.mkBindCancellingPure</a> <span class="fn"><span class="fn">dec</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.resultName">resultName</a></span> <span class="fn"><span class="fn">dec</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.resultType">resultType</a></span> <span class="fn">e</span> <span class="fn">fun (<span class="fn">x</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>) =&gt; <span class="fn"><span class="fn">dec</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.DoElemCont.mkBindUnlessPure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.DoElemCont.continueWithUnit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L432-L439">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.continueWithUnit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">continueWithUnit</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">dec</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Return <code>let $k.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.resultName">resultName</a> : <a href="../../.././Init/Prelude.html#PUnit">PUnit</a> := PUnit.unit; $(← k.k)</code>, ensuring that the result type of <code>k.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></code>
is <code><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></code> and then immediately zeta-reduce the <code>let</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.DoElemCont.continueWithUnit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.DoElemCont.withDuplicableCont"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L441-L504">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.withDuplicableCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElemCont</span>.<span class="name">withDuplicableCont</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">nondupDec</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">caller</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a> → <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Call <code>caller</code> with a duplicable proxy of <code>dec</code>.
When the proxy is elaborated more than once, a join point is introduced so that <code>dec</code> is only
elaborated once to fill in the RHS of this join point.</p><p>This is useful for control-flow constructs like <code>if</code> and <code>match</code>, where multiple tail-called
branches share the continuation.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.DoElemCont.withDuplicableCont" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.bindMutVarsFromTuple"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L506-L527">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.bindMutVarsFromTuple"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">bindMutVarsFromTuple</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">vars</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">tupleVar</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Given a list of mut vars <code>vars</code> and an FVar <code>tupleVar</code> binding a tuple, bind the mut vars to the
fields of the tuple and call <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></code> in the resulting local context.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.bindMutVarsFromTuple">Lean.Elab.Do.bindMutVarsFromTuple</a> <span class="fn">vars</span> <span class="fn">tupleVar</span> <span class="fn">k</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../../.././Init/Prelude.html#liftM">liftM</a> <span class="fn"><span class="fn">tupleVar</span>.<a href="../../.././Lean/Meta/Basic.html#Lean.FVarId.getType">getType</a></span></span>
  <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#_private.Lean.Elab.Do.Basic.0.Lean.Elab.Do.bindMutVarsFromTuple.go">Lean.Elab.Do.bindMutVarsFromTuple.go✝</a> <span class="fn">k</span> <span class="fn">vars</span> <span class="fn">tupleVar</span> <span class="fn">__do_lift</span> <a href="../../.././Init/Prelude.html#List.toArray">#[</a><a href="../../.././Init/Prelude.html#List.toArray">]</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.bindMutVarsFromTuple" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.getReturnCont"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L529-L530">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.getReturnCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getReturnCont</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.getReturnCont">Lean.Elab.Do.getReturnCont</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Init/Prelude.html#MonadReader.read">read</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.contInfo">contInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef.toContInfo">toContInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.returnCont">returnCont</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.getReturnCont" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.getBreakCont"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L532-L533">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.getBreakCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getBreakCont</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.getBreakCont">Lean.Elab.Do.getBreakCont</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Init/Prelude.html#MonadReader.read">read</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.contInfo">contInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef.toContInfo">toContInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.breakCont">breakCont</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.getBreakCont" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.getContinueCont"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L535-L536">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.getContinueCont"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">getContinueCont</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.getContinueCont">Lean.Elab.Do.getContinueCont</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Init/Prelude.html#MonadReader.read">read</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context.contInfo">contInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfoRef.toContInfo">toContInfo</a></span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.ContInfo.continueCont">continueCont</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.getContinueCont" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.withProxyMutVarDefs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L538-L562">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.withProxyMutVarDefs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">withProxyMutVarDefs</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span> → <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></div></div><p>Introduce proxy redefinitions for <em>all</em> mut vars and call the continuation <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont.k">k</a></code> with a function
<code>elimProxyDefs : Expr → MetaM Expr</code> similar to <code>mkLetFVars</code> that will replace the proxy defs with
the actual reassigned or original definitions.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.withProxyMutVarDefs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.enterLoopBody"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L564-L571">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.enterLoopBody"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">enterLoopBody</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">resultType</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">returnCont</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">breakCont </span><span class="fn">continueCont</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">body</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <span class="fn">α</span></span></div></div><p>Prepare the context for elaborating the body of a loop.
This includes setting the return continuation, break continuation, continue continuation, as
well as the changed result type of the <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> block in the loop body.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.enterLoopBody" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.withoutControl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L573-L582">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.withoutControl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">withoutControl</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Prepare the context for elaborating the body of a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> block that does not support <code>mut</code> vars,
<code>break</code>, <code>continue</code> or <code>return</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.withoutControl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.enterFinally"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L584-L590">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.enterFinally"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">enterFinally</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">resultType</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Prepare the context for elaborating the body of a <code>finally</code> block.
There is no support for <code>mut</code> vars, <code>break</code>, <code>continue</code> or <code>return</code> in a <code>finally</code> block.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.enterFinally" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkContext"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L627-L632">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkContext</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">expectedType?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElabM">TermElabM</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context">Context</a></span></div></div><p>Create the <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.Context">Context</a></code> for <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> elaboration from the given expected type of a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> block.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.SavedState"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L634-L640">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">SavedState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Backtrackable state for the <code>TermElabM</code> monad.</p><ul class="structure_fields" id="Lean.Elab.Do.SavedState.mk"><li id="Lean.Elab.Do.SavedState.term" class="structure_field"><div class="structure_field_info">term : <a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.SavedState">Term.SavedState</a></div></li><li id="Lean.Elab.Do.SavedState.do" class="structure_field"><div class="structure_field_info">do : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.State">State</a></div></li></ul><details id="instances-for-list-Lean.Elab.Do.SavedState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instNonemptySavedState"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L640-L640">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instNonemptySavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instNonemptySavedState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Nonempty">Nonempty</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState">SavedState</a></span></div></div></div></div><div class="decl" id="Lean.Elab.Do.SavedState.restore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L642-L644">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.restore"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">SavedState</span>.<span class="name">restore</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState">SavedState</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">s</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.restore">restore</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  <span class="fn"><a href="../../.././Init/Prelude.html#liftM">liftM</a> <span class="fn"><span class="fn"><span class="fn">s</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.term">term</a></span>.<a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.SavedState.restore">restore</a></span></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#MonadStateOf.set">set</a> <span class="fn"><span class="fn">s</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.SavedState.restore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.DoElabM.saveState"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L646-L647">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM.saveState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">DoElabM</span>.<span class="name">saveState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState">SavedState</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM.saveState">Lean.Elab.Do.DoElabM.saveState</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../../.././Init/Prelude.html#liftM">liftM</a> <a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.saveState">Lean.Elab.Term.saveState</a></span>
  let <span class="fn">__do_lift_1</span> ← <a href="../../.././Init/Prelude.html#MonadState.get">get</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.mk">{</a> <span class="fn">term</span> := <span class="fn">__do_lift</span>, <span class="fn">«do»</span> := <span class="fn">__do_lift_1</span> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.mk">}</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.DoElabM.saveState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.instMonadBacktrackSavedStateDoElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L649-L651">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instMonadBacktrackSavedStateDoElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">instMonadBacktrackSavedStateDoElabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Util/MonadBacktrack.html#Lean.MonadBacktrack">MonadBacktrack</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState">SavedState</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.instMonadBacktrackSavedStateDoElabM">Lean.Elab.Do.instMonadBacktrackSavedStateDoElabM</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <a href="../../.././Lean/Util/MonadBacktrack.html#Lean.MonadBacktrack.mk">{</a> <span class="fn">saveState</span> := <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM.saveState">Lean.Elab.Do.DoElabM.saveState</a>, <span class="fn">restoreState</span> := <span class="fn">fun (<span class="fn">b</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState">Lean.Elab.Do.SavedState</a>) =&gt; <span class="fn"><span class="fn">b</span>.<a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.restore">restore</a></span></span> <a href="../../.././Lean/Util/MonadBacktrack.html#Lean.MonadBacktrack.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkDoElemElabAttributeUnsafe"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L653-L654">source</a></div><div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkDoElemElabAttributeUnsafe"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkDoElemElabAttributeUnsafe</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">ref</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<a href="../../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">KeyedDeclsAttribute</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElab">DoElab</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkDoElemElabAttributeUnsafe">Lean.Elab.Do.mkDoElemElabAttributeUnsafe</a> <span class="fn">ref</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Lean/Elab/Util.html#Lean.Elab.mkElabAttribute">Lean.Elab.mkElabAttribute</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElab">Lean.Elab.Do.DoElab</a> <span class="fn">`builtin_doElem_elab</span> <span class="fn">`doElem_elab</span> <span class="fn">`Lean.Parser.Term.doElem</span>
    <span class="fn">`Lean.Elab.Do.DoElab</span> <span class="fn">&quot;do element&quot;</span> <span class="fn">ref</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.mkDoElemElabAttributeUnsafe" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.mkDoElemElabAttribute"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L656-L657">source</a></div><div class="attributes">@[implemented_by Lean.Elab.Do.mkDoElemElabAttributeUnsafe]</div>
<div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.mkDoElemElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">mkDoElemElabAttribute</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">ref</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<a href="../../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">KeyedDeclsAttribute</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElab">DoElab</a>)</span></span></div></div></div></div><div class="decl" id="Lean.Elab.Do.doElemElabAttribute"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L659-L673">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.doElemElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">doElemElabAttribute</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">KeyedDeclsAttribute</a> <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElab">DoElab</a></span></div></div><p>Registers a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> element elaborator for the given syntax node kind.</p><p>A <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> element elaborator should have type <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElab">DoElab</a></code> (which is
<code><a href="../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a> → <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> Expr</code>), i.e. should take syntax of the given syntax node kind
and a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></code> as parameters and produce an expression.</p><p>When elaborating a <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a></code> block <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.SavedState.do">do</a> e; rest</code>, the elaborator for <code>e</code> is invoked with the syntax of <code>e</code>
and the <code><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a></code> representing <code>rest</code>.</p><p>The <code>elab_rules</code> and <code>elab</code> commands should usually be preferred over using this attribute
directly.</p></div></div><div class="decl" id="Lean.Elab.Do.elabDoElem"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L692-L709">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabDoElem"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDoElem</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">stx</span> : <a href="../../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`doElem</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cont</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div></div></div><div class="decl" id="Lean.Elab.Do.elabDoElems1"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L711-L718">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabDoElems1"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDoElems1</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">doElems</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> (<a href="../../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`doElem</span>)</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cont</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabDoElems1" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.elabDoSeq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L720-L721">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabDoSeq"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDoSeq</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">doSeq</span> : <a href="../../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Term.doSeq</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cont</span> : <a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElemCont">DoElemCont</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.DoElabM">DoElabM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabDoSeq">Lean.Elab.Do.elabDoSeq</a> <span class="fn">doSeq</span> <span class="fn">cont</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabDoElems1">Lean.Elab.Do.elabDoElems1</a> <span class="fn">(<a href="../../.././Lean/Parser/Do.html#Lean.Parser.Term.getDoElems">Lean.Parser.Term.getDoElems</a> <span class="fn">doSeq</span>)</span> <span class="fn">cont</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabDoSeq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.dooBlock"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L723-L723">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.dooBlock"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">dooBlock</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.dooBlock">Lean.Elab.Do.dooBlock</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Init/Prelude.html#Lean.ParserDescr.node">Lean.ParserDescr.node</a> <span class="fn">`Lean.Elab.Do.dooBlock</span> <span class="fn">1023</span>
    <span class="fn">(<a href="../../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot;doo&quot;</span>)</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Lean.ParserDescr.const">Lean.ParserDescr.const</a> <span class="fn">`doSeq</span>)</span>)</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Do.dooBlock" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.elabDooBlock"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L725-L732">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabDooBlock"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDooBlock</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElab">Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabDooBlock" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Do.elabDo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Elab/Do/Basic.lean#L735-L742">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Elab/Do/Basic.html#Lean.Elab.Do.elabDo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Do</span>.<span class="name">elabDo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Elab/Term/TermElabM.html#Lean.Elab.Term.TermElab">Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Do.elabDo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>