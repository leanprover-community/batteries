<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Meta.SynthInstance</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Meta.SynthInstance";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Lean/Meta/AbstractMVars.html">Lean.Meta.AbstractMVars</a></li><li><a href="../.././Lean/Meta/Check.html">Lean.Meta.Check</a></li><li><a href="../.././Lean/Meta/Instances.html">Lean.Meta.Instances</a></li><li><a href="../.././Init/Data/Array/InsertionSort.html">Init.Data.Array.InsertionSort</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Meta.SynthInstance" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.synthInstance.maxHeartbeats"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance</span>.<span class="name">maxHeartbeats</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.synthInstance.maxSize"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance</span>.<span class="name">maxSize</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.backward.synthInstance.canonInstances"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">backward</span>.<span class="name">synthInstance</span>.<span class="name">canonInstances</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.getMaxHeartbeats"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getMaxHeartbeats</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.Instance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Instance</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedInstance.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedInstance</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedInstance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedInstance</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.GeneratorNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">GeneratorNode</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedGeneratorNode</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedGeneratorNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedGeneratorNode</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.ConsumerNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">ConsumerNode</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedConsumerNode.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedConsumerNode</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedConsumerNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedConsumerNode</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.Waiter"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Waiter</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.Waiter.isRoot"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Waiter</span>.<span class="name">isRoot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.MkTableKey.State"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.MkTableKey.M"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">M</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.MkTableKey.instMonadMCtxM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">instMonadMCtxM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.MkTableKey.normLevel"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">normLevel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.MkTableKey.normExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">normExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.mkTableKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">mkTableKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.Answer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Answer</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedAnswer</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedAnswer.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedAnswer</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.TableEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">TableEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.Context"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Context</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.State"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.SynthM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">SynthM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.checkSystem"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">checkSystem</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.instInhabitedSynthM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedSynthM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.getInstances"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getInstances</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.mkGeneratorNode?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">mkGeneratorNode?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.newSubgoal"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">newSubgoal</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.findEntry?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">findEntry?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.getEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.mkTableKeyFor"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">mkTableKeyFor</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.SubgoalsResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">SubgoalsResult</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.getSubgoals"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getSubgoals</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.tryResolve"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">tryResolve</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.tryAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">tryAnswer</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.wakeUp"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">wakeUp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.isNewAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">isNewAnswer</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.addAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">addAnswer</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.consume"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">consume</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.getTop"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getTop</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.modifyTop"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">modifyTop</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.generate"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">generate</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.getNextToResume"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getNextToResume</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.resume"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">resume</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.step"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">step</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.getResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getResult</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.synth"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">synth</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.SynthInstance.main"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">main</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.synthInstanceCore?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstanceCore?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.synthInstance?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.trySynthInstance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">trySynthInstance</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.throwFailedToSynthesize"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">throwFailedToSynthesize</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.synthInstance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance</span></a></div></nav><main>
<div class="decl" id="Lean.Meta.synthInstance.maxHeartbeats"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L20-L23">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance.maxHeartbeats"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance</span>.<span class="name">maxHeartbeats</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span></div></div></div></div><div class="decl" id="Lean.Meta.synthInstance.maxSize"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L25-L28">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance.maxSize"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance</span>.<span class="name">maxSize</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span></div></div></div></div><div class="decl" id="Lean.Meta.backward.synthInstance.canonInstances"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L30-L34">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.backward.synthInstance.canonInstances"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">backward</span>.<span class="name">synthInstance</span>.<span class="name">canonInstances</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div></div></div><div class="decl" id="Lean.Meta.SynthInstance.getMaxHeartbeats"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L38-L39">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getMaxHeartbeats"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getMaxHeartbeats</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">opts</span> : <a href="../.././Lean/Data/Options.html#Lean.Options">Options</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Nat">Nat</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getMaxHeartbeats">Lean.Meta.SynthInstance.getMaxHeartbeats</a> <span class="fn">opts</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option.get">Lean.Option.get</a> <span class="fn">opts</span> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance.maxHeartbeats">Lean.Meta.synthInstance.maxHeartbeats</a></span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">1000</span></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.getMaxHeartbeats" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.Instance"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L41-L44">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Instance</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.SynthInstance.Instance.mk"><li id="Lean.Meta.SynthInstance.Instance.val" class="structure_field"><div class="structure_field_info">val : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.SynthInstance.Instance.synthOrder" class="structure_field"><div class="structure_field_info">synthOrder : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.Instance" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedInstance.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L44-L44">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedInstance.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedInstance</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance">Instance</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedInstance.default">Lean.Meta.SynthInstance.instInhabitedInstance.default</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance.mk">{</a> <span class="fn">val</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">synthOrder</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.instInhabitedInstance.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedInstance"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L44-L44">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedInstance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedInstance</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance">Instance</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedInstance">Lean.Meta.SynthInstance.instInhabitedInstance</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedInstance.default">Lean.Meta.SynthInstance.instInhabitedInstance.default</a> <a href="../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.GeneratorNode"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L46-L60">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">GeneratorNode</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.SynthInstance.GeneratorNode.mk"><li id="Lean.Meta.SynthInstance.GeneratorNode.mvar" class="structure_field"><div class="structure_field_info">mvar : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.SynthInstance.GeneratorNode.key" class="structure_field"><div class="structure_field_info">key : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.SynthInstance.GeneratorNode.mctx" class="structure_field"><div class="structure_field_info">mctx : <a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a></div></li><li id="Lean.Meta.SynthInstance.GeneratorNode.instances" class="structure_field"><div class="structure_field_info">instances : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance">Instance</a></span></div></li><li id="Lean.Meta.SynthInstance.GeneratorNode.currInstanceIdx" class="structure_field"><div class="structure_field_info">currInstanceIdx : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li><li id="Lean.Meta.SynthInstance.GeneratorNode.typeHasMVars" class="structure_field"><div class="structure_field_info">typeHasMVars : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p><code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.typeHasMVars">typeHasMVars</a> := true</code> if type of <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mvar">mvar</a></code> contains metavariables.
We store this information to implement an optimization that relies on the fact
that instances are &quot;morally canonical.&quot;
That is, we need to find at most one answer for this generator node if the type
does not have metavariables.</p></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.GeneratorNode" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L60-L60">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedGeneratorNode</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode">GeneratorNode</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default">Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mk">{</a> <span class="fn">mvar</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">key</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">mctx</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">instances</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">currInstanceIdx</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>,
    <span class="fn">typeHasMVars</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedGeneratorNode"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L60-L60">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedGeneratorNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedGeneratorNode</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode">GeneratorNode</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedGeneratorNode">Lean.Meta.SynthInstance.instInhabitedGeneratorNode</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default">Lean.Meta.SynthInstance.instInhabitedGeneratorNode.default</a> <a href="../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.ConsumerNode"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L62-L68">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">ConsumerNode</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.SynthInstance.ConsumerNode.mk"><li id="Lean.Meta.SynthInstance.ConsumerNode.mvar" class="structure_field"><div class="structure_field_info">mvar : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.SynthInstance.ConsumerNode.key" class="structure_field"><div class="structure_field_info">key : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.SynthInstance.ConsumerNode.mctx" class="structure_field"><div class="structure_field_info">mctx : <a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a></div></li><li id="Lean.Meta.SynthInstance.ConsumerNode.subgoals" class="structure_field"><div class="structure_field_info">subgoals : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></li><li id="Lean.Meta.SynthInstance.ConsumerNode.size" class="structure_field"><div class="structure_field_info">size : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.ConsumerNode" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedConsumerNode.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L68-L68">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedConsumerNode.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedConsumerNode</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode">ConsumerNode</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedConsumerNode.default">Lean.Meta.SynthInstance.instInhabitedConsumerNode.default</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode.mk">{</a> <span class="fn">mvar</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">key</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">mctx</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">subgoals</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">size</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.instInhabitedConsumerNode.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedConsumerNode"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L68-L68">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedConsumerNode"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedConsumerNode</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode">ConsumerNode</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedConsumerNode">Lean.Meta.SynthInstance.instInhabitedConsumerNode</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedConsumerNode.default">Lean.Meta.SynthInstance.instInhabitedConsumerNode.default</a> <a href="../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.Waiter"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L70-L72">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Waiter</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="constructors"><li class="constructor" id="Lean.Meta.SynthInstance.Waiter.consumerNode">consumerNode : <span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode">ConsumerNode</a> → <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter">Waiter</a></span></li><li class="constructor" id="Lean.Meta.SynthInstance.Waiter.root">root : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter">Waiter</a></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.Waiter" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.Waiter.isRoot"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L74-L76">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter.isRoot"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Waiter</span>.<span class="name">isRoot</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter">Waiter</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter.consumerNode">Lean.Meta.SynthInstance.Waiter.consumerNode</a> <span class="fn">a</span>)</span>.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter.isRoot">isRoot</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></li><li class="equation"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter.root">Lean.Meta.SynthInstance.Waiter.root</a>.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter.isRoot">isRoot</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.Waiter.isRoot" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>In tabled resolution, we creating a mapping from goals (e.g., <code><a href="../.././Init/Coe.html#Coe">Coe</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> ?x</code>) to
answers and waiters. Waiters are consumer nodes that are waiting for answers for a
particular node.</p><p>We implement this mapping using a <code>HashMap</code> where the keys are
normalized expressions. That is, we replace assignable metavariables
with auxiliary free variables of the form <code>_tc.&lt;idx&gt;</code>. We do
not declare these free variables in any local context, and we should
view them as &quot;normalized names&quot; for metavariables. For example, the
term <code>f ?m ?m ?n</code> is normalized as
<code>f _tc.0 _tc.0 _tc.1</code>.</p><p>This approach is structural, and we may visit the same goal more
than once if the different occurrences are just definitionally
equal, but not structurally equal.</p><p>Remark: a metavariable is assignable only if its depth is equal to
the metavar context depth.</p></div><div class="decl" id="Lean.Meta.SynthInstance.MkTableKey.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L100-L104">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.State"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.SynthInstance.MkTableKey.State.mk"><li id="Lean.Meta.SynthInstance.MkTableKey.State.nextIdx" class="structure_field"><div class="structure_field_info">nextIdx : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li><li id="Lean.Meta.SynthInstance.MkTableKey.State.lmap" class="structure_field"><div class="structure_field_info">lmap : <span class="fn"><a href="../.././Std/Data/HashMap/Basic.html#Std.HashMap">Std.HashMap</a> <a href="../.././Lean/Level.html#Lean.LMVarId">LMVarId</a> <a href="../.././Lean/Level.html#Lean.Level">Level</a></span></div></li><li id="Lean.Meta.SynthInstance.MkTableKey.State.emap" class="structure_field"><div class="structure_field_info">emap : <span class="fn"><a href="../.././Std/Data/HashMap/Basic.html#Std.HashMap">Std.HashMap</a> <a href="../.././Lean/Expr.html#Lean.MVarId">MVarId</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></li><li id="Lean.Meta.SynthInstance.MkTableKey.State.mctx" class="structure_field"><div class="structure_field_info">mctx : <a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.MkTableKey.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.MkTableKey.M"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L106-L106">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.M"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">M</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.M">Lean.Meta.SynthInstance.MkTableKey.M</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Control/State.html#StateM">StateM</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.State">Lean.Meta.SynthInstance.MkTableKey.State</a></span></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.MkTableKey.M" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.MkTableKey.instMonadMCtxM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L108-L111">source</a></div><div class="attributes">@[always_inline]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.instMonadMCtxM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">instMonadMCtxM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.M">M</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.MkTableKey.normLevel"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L113-L131">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.normLevel"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">normLevel</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">u</span> : <a href="../.././Lean/Level.html#Lean.Level">Level</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.M">M</a> <a href="../.././Lean/Level.html#Lean.Level">Level</a></span></div></div></div></div><div class="decl" id="Lean.Meta.SynthInstance.MkTableKey.normExpr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L133-L156">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.normExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">MkTableKey</span>.<span class="name">normExpr</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.M">M</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div></div></div><div class="decl" id="Lean.Meta.SynthInstance.mkTableKey"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L160-L164">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.mkTableKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">mkTableKey</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Remark: <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.mkTableKey">mkTableKey</a></code> assumes <code>e</code> does not contain assigned metavariables.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.mkTableKey" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.Answer"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L166-L170">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Answer</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.SynthInstance.Answer.mk"><li id="Lean.Meta.SynthInstance.Answer.result" class="structure_field"><div class="structure_field_info">result : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult">AbstractMVarsResult</a></div></li><li id="Lean.Meta.SynthInstance.Answer.resultType" class="structure_field"><div class="structure_field_info">resultType : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.SynthInstance.Answer.size" class="structure_field"><div class="structure_field_info">size : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.Answer" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedAnswer"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L170-L170">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedAnswer</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedAnswer">Lean.Meta.SynthInstance.instInhabitedAnswer</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedAnswer.default">Lean.Meta.SynthInstance.instInhabitedAnswer.default</a> <a href="../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedAnswer.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L170-L170">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedAnswer.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedAnswer</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedAnswer.default">Lean.Meta.SynthInstance.instInhabitedAnswer.default</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer.mk">{</a> <span class="fn">result</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">resultType</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a>, <span class="fn">size</span> := <a href="../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.instInhabitedAnswer.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.TableEntry"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L172-L174">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.TableEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">TableEntry</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.SynthInstance.TableEntry.mk"><li id="Lean.Meta.SynthInstance.TableEntry.waiters" class="structure_field"><div class="structure_field_info">waiters : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter">Waiter</a></span></div></li><li id="Lean.Meta.SynthInstance.TableEntry.answers" class="structure_field"><div class="structure_field_info">answers : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a></span></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.TableEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.Context"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L176-L178">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Context"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">Context</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.SynthInstance.Context.mk"><li id="Lean.Meta.SynthInstance.Context.maxResultSize" class="structure_field"><div class="structure_field_info">maxResultSize : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li><li id="Lean.Meta.SynthInstance.Context.maxHeartbeats" class="structure_field"><div class="structure_field_info">maxHeartbeats : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.Context" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L180-L191">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.State"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Remark: the SynthInstance.State is not really an extension of <code>Meta.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.State">State</a></code>.
The field <code>postponed</code> is not needed, and the field <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mctx">mctx</a></code> is misleading since
<code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance">synthInstance</a></code> methods operate over different <code>MetavarContext</code>s simultaneously.
That being said, we still use <code>extends</code> because it makes it simpler to move from
<code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.MkTableKey.M">M</a></code> to <code>MetaM</code>.</p><ul class="structure_fields" id="Lean.Meta.SynthInstance.State.mk"><li id="Lean.Meta.SynthInstance.State.result?" class="structure_field"><div class="structure_field_info">result? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult">AbstractMVarsResult</a></span></div></li><li id="Lean.Meta.SynthInstance.State.generatorStack" class="structure_field"><div class="structure_field_info">generatorStack : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode">GeneratorNode</a></span></div></li><li id="Lean.Meta.SynthInstance.State.resumeStack" class="structure_field"><div class="structure_field_info">resumeStack : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> (<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode">ConsumerNode</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a>)</span></div></li><li id="Lean.Meta.SynthInstance.State.tableEntries" class="structure_field"><div class="structure_field_info">tableEntries : <span class="fn"><a href="../.././Std/Data/HashMap/Basic.html#Std.HashMap">Std.HashMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.TableEntry">TableEntry</a></span></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.SynthM"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L193-L193">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">SynthM</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">Lean.Meta.SynthInstance.SynthM</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Context">Lean.Meta.SynthInstance.Context</a> <span class="fn">(<a href="../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.State">Lean.Meta.SynthInstance.State</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a>)</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.SynthM" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.checkSystem"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L195-L197">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.checkSystem"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">checkSystem</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.checkSystem" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.instInhabitedSynthM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L199-L200">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedSynthM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">instInhabitedSynthM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.instInhabitedSynthM">Lean.Meta.SynthInstance.instInhabitedSynthM</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Init/Prelude.html#Inhabited.mk">{</a>     <span class="fn">default</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Context">Lean.Meta.SynthInstance.Context</a>) (<span class="fn">x_1</span> : <span class="fn"><a href="../.././Init/System/ST.html#ST.Ref">ST.Ref</a> <a href="../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.State">Lean.Meta.SynthInstance.State</a></span>) =&gt;
      <a href="../.././Init/Prelude.html#Inhabited.default">default</a></span> <a href="../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.getInstances"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L202-L242">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getInstances"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getInstances</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance">Instance</a>)</span></span></div></div><p>Return globals and locals instances that may unify with <code>type</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.getInstances" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.mkGeneratorNode?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L244-L256">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.mkGeneratorNode?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">mkGeneratorNode?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">key </span><span class="fn">mvar</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode">GeneratorNode</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.mkGeneratorNode?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.newSubgoal"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L258-L271">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.newSubgoal"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">newSubgoal</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">key </span><span class="fn">mvar</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">waiter</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter">Waiter</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Create a new generator node for <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mvar">mvar</a></code> and add <code>waiter</code> as its waiter.
<code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.key">key</a></code> must be <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.mkTableKey">mkTableKey</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mctx">mctx</a> mvarType</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.newSubgoal" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.findEntry?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L273-L274">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.findEntry?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">findEntry?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">key</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.TableEntry">TableEntry</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.findEntry?">Lean.Meta.SynthInstance.findEntry?</a> <span class="fn">key</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../.././Init/Prelude.html#MonadState.get">get</a>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">__do_lift</span>.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.State.tableEntries">tableEntries</a></span><a href="../.././Init/GetElem.html#GetElem?.getElem?">[</a><span class="fn">key</span><a href="../.././Init/GetElem.html#GetElem?.getElem?">]</a><a href="../.././Init/GetElem.html#GetElem?.getElem?">?</a></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.findEntry?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.getEntry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L276-L279">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getEntry</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">key</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.TableEntry">TableEntry</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.getEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.mkTableKeyFor"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L281-L290">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.mkTableKeyFor"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">mkTableKeyFor</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mvar</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Create a <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.key">key</a></code> for the goal associated with the given metavariable.
That is, we create a key for the type of the metavariable.</p><p>We must instantiate assigned metavariables before we invoke <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.mkTableKey">mkTableKey</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.mkTableKeyFor" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.SubgoalsResult"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L292-L301">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SubgoalsResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">SubgoalsResult</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>See <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getSubgoals">getSubgoals</a></code> and <code>getSubgoalsAux</code></p><p>We use the parameter <code>j</code> to reduce the number of <code>instantiate*</code> invocations.
It is the same approach we use at <code>forallTelescope</code> and <code>lambdaTelescope</code>.
Given <code>getSubgoalsAux args j <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode.subgoals">subgoals</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SubgoalsResult.instVal">instVal</a> type</code>,
we have that <code>type.instantiateRevRange j args.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode.size">size</a> args</code> does not have loose bound variables.</p><ul class="structure_fields" id="Lean.Meta.SynthInstance.SubgoalsResult.mk"><li id="Lean.Meta.SynthInstance.SubgoalsResult.subgoals" class="structure_field"><div class="structure_field_info">subgoals : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></li><li id="Lean.Meta.SynthInstance.SubgoalsResult.instVal" class="structure_field"><div class="structure_field_info">instVal : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.SynthInstance.SubgoalsResult.instTypeBody" class="structure_field"><div class="structure_field_info">instTypeBody : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li></ul><details id="instances-for-list-Lean.Meta.SynthInstance.SubgoalsResult" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.getSubgoals"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L303-L340">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getSubgoals"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getSubgoals</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">lctx</span> : <a href="../.././Lean/LocalContext.html#Lean.LocalContext">LocalContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">localInsts</span> : <a href="../.././Lean/MetavarContext.html#Lean.LocalInstances">LocalInstances</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">xs</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">inst</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance">Instance</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SubgoalsResult">SubgoalsResult</a></span></div></div><p><code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getSubgoals">getSubgoals</a> lctx localInsts xs inst</code> creates the subgoals for the instance <code>inst</code>.
The subgoals are in the context of the free variables <code>xs</code>, and
<code>(lctx, localInsts)</code> is the local context and instances before we added the free variables to it.</p><p>This extra complication is required because
1- We want all metavariables created by <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance">synthInstance</a></code> to share the same local context.
2- We want to ensure that applications such as <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mvar">mvar</a> xs</code> are higher order patterns.</p><p>The method <code>getGoals</code> create a new metavariable for each parameter of <code>inst</code>.
For example, suppose the type of <code>inst</code> is <code>forall (x_1 : A_1) ... (x_n : A_n), B x_1 ... x_n</code>.
Then, we create the metavariables <code>?m_i : forall xs, A_i</code>, and return the subset of these
metavariables that are instance implicit arguments, and the expressions:</p><ul>
<li><code>inst (?m_1 xs) ... (?m_n xs)</code> (aka <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SubgoalsResult.instVal">instVal</a></code>)</li>
<li><code>B (?m_1 xs) ... (?m_n xs)</code></li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.getSubgoals" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.tryResolve"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L342-L378">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.tryResolve"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">tryResolve</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvar</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">inst</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Instance">Instance</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> (<a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span>))</span></span></div></div><p>Try to synthesize metavariable <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mvar">mvar</a></code> using the instance <code>inst</code>.
Remark: <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mctx">mctx</a></code> is set using <code>withMCtx</code>.
If it succeeds, the result is a new updated metavariable context and a new list of subgoals.
A subgoal is created for each instance implicit parameter of <code>inst</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.tryResolve" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.tryAnswer"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L380-L389">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.tryAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">tryAnswer</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mvar</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">answer</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span></div></div><p>Assign a precomputed answer to <code><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode.mvar">mvar</a></code>.
If it succeeds, the result is a new updated metavariable context and a new list of subgoals.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.tryAnswer" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.wakeUp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L391-L404">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.wakeUp"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">wakeUp</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">answer</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Waiter">Waiter</a> → <span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></span></div></div><p>Move waiters that are waiting for the given answer to the resume stack.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.wakeUp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.isNewAnswer"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L406-L410">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.isNewAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">isNewAnswer</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">oldAnswers</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">answer</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.isNewAnswer">Lean.Meta.SynthInstance.isNewAnswer</a> <span class="fn">oldAnswers</span> <span class="fn">answer</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><span class="fn"><span class="fn">oldAnswers</span>.<a href="../.././Init/Data/Array/Basic.html#Array.all">all</a></span> <span class="fn">fun (<span class="fn">oldAnswer</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Lean.Meta.SynthInstance.Answer</a>) =&gt; <span class="fn"><span class="fn">oldAnswer</span>.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer.resultType">resultType</a></span> <a href="../.././Init/Core.html#bne">!=</a> <span class="fn"><span class="fn">answer</span>.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer.resultType">resultType</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.isNewAnswer" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.addAnswer"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L420-L438">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.addAnswer"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">addAnswer</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">cNode</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode">ConsumerNode</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Create a new answer after <code>cNode</code> resolved all subgoals.
That is, <code>cNode.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode.subgoals">subgoals</a> == []</code>.
And then, store it in the tabled entries map, and wakeup waiters.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.addAnswer" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.consume"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L492-L540">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.consume"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">consume</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">cNode</span> : <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode">ConsumerNode</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Process the next subgoal in the given consumer node.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.consume" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.getTop"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L542-L543">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getTop"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getTop</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode">GeneratorNode</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getTop">Lean.Meta.SynthInstance.getTop</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../.././Init/Prelude.html#MonadState.get">get</a>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn">__do_lift</span>.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.State.generatorStack">generatorStack</a></span>.<a href="../.././Init/Data/Array/Basic.html#Array.back!">back!</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.getTop" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.modifyTop"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L545-L546">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.modifyTop"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">modifyTop</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode">GeneratorNode</a> → <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.GeneratorNode">GeneratorNode</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.modifyTop" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.generate"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L548-L584">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.generate"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">generate</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Try the next instance in the node on the top of the generator stack.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.generate" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.getNextToResume"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L586-L589">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getNextToResume"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getNextToResume</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> (<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.ConsumerNode">ConsumerNode</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Answer">Answer</a>)</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.getNextToResume" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.resume"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L591-L609">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.resume"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">resume</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Given <code>(cNode, answer)</code> on the top of the resume stack, continue execution by using <code>answer</code> to solve the
next subgoal.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.resume" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.step"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L611-L621">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.step"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">step</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.step" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.getResult"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L623-L624">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">getResult</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult">AbstractMVarsResult</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.getResult">Lean.Meta.SynthInstance.getResult</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../.././Init/Prelude.html#MonadState.get">get</a>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">__do_lift</span>.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.State.result?">result?</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.getResult" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.SynthInstance.synth"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L626-L632">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.synth"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">synth</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.SynthM">SynthM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult">AbstractMVarsResult</a>)</span></span></div></div></div></div><div class="decl" id="Lean.Meta.SynthInstance.main"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L634-L647">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.main"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">SynthInstance</span>.<span class="name">main</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">maxResultSize</span> : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult">AbstractMVarsResult</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.SynthInstance.main" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>Type class parameters can be annotated with <code><a href="../.././Init/Prelude.html#outParam">outParam</a></code> annotations.</p><p>Given <code>C a_1 ... a_n</code>, we replace <code>a_i</code> with a fresh metavariable <code>?m_i</code> IF
<code>a_i</code> is an <code><a href="../.././Init/Prelude.html#outParam">outParam</a></code>.
The result is type correct because we reject type class declarations IF
it contains a regular parameter X that depends on an <code>out</code> parameter Y.</p><p>Then, we execute type class resolution as usual.
If it succeeds, and metavariables ?m_i have been assigned, we try to unify
the original type <code>C a_1 ... a_n</code> with the normalized one.</p></div><div class="mod_doc"><p>Remark: when <code>maxResultSize? == none</code>, the configuration option <code>synthInstance.<a href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.SynthInstance.Context.maxResultSize">maxResultSize</a></code> is used.
Remark: we use a different option for controlling the maximum result size for coercions.</p></div><div class="decl" id="Lean.Meta.synthInstanceCore?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L784-L808">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstanceCore?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstanceCore?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">maxResultSize?</span> : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span> := <a href="../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.synthInstanceCore?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.synthInstance?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L810-L811">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance?"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance?</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">maxResultSize?</span> : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span> := <a href="../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.synthInstance?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.trySynthInstance"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L813-L819">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.trySynthInstance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">trySynthInstance</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">maxResultSize?</span> : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span> := <a href="../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../.././Lean/Data/LOption.html#Lean.LOption">LOption</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span></div></div><p>Return <code>LOption.some r</code> if succeeded, <code>LOption.none</code> if it failed, and <code>LOption.undef</code> if
instance cannot be synthesized right now because <code>type</code> contains metavariables.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.trySynthInstance" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.throwFailedToSynthesize"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L821-L822">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.throwFailedToSynthesize"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">throwFailedToSynthesize</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.throwFailedToSynthesize" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.synthInstance"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/SynthInstance.lean#L824-L831">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthInstance</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">type</span> : <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">maxResultSize?</span> : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span> := <a href="../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.synthInstance" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>