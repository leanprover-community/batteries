<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Meta.Tactic.AuxLemma</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Lean.Meta.Tactic.AuxLemma";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Tactic</span>.<span class="name">AuxLemma</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Lean/AddDecl.html">Lean.AddDecl</a></li><li><a href="../../.././Lean/DefEqAttrib.html">Lean.DefEqAttrib</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Meta.Tactic.AuxLemma" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.AuxLemmaKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">AuxLemmaKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instBEqAuxLemmaKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instBEqAuxLemmaKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instBEqAuxLemmaKey.beq"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instBEqAuxLemmaKey</span>.<span class="name">beq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instHashableAuxLemmaKey.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instHashableAuxLemmaKey</span>.<span class="name">hash</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instHashableAuxLemmaKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instHashableAuxLemmaKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.AuxLemmas"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">AuxLemmas</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instInhabitedAuxLemmas"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedAuxLemmas</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.instInhabitedAuxLemmas.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedAuxLemmas</span>.<span class="name">default</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.auxLemmasExt"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">auxLemmasExt</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.mkAuxLemma"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">mkAuxLemma</span></a></div></nav><main>
<div class="decl" id="Lean.Meta.AuxLemmaKey"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L16-L21">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">AuxLemmaKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.AuxLemmaKey.mk"><li id="Lean.Meta.AuxLemmaKey.type" class="structure_field"><div class="structure_field_info">type : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></div></li><li id="Lean.Meta.AuxLemmaKey.isPrivate" class="structure_field"><div class="structure_field_info">isPrivate : <a href="../../.././Init/Prelude.html#Bool">Bool</a></div></li></ul><details id="instances-for-list-Lean.Meta.AuxLemmaKey" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.instBEqAuxLemmaKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L21-L21">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instBEqAuxLemmaKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instBEqAuxLemmaKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey">AuxLemmaKey</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instBEqAuxLemmaKey">Lean.Meta.instBEqAuxLemmaKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#BEq.mk">{</a> <span class="fn">beq</span> := <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instBEqAuxLemmaKey.beq">Lean.Meta.instBEqAuxLemmaKey.beq</a> <a href="../../.././Init/Prelude.html#BEq.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.instBEqAuxLemmaKey.beq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L21-L21">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instBEqAuxLemmaKey.beq"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instBEqAuxLemmaKey</span>.<span class="name">beq</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey">AuxLemmaKey</a> → <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey">AuxLemmaKey</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instBEqAuxLemmaKey.beq">Lean.Meta.instBEqAuxLemmaKey.beq</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey.mk">{</a> <span class="fn">type</span> := <span class="fn">a</span>, <span class="fn">isPrivate</span> := <span class="fn">a_1</span> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey.mk">}</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey.mk">{</a> <span class="fn">type</span> := <span class="fn">b</span>, <span class="fn">isPrivate</span> := <span class="fn">b_1</span> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey.mk">}</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   (<span class="fn">a</span> <a href="../../.././Init/Prelude.html#BEq.beq">==</a> <span class="fn">b</span> <a href="../../.././Init/Prelude.html#Bool.and">&amp;&amp;</a> <span class="fn">a_1</span> <a href="../../.././Init/Prelude.html#BEq.beq">==</a> <span class="fn">b_1</span>)</li><li class="equation"><span class="fn"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instBEqAuxLemmaKey.beq">Lean.Meta.instBEqAuxLemmaKey.beq</a> <span class="fn">x✝¹</span> <span class="fn">x✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></li></ul></details><details id="instances-for-list-Lean.Meta.instBEqAuxLemmaKey.beq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.instHashableAuxLemmaKey.hash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L21-L21">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instHashableAuxLemmaKey.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instHashableAuxLemmaKey</span>.<span class="name">hash</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey">AuxLemmaKey</a> → <a href="../../.././Init/Prelude.html#UInt64">UInt64</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instHashableAuxLemmaKey.hash">Lean.Meta.instHashableAuxLemmaKey.hash</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey.mk">{</a> <span class="fn">type</span> := <span class="fn">a</span>, <span class="fn">isPrivate</span> := <span class="fn">a_1</span> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey.mk">}</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#mixHash">mixHash</a> <span class="fn">(<a href="../../.././Init/Prelude.html#mixHash">mixHash</a> <span class="fn">0</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Hashable.hash">hash</a> <span class="fn">a</span>)</span>)</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Hashable.hash">hash</a> <span class="fn">a_1</span>)</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.instHashableAuxLemmaKey.hash" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.instHashableAuxLemmaKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L21-L21">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instHashableAuxLemmaKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instHashableAuxLemmaKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Hashable">Hashable</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey">AuxLemmaKey</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instHashableAuxLemmaKey">Lean.Meta.instHashableAuxLemmaKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Hashable.mk">{</a> <span class="fn">hash</span> := <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instHashableAuxLemmaKey.hash">Lean.Meta.instHashableAuxLemmaKey.hash</a> <a href="../../.././Init/Prelude.html#Hashable.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.AuxLemmas"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L23-L25">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmas"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">AuxLemmas</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.AuxLemmas.mk"><li id="Lean.Meta.AuxLemmas.lemmas" class="structure_field"><div class="structure_field_info">lemmas : <span class="fn"><a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PHashMap">PHashMap</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey">AuxLemmaKey</a> (<a href="../../.././Init/Prelude.html#Lean.Name">Name</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></div></li></ul><details id="instances-for-list-Lean.Meta.AuxLemmas" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.instInhabitedAuxLemmas"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L25-L25">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instInhabitedAuxLemmas"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedAuxLemmas</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmas">AuxLemmas</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instInhabitedAuxLemmas">Lean.Meta.instInhabitedAuxLemmas</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">{</a> <span class="fn">default</span> := <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instInhabitedAuxLemmas.default">Lean.Meta.instInhabitedAuxLemmas.default</a> <a href="../../.././Init/Prelude.html#Inhabited.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.instInhabitedAuxLemmas.default"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L25-L25">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instInhabitedAuxLemmas.default"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">instInhabitedAuxLemmas</span>.<span class="name">default</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmas">AuxLemmas</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.instInhabitedAuxLemmas.default">Lean.Meta.instInhabitedAuxLemmas.default</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmas.mk">{</a> <span class="fn">lemmas</span> := <a href="../../.././Init/Prelude.html#Inhabited.default">default</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmas.mk">}</a></li></ul></details><details id="instances-for-list-Lean.Meta.instInhabitedAuxLemmas.default" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.auxLemmasExt"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L27-L28">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.auxLemmasExt"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">auxLemmasExt</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Environment.html#Lean.EnvExtension">EnvExtension</a> <a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmas">AuxLemmas</a></span></div></div></div></div><div class="decl" id="Lean.Meta.mkAuxLemma"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/AuxLemma.lean#L30-L76">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.mkAuxLemma"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">mkAuxLemma</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">levelParams</span> : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">type </span><span class="fn">value</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">kind?</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span> := <a href="../../.././Init/Prelude.html#Option.none">none</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">cache</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">inferRfl </span><span class="fn">forceExpose</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></div></div><p>Helper method for creating auxiliary lemmas in the environment.</p><p>It uses a cache that maps <code><a href="../../.././Lean/Meta/Tactic/AuxLemma.html#Lean.Meta.AuxLemmaKey.type">type</a></code> to declaration name. The cache is not stored in <code>.olean</code> files.
It is useful to make sure the same auxiliary lemma is not created over and over again in the same
environment branch. For expensive auxiliary lemmas that should be deduplicated even across
different environment branches, consider using <code>realizeConst</code> instead.</p><p>This method is useful for tactics (e.g., <code>simp</code>) that may perform preprocessing steps to lemmas provided by
users. For example, <code>simp</code> preprocessor may convert a lemma into multiple ones.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.mkAuxLemma" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>