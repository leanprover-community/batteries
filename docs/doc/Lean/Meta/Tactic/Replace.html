<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Meta.Tactic.Replace</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Lean.Meta.Tactic.Replace";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Tactic</span>.<span class="name">Replace</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Lean/Meta/AppBuilder.html">Lean.Meta.AppBuilder</a></li><li><a href="../../.././Lean/Meta/MatchUtil.html">Lean.Meta.MatchUtil</a></li><li><a href="../../.././Lean/Elab/InfoTree/Main.html">Lean.Elab.InfoTree.Main</a></li><li><a href="../../.././Lean/Meta/Tactic/Assert.html">Lean.Meta.Tactic.Assert</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Meta.Tactic.Replace" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.replaceTargetEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceTargetEq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.replaceTargetDefEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceTargetDefEq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.replaceLocalDecl"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceLocalDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.replaceLocalDeclDefEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceLocalDeclDefEq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.change"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">change</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.withReverted"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">withReverted</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.withRevertedFrom"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">withRevertedFrom</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.changeLocalDecl"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">changeLocalDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.modifyTarget"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">modifyTarget</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.modifyTargetEqLHS"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">modifyTargetEqLHS</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.clearValue"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">clearValue</span></a></div></nav><main>
<div class="decl" id="Lean.MVarId.replaceTargetEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L18-L32">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.replaceTargetEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceTargetEq</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">targetNew </span><span class="fn">eqProof</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Convert the given goal <code>Ctx |- target</code> into <code>Ctx |- targetNew</code> using an equality proof <code>eqProof : target = targetNew</code>.
It assumes <code>eqProof</code> has type <code>target = targetNew</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.replaceTargetEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.replaceTargetDefEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L34-L56">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.replaceTargetDefEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceTargetDefEq</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">targetNew</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Converts the given goal <code>Ctx |- target</code> into <code>Ctx |- targetNew</code>. It assumes the goals are definitionally equal.
We use the proof term</p><pre><code>@id target mvarNew
</code></pre><p>to create a checkpoint.</p><p>If <code>targetNew</code> is equal to <code>target</code>, then returns <code>mvarId</code> unchanged.
Uses <code>Expr.equal</code> for the comparison so that it is possible to update binder names, etc., which are user-visible.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.replaceTargetDefEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.replaceLocalDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L82-L98">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.replaceLocalDecl"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceLocalDecl</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarId</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">typeNew </span><span class="fn">eqProof</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Meta/Tactic/Assert.html#Lean.Meta.AssertAfterResult">Meta.AssertAfterResult</a></span></div></div><p>Replace type of the local declaration with id <code>fvarId</code> with one with the same user-facing name, but with type <code>typeNew</code>.
This method assumes <code>eqProof</code> is a proof that the type of <code>fvarId</code> is equal to <code>typeNew</code>.
This tactic actually adds a new declaration and (tries to) clear the old one.
If the old one cannot be cleared, then at least its user-facing name becomes inaccessible.</p><p>The new local declaration is inserted at the soonest point after <code>fvarId</code> at which it is
well-formed. That is, if <code>typeNew</code> involves declarations which occur later than <code>fvarId</code> in the
local context, the new local declaration will be inserted immediately after the latest-occurring
one. Otherwise, it will be inserted immediately after <code>fvarId</code>.</p><p>Note: <code><a href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.replaceLocalDecl">replaceLocalDecl</a></code> should not be used when unassigned pending mvars might be present in
<code>typeNew</code>, as these may later be synthesized to fvars which occur after <code>fvarId</code> (by e.g.
<code>Term.withSynthesize</code> or <code>Term.synthesizeSyntheticMVars</code>) .</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.replaceLocalDecl">replaceLocalDecl</a></span> <span class="fn">fvarId</span> <span class="fn">typeNew</span> <span class="fn">eqProof</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/Meta/Tactic/Replace.html#_private.Lean.Meta.Tactic.Replace.0.Lean.Meta.replaceLocalDeclCore">Lean.Meta.replaceLocalDeclCore✝</a> <span class="fn">mvarId</span> <span class="fn">fvarId</span> <span class="fn">typeNew</span> <span class="fn">eqProof</span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.replaceLocalDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.replaceLocalDeclDefEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L100-L120">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.replaceLocalDeclDefEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">replaceLocalDeclDefEq</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarId</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">typeNew</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Replaces the type of <code>fvarId</code> at <code>mvarId</code> with <code>typeNew</code>.
Remark: this method assumes that <code>typeNew</code> is definitionally equal to the current type of <code>fvarId</code>.</p><p>If <code>typeNew</code> is equal to current type of <code>fvarId</code>, then returns <code>mvarId</code> unchanged.
Uses <code>Expr.equal</code> for the comparison so that it is possible to update binder names, etc., which are user-visible.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.replaceLocalDeclDefEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.change"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L122-L132">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.change"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">change</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">targetNew</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">checkDefEq</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Replace the target type of <code>mvarId</code> with <code>typeNew</code>.
If <code>checkDefEq = false</code>, this method assumes that <code>typeNew</code> is definitionally equal to the current target type.
If <code>checkDefEq = true</code>, throw an error if <code>typeNew</code> is not definitionally equal to the current target type.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.change" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.withReverted"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L134-L174">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.withReverted"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">withReverted</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarIds</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span> → <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">clearAuxDeclsInsteadOfRevert</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></div></div><p>Executes the revert/intro pattern, running the continuation <code>k</code> after temporarily reverting
the given local variables from the local context of the metavariable <code>mvarId</code>,
and then re-introducing the local variables specified by <code>k</code>.</p><ul>
<li><code>mvarId</code> is the goal metavariable to operate on.</li>
<li><code>fvarIds</code> is an array of <code>fvarIds</code> to revert in the order specified.
An error is thrown if they cannot be reverted in order.</li>
<li><code>clearAuxDeclsInsteadOfRevert</code> is configuration passed to <code><a href="../../.././Lean/Meta/Tactic/Revert.html#Lean.MVarId.revert">Lean.MVarId.revert</a></code>.</li>
<li><code>k</code> is the continuation run once the local variables have been reverted.
It is provided <code>mvarId</code> after the requested variables have been reverted along with the array of reverted variables.
This array always contains <code>fvarIds</code>, but it may contain additional variables that were reverted due to dependencies.
The continuation returns a value, a new goal, and an <em>aliasing array</em>.</li>
</ul><p>Once <code>k</code> has completed, one variable is introduced per entry in the aliasing array.</p><ul>
<li>If the entry is <code>none</code>, the variable is just introduced.</li>
<li>If the entry is <code>some fv</code> (where <code>fv</code> is a variable from <code>fvarIds</code>),
the variable is introduced and then recorded as an alias of <code>fv</code> in the info tree.
This for example causes the unused variable linter as seeing <code>fv</code> and this newly introduced variable as being &quot;the same&quot;.</li>
</ul><p>For example, if <code>k</code> leaves all the reverted variables in the same order,
having it return <code>fvars.map .some</code> as the aliasing array causes those variables to be re-introduced and aliased
to the original local variables.</p><p>Returns the value returned by <code>k</code> along with the resulting goal after variable introduction.</p><p>See <code><a href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.changeLocalDecl">Lean.MVarId.changeLocalDecl</a></code> for an example. The motivation is that to work on a local variable,
you need to move it into the goal, alter the goal, and then bring it back into the local context,
all while keeping track of any other local variables that depend on this one.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.withReverted" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.withRevertedFrom"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L176-L188">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.withRevertedFrom"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">withRevertedFrom</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarId</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span> → <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> (<span class="fn">α</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></div></div><p>Like <code><a href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.withReverted">Lean.MVarId.withReverted</a></code>, but reverts all local variables starting from <code>fvarId</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.withRevertedFrom" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.changeLocalDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L190-L212">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.changeLocalDecl"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">changeLocalDecl</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarId</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">typeNew</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">checkDefEq</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Replaces the type of the free variable <code>fvarId</code> with <code>typeNew</code>.</p><p>If <code>checkDefEq</code> is <code>true</code> then an error is thrown if <code>typeNew</code> is not definitionally
equal to the type of <code>fvarId</code>. Otherwise this function assumes <code>typeNew</code> and the type
of <code>fvarId</code> are definitionally equal.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.changeLocalDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.modifyTarget"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L214-L220">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.modifyTarget"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">modifyTarget</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Modify <code>mvarId</code> target type using <code>f</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.modifyTarget">modifyTarget</a></span> <span class="fn">f</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Lean/Meta/Basic.html#Lean.MVarId.withContext">withContext</a></span> <span class="fn">do
    <span class="fn"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Lean/Meta/Tactic/Util.html#Lean.MVarId.checkNotAssigned">checkNotAssigned</a></span> <span class="fn">`modifyTarget</span></span>
    let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Lean/Meta/Tactic/Util.html#Lean.MVarId.getType">getType</a></span>
    let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn">f</span> <span class="fn">__do_lift</span></span>
    <span class="fn"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.change">change</a></span> <span class="fn">__do_lift</span> <a href="../../.././Init/Prelude.html#Bool.false">false</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.modifyTarget" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.modifyTargetEqLHS"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L222-L231">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.modifyTargetEqLHS"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">modifyTargetEqLHS</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Modify <code>mvarId</code> target type left-hand-side using <code>f</code>.
Throw an error if target type is not an equality.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.modifyTargetEqLHS" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.clearValue"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Replace.lean#L233-L264">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Replace.html#Lean.MVarId.clearValue"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">clearValue</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarId</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Clears the value of the local definition <code>fvarId</code>. Ensures that the resulting goal state
is still type correct. Throws an error if it is a local hypothesis without a value.</p><p>Preserves the order of the local context.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.clearValue" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>