<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../../.././style.css"></link><link rel="icon" href="../../../.././favicon.svg"></link><link rel="mask-icon" href="../../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Meta.Tactic.Grind.Action</title><script defer="true" src="../../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../../.././";</script><script>const MODULE_NAME="Lean.Meta.Tactic.Grind.Action";</script><script type="module" src="../../../.././jump-src.js"></script><script type="module" src="../../../.././search.js"></script><script type="module" src="../../../.././expand-nav.js"></script><script type="module" src="../../../.././how-about.js"></script><script type="module" src="../../../.././instances.js"></script><script type="module" src="../../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Tactic</span>.<span class="name">Grind</span>.<span class="name">Action</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html">Lean.Meta.Tactic.Grind.Types</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Meta.Tactic.Grind.Action" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.TGrindStep"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">TGrindStep</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.ActionResult.toMessageData"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">ActionResult</span>.<span class="name">toMessageData</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.instToMessageDataActionResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">instToMessageDataActionResult</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.skip"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">skip</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.done"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">done</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.andThen"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">andThen</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.instAndThen"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">instAndThen</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.orElse"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">orElse</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.instOrElse"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">instOrElse</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.loop"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">loop</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.loopRef"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">loopRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.run"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">run</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.skipIfNA"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">skipIfNA</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.mkGrindStep"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mkGrindStep</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.TGrindStep.getTactic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">TGrindStep</span>.<span class="name">getTactic</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.mkGrindSeq"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mkGrindSeq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.mkGrindNext"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mkGrindNext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.group"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">group</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.ungroup"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">ungroup</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.concatTactic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">concatTactic</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.closeWith"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">closeWith</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.terminalAction"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">terminalAction</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.saveStateIfTracing"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">saveStateIfTracing</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.checkSeqAt"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">checkSeqAt</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.checkTactic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">checkTactic</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.solverAction"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">solverAction</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.mbtc"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mbtc</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.Grind.Action.loop_skipIfNA"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">loop_skipIfNA</span></a></div></nav><main>
<div class="mod_doc"><h1 id="Action" class="markdown-heading"><code>Action</code> <a class="hover-link" href="#Action">#</a></h1><p><code>Action</code> is the <em>control interface</em> for <code>grind</code>’s search steps. It is defined in
Continuation-Passing Style (CPS):</p><pre><code>abbrev Action :=
  Goal → (kna : Goal → GrindM ActionResult) → (kp : Goal → GrindM ActionResult) → GrindM ActionResult
</code></pre><p>An Action receives: the current <code>Goal</code>, a continuation <code>kna</code> to run when the action is not applicable,
and a continuation <code>kp</code> to run when it makes progress.</p><p>It returns an <code>ActionResult</code>:</p><ul><li><p><code>.closed seq</code>: the goal was fully solved, and <code>seq</code> is the sequence of tactics
that, if replayed, closes the goal.</p></li><li><p><code>.stuck gs</code>: search ran and got stuck at goals <code>gs</code>. Remark: actions such as <code>splitNext</code> can decide
whether they stop at the first failure or not.</p></li></ul><h2 id="Why-CPS" class="markdown-heading">Why CPS? <a class="hover-link" href="#Why-CPS">#</a></h2><p>Two core requirements motivated CPS:</p><ul><li><p>Non-chronological backtracking (NCB) for branching steps like <code>splitNext</code>.
A branching action must be able to run the full continuation on each
subgoal and decide—based on the entire downstream proof whether the case split is
actually needed or not. CPS gives the action visibility and control over <code>kp</code>.</p></li><li><p>Tactic script generation. Some leaves (e.g. <code>ematch</code>)
should log only the facts/instantiations actually used by the final proof.
Running the continuation first and then post-processing what happened lets an
action commit exactly the steps that mattered.</p></li></ul><h2 id="Contract-what-every-Action-must-guarantee" class="markdown-heading">Contract (what every <code>Action</code> must guarantee) <a class="hover-link" href="#Contract-what-every-Action-must-guarantee">#</a></h2><ul><li><p>Return exactly once. An action may call <code>kp</code> zero or more times internally
(e.g. once per branch), but it must eventually return a single <code>ActionResult</code>.</p></li><li><p><code>.stuck g</code> and <code>.closed seq</code> reflect the final choice the action made after
any internal calls to <code>kp</code>. Combinators reason only about this final result.</p></li><li><p>When an action is not applicable, it must invoke <code>kna</code> and perform no
observable effects.</p></li></ul><h2 id="Why-Action-is-not-a-Monad" class="markdown-heading">Why <code>Action</code> is not a <code><a href="../../../.././Init/Prelude.html#Monad">Monad</a></code> <a class="hover-link" href="#Why-Action-is-not-a-Monad">#</a></h2><p>Although it looks like “a computation that can call a continuation”, <code>Action</code>
is a control operator, not a lawful monad:</p><ul><li><p>Multi-shot continuations. <code>splitNext</code> legitimately calls <code>kp</code> multiple times
(once per subgoal). Standard <code>bind</code> assumes a linear continuation. Duplicating
the continuation breaks associativity (agreed?)</p></li><li><p>Future inspection. Many actions decide what to keep/commit after seeing
the entire result of <code>kp</code> (e.g., the generated proof term). That is delimited control
(<code>callCC</code>/<code>handlers</code>) rather than plain monadic sequencing. It seems overkill to
use <code>callCC</code> here.</p></li></ul></div><div class="decl" id="Lean.Meta.Grind.TGrindStep"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L71-L71">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.TGrindStep"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">TGrindStep</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.TGrindStep">Lean.Meta.Grind.TGrindStep</a> <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lean.Parser.Tactic.Grind.grindStep</span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.TGrindStep" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.ActionResult.toMessageData"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L73-L75">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.ActionResult.toMessageData"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">ActionResult</span>.<span class="name">toMessageData</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult">ActionResult</a> → <a href="../../../.././Lean/Message.html#Lean.MessageData">MessageData</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">(<a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult.closed">Lean.Meta.Grind.ActionResult.closed</a> <span class="fn">seq</span>)</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.ActionResult.toMessageData">toMessageData</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">&quot;closed &quot;</span></span> <a href="../../../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="../../../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">seq</span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult.stuck">Lean.Meta.Grind.ActionResult.stuck</a> <span class="fn">goals</span>)</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.ActionResult.toMessageData">toMessageData</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">&quot;stuck &quot;</span></span> <a href="../../../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="../../../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">(<a href="../../../.././Init/Prelude.html#List.map">List.map</a> <span class="fn">(fun (<span class="fn">x</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Goal">Lean.Meta.Grind.Goal</a>) =&gt; <span class="fn"><span class="fn">x</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Goal.mvarId">mvarId</a></span>)</span> <span class="fn">goals</span>)</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.ActionResult.toMessageData" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.instToMessageDataActionResult"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L77-L78">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.instToMessageDataActionResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">instToMessageDataActionResult</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Message.html#Lean.ToMessageData">ToMessageData</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult">ActionResult</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.instToMessageDataActionResult">Lean.Meta.Grind.instToMessageDataActionResult</a> <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Lean/Message.html#Lean.ToMessageData.mk">{</a> <span class="fn">toMessageData</span> := <a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.ActionResult.toMessageData">Lean.Meta.Grind.ActionResult.toMessageData</a> <a href="../../../.././Lean/Message.html#Lean.ToMessageData.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.skip"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L82-L83">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.skip"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">skip</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.skip">Lean.Meta.Grind.Action.skip</a> <span class="fn">goal</span> <span class="fn">x✝</span> <span class="fn">kp</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">kp</span> <span class="fn">goal</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.skip" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.done"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L85-L93">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.done"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">done</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>If the <code>goal</code> is already inconsistent, returns <code>.closed []</code>. Otherwise, executes
then not applicable continuation.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.done">Lean.Meta.Grind.Action.done</a> <span class="fn">goal</span> <span class="fn">kna</span> <span class="fn">x✝</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <a href="../../../.././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">goal</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GoalState.inconsistent">inconsistent</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult.closed">Lean.Meta.Grind.ActionResult.closed</a> <a href="../../../.././Init/Prelude.html#List.nil">[</a><a href="../../../.././Init/Prelude.html#List.nil">]</a>)</span></span> <a href="../../../.././Init/Prelude.html#ite">else</a> <span class="fn"><span class="fn">kna</span> <span class="fn">goal</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.done" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.andThen"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L95-L101">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.andThen"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">andThen</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">x </span><span class="fn">y</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p><code>x &gt;&gt; y</code>, executes <code>x</code> and then <code>y</code></p><ul><li>If <code>x</code> is not applicable, then <code>x &gt;&gt; y</code> is not applicable.</li><li>If <code>y</code> is not applicable, it behaves like a skip.</li></ul><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.andThen">andThen</a></span> <span class="fn">y</span> <span class="fn">goal</span> <span class="fn">kna</span> <span class="fn">kp</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">x</span> <span class="fn">goal</span> <span class="fn">kna</span> <span class="fn">fun (<span class="fn">goal'</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Goal">Lean.Meta.Grind.Goal</a>) =&gt; <span class="fn"><span class="fn">y</span> <span class="fn">goal'</span> <span class="fn">kp</span> <span class="fn">kp</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.andThen" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.instAndThen"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L103-L103">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.instAndThen"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">instAndThen</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#AndThen">AndThen</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.instAndThen">Lean.Meta.Grind.Action.instAndThen</a> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <a href="../../../.././Init/Prelude.html#AndThen.mk">{</a> <span class="fn">andThen</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Lean.Meta.Grind.Action</a>) (<span class="fn">y</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#Unit">Unit</a> → <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Lean.Meta.Grind.Action</a></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">x</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.andThen">andThen</a></span> <span class="fn">(<span class="fn">y</span> <a href="../../../.././Init/Prelude.html#Unit.unit">(</a><a href="../../../.././Init/Prelude.html#Unit.unit">)</a>)</span></span></span> <a href="../../../.././Init/Prelude.html#AndThen.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.orElse"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L105-L109">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.orElse"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">orElse</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">x </span><span class="fn">y</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>Choice: tries <code>x</code>, if not applicable, tries <code>y</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.orElse">orElse</a></span> <span class="fn">y</span> <span class="fn">goal</span> <span class="fn">kna</span> <span class="fn">kp</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">x</span> <span class="fn">goal</span> <span class="fn">(fun (<span class="fn">goal</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Goal">Lean.Meta.Grind.Goal</a>) =&gt; <span class="fn"><span class="fn">y</span> <span class="fn">goal</span> <span class="fn">kna</span> <span class="fn">kp</span></span>)</span> <span class="fn">kp</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.orElse" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.instOrElse"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L111-L112">source</a></div><div class="attributes">@[instance_reducible]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.instOrElse"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">instOrElse</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#OrElse">OrElse</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.instOrElse">Lean.Meta.Grind.Action.instOrElse</a> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <a href="../../../.././Init/Prelude.html#OrElse.mk">{</a> <span class="fn">orElse</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Lean.Meta.Grind.Action</a>) (<span class="fn">y</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#Unit">Unit</a> → <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Lean.Meta.Grind.Action</a></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">x</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.orElse">orElse</a></span> <span class="fn">(<span class="fn">y</span> <a href="../../../.././Init/Prelude.html#Unit.unit">(</a><a href="../../../.././Init/Prelude.html#Unit.unit">)</a>)</span></span></span> <a href="../../../.././Init/Prelude.html#OrElse.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.loop"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L114-L127">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loop"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">loop</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>Repeats <code>x</code> up to <code>n</code> times while it remains applicable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.loop" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.loopRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L129-L133">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loopRef"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">loopRef</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p><code><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loop">loop</a></code> reference implementation without <code>tryCatchRuntimeEx</code> for proving sanity checking lemmas.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loopRef">Lean.Meta.Grind.Action.loopRef</a> <span class="fn">0</span> <span class="fn">x</span> <span class="fn">goal</span> <span class="fn">x✝</span> <span class="fn">kp</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">kp</span> <span class="fn">goal</span></span></li><li class="equation"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loopRef">Lean.Meta.Grind.Action.loopRef</a> <span class="fn"><span class="fn">n_2</span>.<a href="../../../.././Init/Prelude.html#Nat.succ">succ</a></span> <span class="fn">x</span> <span class="fn">goal</span> <span class="fn">x✝</span> <span class="fn">kp</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><span class="fn">x</span> <span class="fn">goal</span> <span class="fn">kp</span> <span class="fn">fun (<span class="fn">goal'</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Goal">Lean.Meta.Grind.Goal</a>) =&gt; <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loopRef">Lean.Meta.Grind.Action.loopRef</a> <span class="fn">n_2</span> <span class="fn">x</span> <span class="fn">goal'</span> <span class="fn">kp</span> <span class="fn">kp</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.loopRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.run"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L136-L149">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.run"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">run</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">goal</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Goal">Goal</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">a</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult">ActionResult</a></span></div></div><p>Runs action <code>a</code> on the given <code>goal</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.run" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.skipIfNA"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L151-L155">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.skipIfNA"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">skipIfNA</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>Executes <code>x</code>, but behaves like a <code><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.skip">skip</a></code> if it is not applicable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.skipIfNA">skipIfNA</a></span> <span class="fn">goal</span> <span class="fn">x✝</span> <span class="fn">kp</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">x</span> <span class="fn">goal</span> <span class="fn">kp</span> <span class="fn">kp</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.skipIfNA" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.mkGrindStep"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L157-L159">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.mkGrindStep"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mkGrindStep</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.TGrindStep">TGrindStep</a></div></div><p><code>TSyntax `grind</code> =&gt; <code>TSyntax `Lean.Parser.Tactic.Grind.grindStep</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.mkGrindStep">Lean.Meta.Grind.Action.mkGrindStep</a> <span class="fn">t</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Init/Prelude.html#Lean.mkNode">Lean.mkNode</a> <span class="fn">`Lean.Parser.Tactic.Grind.grindStep</span> <a href="../../../.././Init/Prelude.html#List.toArray">#[</a><span class="fn"><span class="fn">t</span>.<a href="../../../.././Init/Prelude.html#Lean.TSyntax.raw">raw</a></span><a href="../../../.././Init/Prelude.html#List.cons">,</a> <a href="../../../.././Init/Prelude.html#Lean.mkNullNode">Lean.mkNullNode</a><a href="../../../.././Init/Prelude.html#List.toArray">]</a></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.mkGrindStep" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.TGrindStep.getTactic"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L161-L163">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.TGrindStep.getTactic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">TGrindStep</span>.<span class="name">getTactic</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.TGrindStep">TGrindStep</a> → <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.TGrindStep.getTactic" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.mkGrindSeq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L165-L171">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.mkGrindSeq"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mkGrindSeq</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Init/Prelude.html#Lean.TSyntax">TSyntax</a> <span class="fn">`Lean.Parser.Tactic.Grind.grindSeq</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.mkGrindSeq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.mkGrindNext"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L173-L185">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.mkGrindNext"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mkGrindNext</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/CoreM.html#Lean.Core.CoreM">CoreM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span></div></div><p>Given <code>[t₁, ..., tₙ]</code>, returns</p><pre><code>· t₁
  ...
  tₙ
</code></pre><p>If the list is empty, it returns <code>· <a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.done">done</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.mkGrindNext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.group"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L201-L217">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.group"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">group</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>If tracing is enabled and continuation produced <code>.closed [t₁, ..., tₙ]</code>,
returns the singleton sequence <code>[t]</code> where <code>t</code> is</p><pre><code>· t₁
  ...
  tₙ
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.group" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.ungroup"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L219-L235">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.ungroup"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">ungroup</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>If tracing is enabled and continuation produced <code>.closed [(next =&gt; t₁; ...; tₙ)]</code> or its variant using <code>·</code>
returns <code>.close [t₁, ... tₙ]</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.ungroup" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.concatTactic"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L237-L250">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.concatTactic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">concatTactic</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">r</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult">ActionResult</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mk</span> : <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult">ActionResult</a></span></div></div><p>Appends a new tactic syntax to a successful result.
Used by leaf actions to record the tactic that produced progress.
If <code>(← getConfig).trace</code> is <code>false</code>, it just returns <code>r</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.concatTactic">Lean.Meta.Grind.Action.concatTactic</a> <span class="fn">r</span> <span class="fn">mk</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.getConfig">Lean.Meta.Grind.getConfig</a>
  <a href="../../../.././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">__do_lift</span>.<a href="../../../.././Init/Grind/Config.html#Lean.Grind.Config.trace">trace</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">r</span></span> <a href="../../../.././Init/Prelude.html#ite">else</a> <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">r</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.concatTactic" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.closeWith"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L252-L257">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.closeWith"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">closeWith</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mk</span> : <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.ActionResult">ActionResult</a></span></div></div><p>Returns <code>.closed [← mk]</code> if tracing is enabled, and <code>.closed []</code> otherwise.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.closeWith" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.terminalAction"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L259-L272">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.terminalAction"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">terminalAction</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">check</span> : <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GoalM">GoalM</a> <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mkTac</span> : <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>A terminal action which closes the goal or not.
This kind of action may make progress, but we only include <code>mkTac</code> into the resulting tactic sequence
if it closed the goal.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.terminalAction" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.saveStateIfTracing"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L274-L278">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.saveStateIfTracing"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">saveStateIfTracing</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <span class="fn">(<a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.SavedState">SavedState</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.saveStateIfTracing" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.checkSeqAt"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L279-L294">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.checkSeqAt"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">checkSeqAt</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">s?</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.SavedState">SavedState</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">goal</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Goal">Goal</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">seq</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Returns <code>true</code> if the tactic sequence <code>seq</code> closes <code>goal</code> starting at saved state <code>s?</code>.
If <code>s?</code> is <code>none</code> just returns <code>true</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.checkSeqAt">Lean.Meta.Grind.Action.checkSeqAt</a> <span class="fn">s?</span> <span class="fn">goal</span> <span class="fn">seq</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a></span></li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.checkSeqAt" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.checkTactic"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L296-L313">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.checkTactic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">checkTactic</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">warnOnly</span> : <a href="../../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>Helper action that checks whether the resulting tactic script produced by its continuation
can close the original goal.
If <code>warnOnly = true</code>, just generates a warning message instead of an error</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.checkTactic" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.solverAction"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L315-L347">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.solverAction"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">solverAction</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">check</span> : <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GoalM">GoalM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/CheckResult.html#Lean.Meta.Grind.CheckResult">CheckResult</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mkTac</span> : <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.GrindM">GrindM</a> <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.TGrind">TGrind</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><p>Helper action for satellite solvers that use <code>CheckResult</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.solverAction" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.Grind.Action.mbtc"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L349-L365">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.mbtc"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">mbtc</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.Grind.Action.mbtc" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>Some sanity check properties.</p></div><div class="decl" id="Lean.Meta.Grind.Action.loop_skipIfNA"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/985f350dcd18fc7814dfa677cac09933f44f3215/src/Lean/Meta/Tactic/Grind/Action.lean#L405-L406">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loop_skipIfNA"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Grind</span>.<span class="name">Action</span>.<span class="name">loop_skipIfNA</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">n</span> : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">a</span> : <a href="../../../.././Lean/Meta/Tactic/Grind/Types.html#Lean.Meta.Grind.Action">Action</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loopRef">loopRef</a> <span class="fn">n</span> <span class="fn">a</span>)</span>.<a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.skipIfNA">skipIfNA</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Lean/Meta/Tactic/Grind/Action.html#Lean.Meta.Grind.Action.loopRef">loopRef</a> <span class="fn">n</span> <span class="fn">a</span></span></div></div></div></div></main>
<nav class="nav"><iframe src="../../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>