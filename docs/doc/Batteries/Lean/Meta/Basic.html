<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Batteries.Lean.Meta.Basic</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Batteries.Lean.Meta.Basic";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Batteries</span>.<span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Basic</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init.html">Init</a></li><li><a href="../../.././Batteries/Control/AlternativeMonad.html">Batteries.Control.AlternativeMonad</a></li><li><a href="../../.././Lean/Meta/SynthInstance.html">Lean.Meta.SynthInstance</a></li><li><a href="../../.././Lean/Meta/Tactic/Intro.html">Lean.Meta.Tactic.Intro</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Batteries.Lean.Meta.Basic" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.sortFVarsByContextOrder"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">sortFVarsByContextOrder</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.instAlternativeMonadMetaM"><span class="name">Lean</span>.<span class="name">instAlternativeMonadMetaM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MetavarContext.getExprMVarDecl"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">getExprMVarDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MetavarContext.declareExprMVar"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">declareExprMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MetavarContext.isExprMVarAssignedOrDelayedAssigned"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">isExprMVarAssignedOrDelayedAssigned</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MetavarContext.isExprMVarDeclared"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">isExprMVarDeclared</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MetavarContext.eraseExprMVarAssignment"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">eraseExprMVarAssignment</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MetavarContext.unassignedExprMVars"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">unassignedExprMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.isDeclared"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">isDeclared</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.eraseAssignment"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">eraseAssignment</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.synthInstance"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">synthInstance</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.getTypeCleanup"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">getTypeCleanup</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.getUnassignedExprMVars"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">getUnassignedExprMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.unhygienic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">unhygienic</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.mkFreshIdWithPrefix"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">mkFreshIdWithPrefix</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.saturate1"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">saturate1</span></a></div></nav><main>
<div class="decl" id="Lean.Meta.sortFVarsByContextOrder"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L18-L25">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.sortFVarsByContextOrder"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">sortFVarsByContextOrder</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/LocalContext.html#Lean.MonadLCtx">MonadLCtx</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hyps</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>)</span></span></div></div><p>Sort the given <code>FVarId</code>s by the order in which they appear in the current local
context. If any of the <code>FVarId</code>s do not appear in the current local context, the
result is unspecified.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.sortFVarsByContextOrder">Lean.Meta.sortFVarsByContextOrder</a> <span class="fn">hyps</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Lean/LocalContext.html#Lean.MonadLCtx.getLCtx">Lean.getLCtx</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/LocalContext.html#Lean.LocalContext.sortFVarsByContextOrder">sortFVarsByContextOrder</a></span> <span class="fn">hyps</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.sortFVarsByContextOrder" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.instAlternativeMonadMetaM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L27-L27">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.instAlternativeMonadMetaM"><span class="name">Lean</span>.<span class="name">instAlternativeMonadMetaM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Batteries/Control/AlternativeMonad.html#AlternativeMonad">AlternativeMonad</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.instAlternativeMonadMetaM">Lean.instAlternativeMonadMetaM</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <a href="../../.././Batteries/Control/AlternativeMonad.html#AlternativeMonad.mk">{</a> <span class="fn">toAlternative</span> := <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.instAlternativeMetaM">Lean.Meta.instAlternativeMetaM</a>, <span class="fn">toBind</span> := <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.instMonadMetaM">Lean.Meta.instMonadMetaM</a>.<a href="../../.././Init/Prelude.html#Monad.toBind">toBind</a></span> <a href="../../.././Batteries/Control/AlternativeMonad.html#AlternativeMonad.mk">}</a></li></ul></details></div></div><div class="decl" id="Lean.MetavarContext.getExprMVarDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L31-L40">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.getExprMVarDecl"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">getExprMVarDecl</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Exception.html#Lean.MonadError">MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../../.././Lean/MetavarContext.html#Lean.MetavarDecl">MetavarDecl</a></span></div></div><p>Get the <code>MetavarDecl</code> of <code>mvarId</code>. If <code>mvarId</code> is not a declared metavariable
in the given <code>MetavarContext</code>, throw an error.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MetavarContext.getExprMVarDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MetavarContext.declareExprMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L42-L48">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.declareExprMVar"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">declareExprMVar</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mdecl</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarDecl">MetavarDecl</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a></div></div><p>Declare a metavariable. You must make sure that the metavariable is not already
declared.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MetavarContext.declareExprMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MetavarContext.isExprMVarAssignedOrDelayedAssigned"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L50-L59">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.isExprMVarAssignedOrDelayedAssigned"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">isExprMVarAssignedOrDelayedAssigned</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Check whether a metavariable is assigned or delayed-assigned. A
delayed-assigned metavariable is already 'solved' but the solution cannot be
substituted yet because we have to wait for some other metavariables to be
assigned first. So in most situations you want to treat a delayed-assigned
metavariable as assigned.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">mctx</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.isExprMVarAssignedOrDelayedAssigned">isExprMVarAssignedOrDelayedAssigned</a></span> <span class="fn">mvarId</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> (<span class="fn"><span class="fn"><span class="fn"><span class="fn">mctx</span>.<a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext.eAssignment">eAssignment</a></span>.<a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap.contains">contains</a></span> <span class="fn">mvarId</span></span> <a href="../../.././Init/Prelude.html#Bool.or">||</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">mctx</span>.<a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext.dAssignment">dAssignment</a></span>.<a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap.contains">contains</a></span> <span class="fn">mvarId</span></span>)</li></ul></details><details id="instances-for-list-Lean.MetavarContext.isExprMVarAssignedOrDelayedAssigned" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MetavarContext.isExprMVarDeclared"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L61-L65">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.isExprMVarDeclared"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">isExprMVarDeclared</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Check whether a metavariable is declared in the given <code>MetavarContext</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">mctx</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.isExprMVarDeclared">isExprMVarDeclared</a></span> <span class="fn">mvarId</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">mctx</span>.<a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext.decls">decls</a></span>.<a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap.contains">contains</a></span> <span class="fn">mvarId</span></span></li></ul></details><details id="instances-for-list-Lean.MetavarContext.isExprMVarDeclared" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MetavarContext.eraseExprMVarAssignment"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L67-L74">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.eraseExprMVarAssignment"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">eraseExprMVarAssignment</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a></div></div><p>Erase any assignment or delayed assignment of the given metavariable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MetavarContext.eraseExprMVarAssignment" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MetavarContext.unassignedExprMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L76-L88">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.unassignedExprMVars"><span class="name">Lean</span>.<span class="name">MetavarContext</span>.<span class="name">unassignedExprMVars</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mctx</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">MetavarContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">includeDelayed</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span></div></div><p>Obtain all unassigned metavariables from the given <code>MetavarContext</code>. If
<code>includeDelayed</code> is <code>true</code>, delayed-assigned metavariables are considered
unassigned.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MetavarContext.unassignedExprMVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.isDeclared"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L95-L99">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.isDeclared"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">isDeclared</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Check whether a metavariable is declared.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.isDeclared">isDeclared</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx.getMCtx">Lean.getMCtx</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.isExprMVarDeclared">isExprMVarDeclared</a></span> <span class="fn">mvarId</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.isDeclared" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.eraseAssignment"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L101-L105">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.eraseAssignment"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">eraseAssignment</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Erase any assignment or delayed assignment of the given metavariable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.eraseAssignment">eraseAssignment</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx.modifyMCtx">Lean.modifyMCtx</a> <span class="fn">fun (<span class="fn">x</span> : <a href="../../.././Lean/MetavarContext.html#Lean.MetavarContext">Lean.MetavarContext</a>) =&gt; <span class="fn"><span class="fn"><span class="fn">x</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.eraseExprMVarAssignment">eraseExprMVarAssignment</a></span> <span class="fn">mvarId</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.eraseAssignment" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.synthInstance"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L107-L110">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.synthInstance"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">synthInstance</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Solve a goal by synthesizing an instance.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">g</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.synthInstance">synthInstance</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn">g</span>.<a href="../../.././Lean/Meta/Tactic/Util.html#Lean.MVarId.getType">getType</a></span>
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../../.././Lean/Meta/SynthInstance.html#Lean.Meta.synthInstance">Lean.Meta.synthInstance</a> <span class="fn">__do_lift</span></span>
  <span class="fn"><span class="fn"><span class="fn">g</span>.<a href="../../.././Lean/MetavarContext.html#Lean.MVarId.assign">assign</a></span> <span class="fn">__do_lift</span></span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.synthInstance" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.getTypeCleanup"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L112-L115">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.getTypeCleanup"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">getTypeCleanup</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">mvarId</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Get the type the given metavariable after instantiating metavariables and cleaning up
annotations.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MVarId.getTypeCleanup">getTypeCleanup</a></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn">mvarId</span>.<a href="../../.././Lean/Meta/Tactic/Util.html#Lean.MVarId.getType">getType</a></span>
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.instantiateMVars">Lean.instantiateMVars</a> <span class="fn">__do_lift</span></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Lean/Expr.html#Lean.Expr.cleanupAnnotations">cleanupAnnotations</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.getTypeCleanup" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.getUnassignedExprMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L122-L128">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.getUnassignedExprMVars"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">getUnassignedExprMVars</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx">MonadMCtx</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">includeDelayed</span> : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span></div></div><p>Obtain all unassigned metavariables. If <code>includeDelayed</code> is <code>true</code>,
delayed-assigned metavariables are considered unassigned.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.getUnassignedExprMVars">Lean.Meta.getUnassignedExprMVars</a> <span class="fn">includeDelayed</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <a href="../../.././Lean/MetavarContext.html#Lean.MonadMCtx.getMCtx">Lean.getMCtx</a>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn"><span class="fn">__do_lift</span>.<a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.MetavarContext.unassignedExprMVars">unassignedExprMVars</a></span> <span class="fn">includeDelayed</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.getUnassignedExprMVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.unhygienic"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L130-L134">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.unhygienic"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">unhygienic</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.MonadWithOptions">MonadWithOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Run a computation with hygiene turned off.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.unhygienic">Lean.Meta.unhygienic</a> <span class="fn">x</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.MonadWithOptions.withOptions">Lean.withOptions</a> <span class="fn">(fun (<span class="fn">x</span> : <a href="../../.././Lean/Data/Options.html#Lean.Options">Lean.Options</a>) =&gt; <span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Option.set">Lean.Option.set</a> <span class="fn">x</span> <a href="../../.././Lean/Meta/Tactic/Intro.html#Lean.Meta.tactic.hygienic">Lean.Meta.tactic.hygienic</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></span>)</span> <span class="fn">x</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.unhygienic" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.mkFreshIdWithPrefix"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L136-L146">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.mkFreshIdWithPrefix"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">mkFreshIdWithPrefix</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Meta/Defs.html#Lean.MonadNameGenerator">MonadNameGenerator</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">«prefix»</span> : <a href="../../.././Init/Prelude.html#Lean.Name">Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../../.././Init/Prelude.html#Lean.Name">Name</a></span></div></div><p>A variant of <code>mkFreshId</code> which generates names with a particular prefix. The
generated names are unique and have the form <code>&lt;prefix&gt;.&lt;N&gt;</code> where <code>N</code> is a
natural number. They are not suitable as user-facing names.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.mkFreshIdWithPrefix">Lean.Meta.mkFreshIdWithPrefix</a> <span class="fn">«prefix»</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">ngen</span> ← <a href="../../.././Init/Meta/Defs.html#Lean.MonadNameGenerator.getNGen">Lean.getNGen</a>
  have r : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> := <span class="fn"><a href="../../.././Init/MetaTypes.html#Lean.NameGenerator.mk">{</a> <span class="fn">namePrefix</span> := <span class="fn">«prefix»</span>, <span class="fn">idx</span> := <span class="fn"><span class="fn">ngen</span>.<a href="../../.././Init/MetaTypes.html#Lean.NameGenerator.idx">idx</a></span> <a href="../../.././Init/MetaTypes.html#Lean.NameGenerator.mk">}</a>.<a href="../../.././Init/Meta/Defs.html#Lean.NameGenerator.curr">curr</a></span>
  <span class="fn"><a href="../../.././Init/Meta/Defs.html#Lean.MonadNameGenerator.setNGen">Lean.setNGen</a> <span class="fn"><span class="fn">ngen</span>.<a href="../../.././Init/Meta/Defs.html#Lean.NameGenerator.next">next</a></span></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">r</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.mkFreshIdWithPrefix" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.saturate1"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/batteries/blob/5da171049c81931a2110303c9d547f5ab2955b06/Batteries/Lean/Meta/Basic.lean#L148-L169">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.saturate1"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">saturate1</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Exception.html#Lean.MonadError">MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Lean/Exception.html#Lean.MonadRecDepth">MonadRecDepth</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <span class="fn">(<a href="../../.././Init/System/ST.html#ST">ST</a> <a href="../../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a>)</span> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">goal</span> : <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">tac</span> : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> → <span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span>)</span></span></div></div><p><code><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.saturate1">saturate1</a> goal tac</code> runs <code>tac</code> on <code>goal</code>, then on the resulting goals, etc.,
until <code>tac</code> does not apply to any goal any more (i.e. it returns <code>none</code>). The
order of applications is depth-first, so if <code>tac</code> generates goals <code>[g₁, g₂, ⋯]</code>,
we apply <code>tac</code> to <code>g₁</code> and recursively to all its subgoals before visiting <code>g₂</code>.
If <code>tac</code> does not apply to <code>goal</code>, <code><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.saturate1">saturate1</a></code> returns <code>none</code>. Otherwise it
returns the generated subgoals to which <code>tac</code> did not apply. <code><a href="../../.././Batteries/Lean/Meta/Basic.html#Lean.Meta.saturate1">saturate1</a></code>
respects the <code>MonadRecDepth</code> recursion limit.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.saturate1" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>